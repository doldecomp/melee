.include "macros.inc"

.section .text  # 0x80005940 - 0x803B7240

.global DeleteCallback
DeleteCallback:
/* 8035824C 00354E2C  7C 08 02 A6 */	mflr r0
/* 80358250 00354E30  90 01 00 04 */	stw r0, 4(r1)
/* 80358254 00354E34  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80358258 00354E38  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8035825C 00354E3C  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80358260 00354E40  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80358264 00354E44  7C 9D 23 79 */	or. r29, r4, r4
/* 80358268 00354E48  93 81 00 10 */	stw r28, 0x10(r1)
/* 8035826C 00354E4C  3B 83 00 00 */	addi r28, r3, 0
/* 80358270 00354E50  1C BC 01 10 */	mulli r5, r28, 0x110
/* 80358274 00354E54  3C 60 80 4B */	lis r3, lbl_804A8B38@ha
/* 80358278 00354E58  38 03 8B 38 */	addi r0, r3, lbl_804A8B38@l
/* 8035827C 00354E5C  7F E0 2A 14 */	add r31, r0, r5
/* 80358280 00354E60  83 DF 00 D0 */	lwz r30, 0xd0(r31)
/* 80358284 00354E64  38 00 00 00 */	li r0, 0
/* 80358288 00354E68  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 8035828C 00354E6C  41 80 00 1C */	blt lbl_803582A8
/* 80358290 00354E70  A0 9F 00 BE */	lhz r4, 0xbe(r31)
/* 80358294 00354E74  38 7C 00 00 */	addi r3, r28, 0
/* 80358298 00354E78  38 BE 00 00 */	addi r5, r30, 0
/* 8035829C 00354E7C  4B FF C9 D9 */	bl __CARDFreeBlock
/* 803582A0 00354E80  7C 7D 1B 79 */	or. r29, r3, r3
/* 803582A4 00354E84  40 80 00 2C */	bge lbl_803582D0
lbl_803582A8:
/* 803582A8 00354E88  38 7F 00 00 */	addi r3, r31, 0
/* 803582AC 00354E8C  38 9D 00 00 */	addi r4, r29, 0
/* 803582B0 00354E90  4B FF AF C1 */	bl __CARDPutControlBlock
/* 803582B4 00354E94  28 1E 00 00 */	cmplwi r30, 0
/* 803582B8 00354E98  41 82 00 18 */	beq lbl_803582D0
/* 803582BC 00354E9C  39 9E 00 00 */	addi r12, r30, 0
/* 803582C0 00354EA0  7D 88 03 A6 */	mtlr r12
/* 803582C4 00354EA4  38 7C 00 00 */	addi r3, r28, 0
/* 803582C8 00354EA8  38 9D 00 00 */	addi r4, r29, 0
/* 803582CC 00354EAC  4E 80 00 21 */	blrl 
lbl_803582D0:
/* 803582D0 00354EB0  80 01 00 24 */	lwz r0, 0x24(r1)
/* 803582D4 00354EB4  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 803582D8 00354EB8  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 803582DC 00354EBC  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 803582E0 00354EC0  83 81 00 10 */	lwz r28, 0x10(r1)
/* 803582E4 00354EC4  38 21 00 20 */	addi r1, r1, 0x20
/* 803582E8 00354EC8  7C 08 03 A6 */	mtlr r0
/* 803582EC 00354ECC  4E 80 00 20 */	blr 

.global CARDDeleteAsync
CARDDeleteAsync:
/* 803582F0 00354ED0  7C 08 02 A6 */	mflr r0
/* 803582F4 00354ED4  90 01 00 04 */	stw r0, 4(r1)
/* 803582F8 00354ED8  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 803582FC 00354EDC  93 E1 00 2C */	stw r31, 0x2c(r1)
/* 80358300 00354EE0  3B E3 00 00 */	addi r31, r3, 0
/* 80358304 00354EE4  93 C1 00 28 */	stw r30, 0x28(r1)
/* 80358308 00354EE8  3B C5 00 00 */	addi r30, r5, 0
/* 8035830C 00354EEC  93 A1 00 24 */	stw r29, 0x24(r1)
/* 80358310 00354EF0  3B A4 00 00 */	addi r29, r4, 0
/* 80358314 00354EF4  38 81 00 18 */	addi r4, r1, 0x18
/* 80358318 00354EF8  4B FF AE A1 */	bl __CARDGetControlBlock
/* 8035831C 00354EFC  2C 03 00 00 */	cmpwi r3, 0
/* 80358320 00354F00  40 80 00 08 */	bge lbl_80358328
/* 80358324 00354F04  48 00 00 C0 */	b lbl_803583E4
lbl_80358328:
/* 80358328 00354F08  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8035832C 00354F0C  38 9D 00 00 */	addi r4, r29, 0
/* 80358330 00354F10  38 A1 00 14 */	addi r5, r1, 0x14
/* 80358334 00354F14  4B FF EF 51 */	bl __CARDGetFileNo
/* 80358338 00354F18  7C 64 1B 79 */	or. r4, r3, r3
/* 8035833C 00354F1C  40 80 00 10 */	bge lbl_8035834C
/* 80358340 00354F20  80 61 00 18 */	lwz r3, 0x18(r1)
/* 80358344 00354F24  4B FF AF 2D */	bl __CARDPutControlBlock
/* 80358348 00354F28  48 00 00 9C */	b lbl_803583E4
lbl_8035834C:
/* 8035834C 00354F2C  80 61 00 18 */	lwz r3, 0x18(r1)
/* 80358350 00354F30  80 81 00 14 */	lwz r4, 0x14(r1)
/* 80358354 00354F34  4B FF F3 AD */	bl __CARDIsOpened
/* 80358358 00354F38  2C 03 00 00 */	cmpwi r3, 0
/* 8035835C 00354F3C  41 82 00 14 */	beq lbl_80358370
/* 80358360 00354F40  80 61 00 18 */	lwz r3, 0x18(r1)
/* 80358364 00354F44  38 80 FF FF */	li r4, -1
/* 80358368 00354F48  4B FF AF 09 */	bl __CARDPutControlBlock
/* 8035836C 00354F4C  48 00 00 78 */	b lbl_803583E4
lbl_80358370:
/* 80358370 00354F50  80 61 00 18 */	lwz r3, 0x18(r1)
/* 80358374 00354F54  4B FF CA 49 */	bl __CARDGetDirBlock
/* 80358378 00354F58  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8035837C 00354F5C  38 80 00 FF */	li r4, 0xff
/* 80358380 00354F60  80 C1 00 18 */	lwz r6, 0x18(r1)
/* 80358384 00354F64  38 A0 00 40 */	li r5, 0x40
/* 80358388 00354F68  54 00 30 32 */	slwi r0, r0, 6
/* 8035838C 00354F6C  7C 63 02 14 */	add r3, r3, r0
/* 80358390 00354F70  A0 03 00 36 */	lhz r0, 0x36(r3)
/* 80358394 00354F74  B0 06 00 BE */	sth r0, 0xbe(r6)
/* 80358398 00354F78  4B CA AD 69 */	bl memset
/* 8035839C 00354F7C  28 1E 00 00 */	cmplwi r30, 0
/* 803583A0 00354F80  41 82 00 0C */	beq lbl_803583AC
/* 803583A4 00354F84  7F C0 F3 78 */	mr r0, r30
/* 803583A8 00354F88  48 00 00 0C */	b lbl_803583B4
lbl_803583AC:
/* 803583AC 00354F8C  3C 60 80 35 */	lis r3, __CARDDefaultApiCallback@ha
/* 803583B0 00354F90  38 03 22 70 */	addi r0, r3, __CARDDefaultApiCallback@l
lbl_803583B4:
/* 803583B4 00354F94  80 A1 00 18 */	lwz r5, 0x18(r1)
/* 803583B8 00354F98  3C 60 80 36 */	lis r3, DeleteCallback@ha
/* 803583BC 00354F9C  38 83 82 4C */	addi r4, r3, DeleteCallback@l
/* 803583C0 00354FA0  90 05 00 D0 */	stw r0, 0xd0(r5)
/* 803583C4 00354FA4  7F E3 FB 78 */	mr r3, r31
/* 803583C8 00354FA8  4B FF CB 95 */	bl __CARDUpdateDir
/* 803583CC 00354FAC  7C 7F 1B 79 */	or. r31, r3, r3
/* 803583D0 00354FB0  40 80 00 10 */	bge lbl_803583E0
/* 803583D4 00354FB4  80 61 00 18 */	lwz r3, 0x18(r1)
/* 803583D8 00354FB8  7F E4 FB 78 */	mr r4, r31
/* 803583DC 00354FBC  4B FF AE 95 */	bl __CARDPutControlBlock
lbl_803583E0:
/* 803583E0 00354FC0  7F E3 FB 78 */	mr r3, r31
lbl_803583E4:
/* 803583E4 00354FC4  80 01 00 34 */	lwz r0, 0x34(r1)
/* 803583E8 00354FC8  83 E1 00 2C */	lwz r31, 0x2c(r1)
/* 803583EC 00354FCC  83 C1 00 28 */	lwz r30, 0x28(r1)
/* 803583F0 00354FD0  83 A1 00 24 */	lwz r29, 0x24(r1)
/* 803583F4 00354FD4  38 21 00 30 */	addi r1, r1, 0x30
/* 803583F8 00354FD8  7C 08 03 A6 */	mtlr r0
/* 803583FC 00354FDC  4E 80 00 20 */	blr 
