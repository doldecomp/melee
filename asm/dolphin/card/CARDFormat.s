.include "macros.inc"

.section .text  # 0x80005940 - 0x803B7240

.global FormatCallback
FormatCallback:
/* 80356970 00353550  7C 08 02 A6 */	mflr r0
/* 80356974 00353554  90 01 00 04 */	stw r0, 4(r1)
/* 80356978 00353558  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8035697C 0035355C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80356980 00353560  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80356984 00353564  3B C3 00 00 */	addi r30, r3, 0
/* 80356988 00353568  3C 60 80 4B */	lis r3, lbl_804A8B38@ha
/* 8035698C 0035356C  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80356990 00353570  1C BE 01 10 */	mulli r5, r30, 0x110
/* 80356994 00353574  93 81 00 10 */	stw r28, 0x10(r1)
/* 80356998 00353578  38 03 8B 38 */	addi r0, r3, lbl_804A8B38@l
/* 8035699C 0035357C  7C 9C 23 79 */	or. r28, r4, r4
/* 803569A0 00353580  7F E0 2A 14 */	add r31, r0, r5
/* 803569A4 00353584  41 80 00 C4 */	blt lbl_80356A68
/* 803569A8 00353588  80 7F 00 24 */	lwz r3, 0x24(r31)
/* 803569AC 0035358C  38 03 00 01 */	addi r0, r3, 1
/* 803569B0 00353590  90 1F 00 24 */	stw r0, 0x24(r31)
/* 803569B4 00353594  80 9F 00 24 */	lwz r4, 0x24(r31)
/* 803569B8 00353598  2C 04 00 05 */	cmpwi r4, 5
/* 803569BC 0035359C  40 80 00 28 */	bge lbl_803569E4
/* 803569C0 003535A0  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 803569C4 003535A4  3C 60 80 35 */	lis r3, FormatCallback@ha
/* 803569C8 003535A8  38 A3 69 70 */	addi r5, r3, FormatCallback@l
/* 803569CC 003535AC  7C 80 21 D6 */	mullw r4, r0, r4
/* 803569D0 003535B0  38 7E 00 00 */	addi r3, r30, 0
/* 803569D4 003535B4  4B FF C6 31 */	bl __CARDEraseSector
/* 803569D8 003535B8  7C 7C 1B 79 */	or. r28, r3, r3
/* 803569DC 003535BC  41 80 00 8C */	blt lbl_80356A68
/* 803569E0 003535C0  48 00 00 B4 */	b lbl_80356A94
lbl_803569E4:
/* 803569E4 003535C4  2C 04 00 0A */	cmpwi r4, 0xa
/* 803569E8 003535C8  40 80 00 3C */	bge lbl_80356A24
/* 803569EC 003535CC  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 803569F0 003535D0  38 C4 FF FB */	addi r6, r4, -5
/* 803569F4 003535D4  3C 60 80 35 */	lis r3, FormatCallback@ha
/* 803569F8 003535D8  80 BF 00 80 */	lwz r5, 0x80(r31)
/* 803569FC 003535DC  7C 80 31 D6 */	mullw r4, r0, r6
/* 80356A00 003535E0  54 C0 68 24 */	slwi r0, r6, 0xd
/* 80356A04 003535E4  38 E3 69 70 */	addi r7, r3, FormatCallback@l
/* 80356A08 003535E8  7C C5 02 14 */	add r6, r5, r0
/* 80356A0C 003535EC  38 7E 00 00 */	addi r3, r30, 0
/* 80356A10 003535F0  38 A0 20 00 */	li r5, 0x2000
/* 80356A14 003535F4  4B FF DF 29 */	bl __CARDWrite
/* 80356A18 003535F8  7C 7C 1B 79 */	or. r28, r3, r3
/* 80356A1C 003535FC  41 80 00 4C */	blt lbl_80356A68
/* 80356A20 00353600  48 00 00 74 */	b lbl_80356A94
lbl_80356A24:
/* 80356A24 00353604  80 7F 00 80 */	lwz r3, 0x80(r31)
/* 80356A28 00353608  38 A0 20 00 */	li r5, 0x2000
/* 80356A2C 0035360C  38 03 20 00 */	addi r0, r3, 0x2000
/* 80356A30 00353610  90 1F 00 84 */	stw r0, 0x84(r31)
/* 80356A34 00353614  80 9F 00 80 */	lwz r4, 0x80(r31)
/* 80356A38 00353618  80 7F 00 84 */	lwz r3, 0x84(r31)
/* 80356A3C 0035361C  38 84 40 00 */	addi r4, r4, 0x4000
/* 80356A40 00353620  4B CA C7 B5 */	bl memcpy
/* 80356A44 00353624  80 7F 00 80 */	lwz r3, 0x80(r31)
/* 80356A48 00353628  38 A0 20 00 */	li r5, 0x2000
/* 80356A4C 0035362C  38 03 60 00 */	addi r0, r3, 0x6000
/* 80356A50 00353630  90 1F 00 88 */	stw r0, 0x88(r31)
/* 80356A54 00353634  80 9F 00 80 */	lwz r4, 0x80(r31)
/* 80356A58 00353638  80 7F 00 88 */	lwz r3, 0x88(r31)
/* 80356A5C 0035363C  3C 84 00 01 */	addis r4, r4, 1
/* 80356A60 00353640  38 84 80 00 */	addi r4, r4, -32768
/* 80356A64 00353644  4B CA C7 91 */	bl memcpy
lbl_80356A68:
/* 80356A68 00353648  83 BF 00 D0 */	lwz r29, 0xd0(r31)
/* 80356A6C 0035364C  38 00 00 00 */	li r0, 0
/* 80356A70 00353650  38 7F 00 00 */	addi r3, r31, 0
/* 80356A74 00353654  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 80356A78 00353658  7F 84 E3 78 */	mr r4, r28
/* 80356A7C 0035365C  4B FF C7 F5 */	bl __CARDPutControlBlock
/* 80356A80 00353660  39 9D 00 00 */	addi r12, r29, 0
/* 80356A84 00353664  7D 88 03 A6 */	mtlr r12
/* 80356A88 00353668  38 7E 00 00 */	addi r3, r30, 0
/* 80356A8C 0035366C  38 9C 00 00 */	addi r4, r28, 0
/* 80356A90 00353670  4E 80 00 21 */	blrl 
lbl_80356A94:
/* 80356A94 00353674  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80356A98 00353678  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80356A9C 0035367C  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80356AA0 00353680  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80356AA4 00353684  83 81 00 10 */	lwz r28, 0x10(r1)
/* 80356AA8 00353688  38 21 00 20 */	addi r1, r1, 0x20
/* 80356AAC 0035368C  7C 08 03 A6 */	mtlr r0
/* 80356AB0 00353690  4E 80 00 20 */	blr 

.global __CARDFormatRegionAsync
__CARDFormatRegionAsync:
/* 80356AB4 00353694  7C 08 02 A6 */	mflr r0
/* 80356AB8 00353698  90 01 00 04 */	stw r0, 4(r1)
/* 80356ABC 0035369C  94 21 FF A8 */	stwu r1, -0x58(r1)
/* 80356AC0 003536A0  BE 41 00 20 */	stmw r18, 0x20(r1)
/* 80356AC4 003536A4  3A 84 00 00 */	addi r20, r4, 0
/* 80356AC8 003536A8  3A C3 00 00 */	addi r22, r3, 0
/* 80356ACC 003536AC  3A 65 00 00 */	addi r19, r5, 0
/* 80356AD0 003536B0  38 81 00 18 */	addi r4, r1, 0x18
/* 80356AD4 003536B4  4B FF C6 E5 */	bl __CARDGetControlBlock
/* 80356AD8 003536B8  2C 03 00 00 */	cmpwi r3, 0
/* 80356ADC 003536BC  40 80 00 08 */	bge lbl_80356AE4
/* 80356AE0 003536C0  48 00 06 18 */	b lbl_803570F8
lbl_80356AE4:
/* 80356AE4 003536C4  80 61 00 18 */	lwz r3, 0x18(r1)
/* 80356AE8 003536C8  38 80 00 FF */	li r4, 0xff
/* 80356AEC 003536CC  38 A0 20 00 */	li r5, 0x2000
/* 80356AF0 003536D0  83 63 00 80 */	lwz r27, 0x80(r3)
/* 80356AF4 003536D4  7F 63 DB 78 */	mr r3, r27
/* 80356AF8 003536D8  4B CA C6 09 */	bl memset
/* 80356AFC 003536DC  3C 60 CC 00 */	lis r3, 0xCC00206E@ha
/* 80356B00 003536E0  A2 43 20 6E */	lhz r18, 0xCC00206E@l(r3)
/* 80356B04 003536E4  B2 9B 00 24 */	sth r20, 0x24(r27)
/* 80356B08 003536E8  4B FF 22 35 */	bl __OSLockSram
/* 80356B0C 003536EC  80 03 00 0C */	lwz r0, 0xc(r3)
/* 80356B10 003536F0  90 1B 00 14 */	stw r0, 0x14(r27)
/* 80356B14 003536F4  88 03 00 12 */	lbz r0, 0x12(r3)
/* 80356B18 003536F8  38 60 00 00 */	li r3, 0
/* 80356B1C 003536FC  90 1B 00 18 */	stw r0, 0x18(r27)
/* 80356B20 00353700  4B FF 25 DD */	bl __OSUnlockSram
/* 80356B24 00353704  4B FF 58 CD */	bl OSGetTime
/* 80356B28 00353708  3A A4 00 00 */	addi r21, r4, 0
/* 80356B2C 0035370C  3A 83 00 00 */	addi r20, r3, 0
/* 80356B30 00353710  3B 55 00 00 */	addi r26, r21, 0
/* 80356B34 00353714  3B D4 00 00 */	addi r30, r20, 0
/* 80356B38 00353718  4B FF 22 61 */	bl __OSLockSramEx
/* 80356B3C 0035371C  1C 16 00 0C */	mulli r0, r22, 0xc
/* 80356B40 00353720  7F 23 02 14 */	add r25, r3, r0
/* 80356B44 00353724  3C 60 41 C6 */	lis r3, 0x41C64E6D@ha
/* 80356B48 00353728  3B 19 00 00 */	addi r24, r25, 0
/* 80356B4C 0035372C  3B E3 4E 6D */	addi r31, r3, 0x41C64E6D@l
/* 80356B50 00353730  3B 80 00 00 */	li r28, 0
/* 80356B54 00353734  3A E0 00 04 */	li r23, 4
/* 80356B58 00353738  48 00 03 74 */	b lbl_80356ECC
lbl_80356B5C:
/* 80356B5C 0035373C  7C BE F9 D6 */	mullw r5, r30, r31
/* 80356B60 00353740  7C 7A F8 16 */	mulhwu r3, r26, r31
/* 80356B64 00353744  3B C0 00 00 */	li r30, 0
/* 80356B68 00353748  7C A5 1A 14 */	add r5, r5, r3
/* 80356B6C 0035374C  7C 7A F1 D6 */	mullw r3, r26, r30
/* 80356B70 00353750  7C 1A F9 D6 */	mullw r0, r26, r31
/* 80356B74 00353754  3B A0 30 39 */	li r29, 0x3039
/* 80356B78 00353758  7C 80 E8 14 */	addc r4, r0, r29
/* 80356B7C 0035375C  7C 05 1A 14 */	add r0, r5, r3
/* 80356B80 00353760  7C 60 F1 14 */	adde r3, r0, r30
/* 80356B84 00353764  38 A0 00 10 */	li r5, 0x10
/* 80356B88 00353768  4B FC C1 F1 */	bl __shr2i
/* 80356B8C 0035376C  7C C3 F9 D6 */	mullw r6, r3, r31
/* 80356B90 00353770  88 18 00 00 */	lbz r0, 0(r24)
/* 80356B94 00353774  7C A4 F8 16 */	mulhwu r5, r4, r31
/* 80356B98 00353778  7C C6 2A 14 */	add r6, r6, r5
/* 80356B9C 0035377C  7D 04 00 14 */	addc r8, r4, r0
/* 80356BA0 00353780  7F 87 07 34 */	extsh r7, r28
/* 80356BA4 00353784  7C A4 F1 D6 */	mullw r5, r4, r30
/* 80356BA8 00353788  7D 1B 39 AE */	stbx r8, r27, r7
/* 80356BAC 0035378C  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356BB0 00353790  7C 80 E8 14 */	addc r4, r0, r29
/* 80356BB4 00353794  7C 06 2A 14 */	add r0, r6, r5
/* 80356BB8 00353798  7C 60 F1 14 */	adde r3, r0, r30
/* 80356BBC 0035379C  38 A0 00 10 */	li r5, 0x10
/* 80356BC0 003537A0  4B FC C1 B9 */	bl __shr2i
/* 80356BC4 003537A4  3B 40 7F FF */	li r26, 0x7fff
/* 80356BC8 003537A8  7C 60 F0 38 */	and r0, r3, r30
/* 80356BCC 003537AC  7C 84 D0 38 */	and r4, r4, r26
/* 80356BD0 003537B0  7C A0 F9 D6 */	mullw r5, r0, r31
/* 80356BD4 003537B4  7C 64 F8 16 */	mulhwu r3, r4, r31
/* 80356BD8 003537B8  7C A5 1A 14 */	add r5, r5, r3
/* 80356BDC 003537BC  7C 64 F1 D6 */	mullw r3, r4, r30
/* 80356BE0 003537C0  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356BE4 003537C4  7C 80 E8 14 */	addc r4, r0, r29
/* 80356BE8 003537C8  7C 05 1A 14 */	add r0, r5, r3
/* 80356BEC 003537CC  7C 60 F1 14 */	adde r3, r0, r30
/* 80356BF0 003537D0  38 A0 00 10 */	li r5, 0x10
/* 80356BF4 003537D4  4B FC C1 85 */	bl __shr2i
/* 80356BF8 003537D8  7C C3 F9 D6 */	mullw r6, r3, r31
/* 80356BFC 003537DC  7C A4 F8 16 */	mulhwu r5, r4, r31
/* 80356C00 003537E0  39 3C 00 01 */	addi r9, r28, 1
/* 80356C04 003537E4  7D 29 07 34 */	extsh r9, r9
/* 80356C08 003537E8  7C 19 48 AE */	lbzx r0, r25, r9
/* 80356C0C 003537EC  7C C6 2A 14 */	add r6, r6, r5
/* 80356C10 003537F0  7C A4 F1 D6 */	mullw r5, r4, r30
/* 80356C14 003537F4  7C E4 00 14 */	addc r7, r4, r0
/* 80356C18 003537F8  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356C1C 003537FC  7C FB 49 AE */	stbx r7, r27, r9
/* 80356C20 00353800  7C 80 E8 14 */	addc r4, r0, r29
/* 80356C24 00353804  7C 06 2A 14 */	add r0, r6, r5
/* 80356C28 00353808  7C 60 F1 14 */	adde r3, r0, r30
/* 80356C2C 0035380C  38 A0 00 10 */	li r5, 0x10
/* 80356C30 00353810  4B FC C1 49 */	bl __shr2i
/* 80356C34 00353814  7C 60 F0 38 */	and r0, r3, r30
/* 80356C38 00353818  7C 84 D0 38 */	and r4, r4, r26
/* 80356C3C 0035381C  7C A0 F9 D6 */	mullw r5, r0, r31
/* 80356C40 00353820  7C 64 F8 16 */	mulhwu r3, r4, r31
/* 80356C44 00353824  7C A5 1A 14 */	add r5, r5, r3
/* 80356C48 00353828  7C 64 F1 D6 */	mullw r3, r4, r30
/* 80356C4C 0035382C  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356C50 00353830  7C 80 E8 14 */	addc r4, r0, r29
/* 80356C54 00353834  7C 05 1A 14 */	add r0, r5, r3
/* 80356C58 00353838  7C 60 F1 14 */	adde r3, r0, r30
/* 80356C5C 0035383C  38 A0 00 10 */	li r5, 0x10
/* 80356C60 00353840  4B FC C1 19 */	bl __shr2i
/* 80356C64 00353844  7C C3 F9 D6 */	mullw r6, r3, r31
/* 80356C68 00353848  7C A4 F8 16 */	mulhwu r5, r4, r31
/* 80356C6C 0035384C  39 3C 00 02 */	addi r9, r28, 2
/* 80356C70 00353850  7D 29 07 34 */	extsh r9, r9
/* 80356C74 00353854  7C 19 48 AE */	lbzx r0, r25, r9
/* 80356C78 00353858  7C C6 2A 14 */	add r6, r6, r5
/* 80356C7C 0035385C  7C A4 F1 D6 */	mullw r5, r4, r30
/* 80356C80 00353860  7C E4 00 14 */	addc r7, r4, r0
/* 80356C84 00353864  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356C88 00353868  7C FB 49 AE */	stbx r7, r27, r9
/* 80356C8C 0035386C  7C 80 E8 14 */	addc r4, r0, r29
/* 80356C90 00353870  7C 06 2A 14 */	add r0, r6, r5
/* 80356C94 00353874  7C 60 F1 14 */	adde r3, r0, r30
/* 80356C98 00353878  38 A0 00 10 */	li r5, 0x10
/* 80356C9C 0035387C  4B FC C0 DD */	bl __shr2i
/* 80356CA0 00353880  7C 60 F0 38 */	and r0, r3, r30
/* 80356CA4 00353884  7C 84 D0 38 */	and r4, r4, r26
/* 80356CA8 00353888  7C A0 F9 D6 */	mullw r5, r0, r31
/* 80356CAC 0035388C  7C 64 F8 16 */	mulhwu r3, r4, r31
/* 80356CB0 00353890  7C A5 1A 14 */	add r5, r5, r3
/* 80356CB4 00353894  7C 64 F1 D6 */	mullw r3, r4, r30
/* 80356CB8 00353898  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356CBC 0035389C  7C 80 E8 14 */	addc r4, r0, r29
/* 80356CC0 003538A0  7C 05 1A 14 */	add r0, r5, r3
/* 80356CC4 003538A4  7C 60 F1 14 */	adde r3, r0, r30
/* 80356CC8 003538A8  38 A0 00 10 */	li r5, 0x10
/* 80356CCC 003538AC  4B FC C0 AD */	bl __shr2i
/* 80356CD0 003538B0  7C C3 F9 D6 */	mullw r6, r3, r31
/* 80356CD4 003538B4  7C A4 F8 16 */	mulhwu r5, r4, r31
/* 80356CD8 003538B8  39 3C 00 03 */	addi r9, r28, 3
/* 80356CDC 003538BC  7D 29 07 34 */	extsh r9, r9
/* 80356CE0 003538C0  7C 19 48 AE */	lbzx r0, r25, r9
/* 80356CE4 003538C4  7C C6 2A 14 */	add r6, r6, r5
/* 80356CE8 003538C8  7C A4 F1 D6 */	mullw r5, r4, r30
/* 80356CEC 003538CC  7C E4 00 14 */	addc r7, r4, r0
/* 80356CF0 003538D0  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356CF4 003538D4  7C FB 49 AE */	stbx r7, r27, r9
/* 80356CF8 003538D8  7C 80 E8 14 */	addc r4, r0, r29
/* 80356CFC 003538DC  7C 06 2A 14 */	add r0, r6, r5
/* 80356D00 003538E0  7C 60 F1 14 */	adde r3, r0, r30
/* 80356D04 003538E4  38 A0 00 10 */	li r5, 0x10
/* 80356D08 003538E8  4B FC C0 71 */	bl __shr2i
/* 80356D0C 003538EC  7C 60 F0 38 */	and r0, r3, r30
/* 80356D10 003538F0  7C 84 D0 38 */	and r4, r4, r26
/* 80356D14 003538F4  7C A0 F9 D6 */	mullw r5, r0, r31
/* 80356D18 003538F8  7C 64 F8 16 */	mulhwu r3, r4, r31
/* 80356D1C 003538FC  7C A5 1A 14 */	add r5, r5, r3
/* 80356D20 00353900  7C 64 F1 D6 */	mullw r3, r4, r30
/* 80356D24 00353904  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356D28 00353908  7C 80 E8 14 */	addc r4, r0, r29
/* 80356D2C 0035390C  7C 05 1A 14 */	add r0, r5, r3
/* 80356D30 00353910  7C 60 F1 14 */	adde r3, r0, r30
/* 80356D34 00353914  38 A0 00 10 */	li r5, 0x10
/* 80356D38 00353918  4B FC C0 41 */	bl __shr2i
/* 80356D3C 0035391C  7C C3 F9 D6 */	mullw r6, r3, r31
/* 80356D40 00353920  7C A4 F8 16 */	mulhwu r5, r4, r31
/* 80356D44 00353924  39 3C 00 04 */	addi r9, r28, 4
/* 80356D48 00353928  7D 29 07 34 */	extsh r9, r9
/* 80356D4C 0035392C  7C 19 48 AE */	lbzx r0, r25, r9
/* 80356D50 00353930  7C C6 2A 14 */	add r6, r6, r5
/* 80356D54 00353934  7C A4 F1 D6 */	mullw r5, r4, r30
/* 80356D58 00353938  7C E4 00 14 */	addc r7, r4, r0
/* 80356D5C 0035393C  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356D60 00353940  7C FB 49 AE */	stbx r7, r27, r9
/* 80356D64 00353944  7C 80 E8 14 */	addc r4, r0, r29
/* 80356D68 00353948  7C 06 2A 14 */	add r0, r6, r5
/* 80356D6C 0035394C  7C 60 F1 14 */	adde r3, r0, r30
/* 80356D70 00353950  38 A0 00 10 */	li r5, 0x10
/* 80356D74 00353954  4B FC C0 05 */	bl __shr2i
/* 80356D78 00353958  7C 60 F0 38 */	and r0, r3, r30
/* 80356D7C 0035395C  7C 84 D0 38 */	and r4, r4, r26
/* 80356D80 00353960  7C A0 F9 D6 */	mullw r5, r0, r31
/* 80356D84 00353964  7C 64 F8 16 */	mulhwu r3, r4, r31
/* 80356D88 00353968  7C A5 1A 14 */	add r5, r5, r3
/* 80356D8C 0035396C  7C 64 F1 D6 */	mullw r3, r4, r30
/* 80356D90 00353970  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356D94 00353974  7C 80 E8 14 */	addc r4, r0, r29
/* 80356D98 00353978  7C 05 1A 14 */	add r0, r5, r3
/* 80356D9C 0035397C  7C 60 F1 14 */	adde r3, r0, r30
/* 80356DA0 00353980  38 A0 00 10 */	li r5, 0x10
/* 80356DA4 00353984  4B FC BF D5 */	bl __shr2i
/* 80356DA8 00353988  7C C3 F9 D6 */	mullw r6, r3, r31
/* 80356DAC 0035398C  7C A4 F8 16 */	mulhwu r5, r4, r31
/* 80356DB0 00353990  39 3C 00 05 */	addi r9, r28, 5
/* 80356DB4 00353994  7D 29 07 34 */	extsh r9, r9
/* 80356DB8 00353998  7C 19 48 AE */	lbzx r0, r25, r9
/* 80356DBC 0035399C  7C C6 2A 14 */	add r6, r6, r5
/* 80356DC0 003539A0  7C A4 F1 D6 */	mullw r5, r4, r30
/* 80356DC4 003539A4  7C E4 00 14 */	addc r7, r4, r0
/* 80356DC8 003539A8  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356DCC 003539AC  7C FB 49 AE */	stbx r7, r27, r9
/* 80356DD0 003539B0  7C 80 E8 14 */	addc r4, r0, r29
/* 80356DD4 003539B4  7C 06 2A 14 */	add r0, r6, r5
/* 80356DD8 003539B8  7C 60 F1 14 */	adde r3, r0, r30
/* 80356DDC 003539BC  38 A0 00 10 */	li r5, 0x10
/* 80356DE0 003539C0  4B FC BF 99 */	bl __shr2i
/* 80356DE4 003539C4  7C 60 F0 38 */	and r0, r3, r30
/* 80356DE8 003539C8  7C 84 D0 38 */	and r4, r4, r26
/* 80356DEC 003539CC  7C A0 F9 D6 */	mullw r5, r0, r31
/* 80356DF0 003539D0  7C 64 F8 16 */	mulhwu r3, r4, r31
/* 80356DF4 003539D4  7C A5 1A 14 */	add r5, r5, r3
/* 80356DF8 003539D8  7C 64 F1 D6 */	mullw r3, r4, r30
/* 80356DFC 003539DC  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356E00 003539E0  7C 80 E8 14 */	addc r4, r0, r29
/* 80356E04 003539E4  7C 05 1A 14 */	add r0, r5, r3
/* 80356E08 003539E8  7C 60 F1 14 */	adde r3, r0, r30
/* 80356E0C 003539EC  38 A0 00 10 */	li r5, 0x10
/* 80356E10 003539F0  4B FC BF 69 */	bl __shr2i
/* 80356E14 003539F4  7C C3 F9 D6 */	mullw r6, r3, r31
/* 80356E18 003539F8  7C A4 F8 16 */	mulhwu r5, r4, r31
/* 80356E1C 003539FC  39 3C 00 06 */	addi r9, r28, 6
/* 80356E20 00353A00  7D 29 07 34 */	extsh r9, r9
/* 80356E24 00353A04  7C 19 48 AE */	lbzx r0, r25, r9
/* 80356E28 00353A08  7C C6 2A 14 */	add r6, r6, r5
/* 80356E2C 00353A0C  7C A4 F1 D6 */	mullw r5, r4, r30
/* 80356E30 00353A10  7C E4 00 14 */	addc r7, r4, r0
/* 80356E34 00353A14  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356E38 00353A18  7C FB 49 AE */	stbx r7, r27, r9
/* 80356E3C 00353A1C  7C 80 E8 14 */	addc r4, r0, r29
/* 80356E40 00353A20  7C 06 2A 14 */	add r0, r6, r5
/* 80356E44 00353A24  7C 60 F1 14 */	adde r3, r0, r30
/* 80356E48 00353A28  38 A0 00 10 */	li r5, 0x10
/* 80356E4C 00353A2C  4B FC BF 2D */	bl __shr2i
/* 80356E50 00353A30  7C 60 F0 38 */	and r0, r3, r30
/* 80356E54 00353A34  7C 84 D0 38 */	and r4, r4, r26
/* 80356E58 00353A38  7C A0 F9 D6 */	mullw r5, r0, r31
/* 80356E5C 00353A3C  7C 64 F8 16 */	mulhwu r3, r4, r31
/* 80356E60 00353A40  7C A5 1A 14 */	add r5, r5, r3
/* 80356E64 00353A44  7C 64 F1 D6 */	mullw r3, r4, r30
/* 80356E68 00353A48  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356E6C 00353A4C  7C 80 E8 14 */	addc r4, r0, r29
/* 80356E70 00353A50  7C 05 1A 14 */	add r0, r5, r3
/* 80356E74 00353A54  7C 60 F1 14 */	adde r3, r0, r30
/* 80356E78 00353A58  38 A0 00 10 */	li r5, 0x10
/* 80356E7C 00353A5C  4B FC BE FD */	bl __shr2i
/* 80356E80 00353A60  7C C3 F9 D6 */	mullw r6, r3, r31
/* 80356E84 00353A64  7C A4 F8 16 */	mulhwu r5, r4, r31
/* 80356E88 00353A68  39 3C 00 07 */	addi r9, r28, 7
/* 80356E8C 00353A6C  7D 29 07 34 */	extsh r9, r9
/* 80356E90 00353A70  7C 19 48 AE */	lbzx r0, r25, r9
/* 80356E94 00353A74  7C C6 2A 14 */	add r6, r6, r5
/* 80356E98 00353A78  7C A4 F1 D6 */	mullw r5, r4, r30
/* 80356E9C 00353A7C  7C E4 00 14 */	addc r7, r4, r0
/* 80356EA0 00353A80  7C 04 F9 D6 */	mullw r0, r4, r31
/* 80356EA4 00353A84  7C FB 49 AE */	stbx r7, r27, r9
/* 80356EA8 00353A88  7C 80 E8 14 */	addc r4, r0, r29
/* 80356EAC 00353A8C  7C 06 2A 14 */	add r0, r6, r5
/* 80356EB0 00353A90  7C 60 F1 14 */	adde r3, r0, r30
/* 80356EB4 00353A94  38 A0 00 10 */	li r5, 0x10
/* 80356EB8 00353A98  4B FC BE C1 */	bl __shr2i
/* 80356EBC 00353A9C  7C 9A D0 38 */	and r26, r4, r26
/* 80356EC0 00353AA0  7C 7E F0 38 */	and r30, r3, r30
/* 80356EC4 00353AA4  3B 18 00 08 */	addi r24, r24, 8
/* 80356EC8 00353AA8  3B 9C 00 08 */	addi r28, r28, 8
lbl_80356ECC:
/* 80356ECC 00353AAC  7F 80 07 34 */	extsh r0, r28
/* 80356ED0 00353AB0  7C 00 B8 00 */	cmpw r0, r23
/* 80356ED4 00353AB4  41 80 FC 88 */	blt lbl_80356B5C
/* 80356ED8 00353AB8  48 00 02 18 */	b lbl_803570F0
lbl_80356EDC:
/* 80356EDC 00353ABC  3C 60 41 C6 */	lis r3, 0x41C64E6D@ha
/* 80356EE0 00353AC0  3B 23 4E 6D */	addi r25, r3, 0x41C64E6D@l
/* 80356EE4 00353AC4  48 00 00 80 */	b lbl_80356F64
lbl_80356EE8:
/* 80356EE8 00353AC8  7C BE C9 D6 */	mullw r5, r30, r25
/* 80356EEC 00353ACC  7C 7A C8 16 */	mulhwu r3, r26, r25
/* 80356EF0 00353AD0  3B 00 00 00 */	li r24, 0
/* 80356EF4 00353AD4  7C A5 1A 14 */	add r5, r5, r3
/* 80356EF8 00353AD8  7C 7A C1 D6 */	mullw r3, r26, r24
/* 80356EFC 00353ADC  7C 1A C9 D6 */	mullw r0, r26, r25
/* 80356F00 00353AE0  3A E0 30 39 */	li r23, 0x3039
/* 80356F04 00353AE4  7C 80 B8 14 */	addc r4, r0, r23
/* 80356F08 00353AE8  7C 05 1A 14 */	add r0, r5, r3
/* 80356F0C 00353AEC  7C 60 C1 14 */	adde r3, r0, r24
/* 80356F10 00353AF0  38 A0 00 10 */	li r5, 0x10
/* 80356F14 00353AF4  4B FC BE 65 */	bl __shr2i
/* 80356F18 00353AF8  7C C3 C9 D6 */	mullw r6, r3, r25
/* 80356F1C 00353AFC  88 1D 00 00 */	lbz r0, 0(r29)
/* 80356F20 00353B00  7C A4 C8 16 */	mulhwu r5, r4, r25
/* 80356F24 00353B04  7C C6 2A 14 */	add r6, r6, r5
/* 80356F28 00353B08  7D 04 00 14 */	addc r8, r4, r0
/* 80356F2C 00353B0C  7F 87 07 34 */	extsh r7, r28
/* 80356F30 00353B10  7C A4 C1 D6 */	mullw r5, r4, r24
/* 80356F34 00353B14  7D 1B 39 AE */	stbx r8, r27, r7
/* 80356F38 00353B18  7C 04 C9 D6 */	mullw r0, r4, r25
/* 80356F3C 00353B1C  7C 80 B8 14 */	addc r4, r0, r23
/* 80356F40 00353B20  7C 06 2A 14 */	add r0, r6, r5
/* 80356F44 00353B24  7C 60 C1 14 */	adde r3, r0, r24
/* 80356F48 00353B28  38 A0 00 10 */	li r5, 0x10
/* 80356F4C 00353B2C  4B FC BE 2D */	bl __shr2i
/* 80356F50 00353B30  38 00 7F FF */	li r0, 0x7fff
/* 80356F54 00353B34  7C 9A 00 38 */	and r26, r4, r0
/* 80356F58 00353B38  7C 7E C0 38 */	and r30, r3, r24
/* 80356F5C 00353B3C  3B BD 00 01 */	addi r29, r29, 1
/* 80356F60 00353B40  3B 9C 00 01 */	addi r28, r28, 1
lbl_80356F64:
/* 80356F64 00353B44  7F 80 07 34 */	extsh r0, r28
/* 80356F68 00353B48  2C 00 00 0C */	cmpwi r0, 0xc
/* 80356F6C 00353B4C  41 80 FF 7C */	blt lbl_80356EE8
/* 80356F70 00353B50  38 60 00 00 */	li r3, 0
/* 80356F74 00353B54  4B FF 21 AD */	bl __OSUnlockSramEx
/* 80356F78 00353B58  92 5B 00 1C */	stw r18, 0x1c(r27)
/* 80356F7C 00353B5C  3A 40 00 00 */	li r18, 0
/* 80356F80 00353B60  38 7B 00 00 */	addi r3, r27, 0
/* 80356F84 00353B64  92 BB 00 10 */	stw r21, 0x10(r27)
/* 80356F88 00353B68  38 BB 01 FC */	addi r5, r27, 0x1fc
/* 80356F8C 00353B6C  38 DB 01 FE */	addi r6, r27, 0x1fe
/* 80356F90 00353B70  92 9B 00 0C */	stw r20, 0xc(r27)
/* 80356F94 00353B74  38 80 01 FC */	li r4, 0x1fc
/* 80356F98 00353B78  B2 5B 00 20 */	sth r18, 0x20(r27)
/* 80356F9C 00353B7C  80 E1 00 18 */	lwz r7, 0x18(r1)
/* 80356FA0 00353B80  A0 07 00 08 */	lhz r0, 8(r7)
/* 80356FA4 00353B84  B0 1B 00 22 */	sth r0, 0x22(r27)
/* 80356FA8 00353B88  4B FF E0 79 */	bl __CARDCheckSum
/* 80356FAC 00353B8C  48 00 00 4C */	b lbl_80356FF8
lbl_80356FB0:
/* 80356FB0 00353B90  80 81 00 18 */	lwz r4, 0x18(r1)
/* 80356FB4 00353B94  7E 43 07 34 */	extsh r3, r18
/* 80356FB8 00353B98  38 03 00 01 */	addi r0, r3, 1
/* 80356FBC 00353B9C  80 64 00 80 */	lwz r3, 0x80(r4)
/* 80356FC0 00353BA0  54 00 68 24 */	slwi r0, r0, 0xd
/* 80356FC4 00353BA4  38 80 00 FF */	li r4, 0xff
/* 80356FC8 00353BA8  7E 83 02 14 */	add r20, r3, r0
/* 80356FCC 00353BAC  38 74 00 00 */	addi r3, r20, 0
/* 80356FD0 00353BB0  38 A0 20 00 */	li r5, 0x2000
/* 80356FD4 00353BB4  4B CA C1 2D */	bl memset
/* 80356FD8 00353BB8  38 94 1F C0 */	addi r4, r20, 0x1fc0
/* 80356FDC 00353BBC  B2 54 1F FA */	sth r18, 0x1ffa(r20)
/* 80356FE0 00353BC0  38 74 00 00 */	addi r3, r20, 0
/* 80356FE4 00353BC4  38 A4 00 3C */	addi r5, r4, 0x3c
/* 80356FE8 00353BC8  38 C4 00 3E */	addi r6, r4, 0x3e
/* 80356FEC 00353BCC  38 80 1F FC */	li r4, 0x1ffc
/* 80356FF0 00353BD0  4B FF E0 31 */	bl __CARDCheckSum
/* 80356FF4 00353BD4  3A 52 00 01 */	addi r18, r18, 1
lbl_80356FF8:
/* 80356FF8 00353BD8  7E 40 07 34 */	extsh r0, r18
/* 80356FFC 00353BDC  2C 00 00 02 */	cmpwi r0, 2
/* 80357000 00353BE0  41 80 FF B0 */	blt lbl_80356FB0
/* 80357004 00353BE4  3A 40 00 00 */	li r18, 0
/* 80357008 00353BE8  48 00 00 60 */	b lbl_80357068
lbl_8035700C:
/* 8035700C 00353BEC  80 81 00 18 */	lwz r4, 0x18(r1)
/* 80357010 00353BF0  7E 43 07 34 */	extsh r3, r18
/* 80357014 00353BF4  38 03 00 03 */	addi r0, r3, 3
/* 80357018 00353BF8  80 64 00 80 */	lwz r3, 0x80(r4)
/* 8035701C 00353BFC  54 00 68 24 */	slwi r0, r0, 0xd
/* 80357020 00353C00  38 80 00 00 */	li r4, 0
/* 80357024 00353C04  7E 83 02 14 */	add r20, r3, r0
/* 80357028 00353C08  38 74 00 00 */	addi r3, r20, 0
/* 8035702C 00353C0C  38 A0 20 00 */	li r5, 0x2000
/* 80357030 00353C10  4B CA C0 D1 */	bl memset
/* 80357034 00353C14  B2 54 00 04 */	sth r18, 4(r20)
/* 80357038 00353C18  38 00 00 04 */	li r0, 4
/* 8035703C 00353C1C  38 B4 00 00 */	addi r5, r20, 0
/* 80357040 00353C20  80 81 00 18 */	lwz r4, 0x18(r1)
/* 80357044 00353C24  38 74 00 04 */	addi r3, r20, 4
/* 80357048 00353C28  38 D4 00 02 */	addi r6, r20, 2
/* 8035704C 00353C2C  A0 E4 00 10 */	lhz r7, 0x10(r4)
/* 80357050 00353C30  38 80 1F FC */	li r4, 0x1ffc
/* 80357054 00353C34  38 E7 FF FB */	addi r7, r7, -5
/* 80357058 00353C38  B0 F4 00 06 */	sth r7, 6(r20)
/* 8035705C 00353C3C  B0 14 00 08 */	sth r0, 8(r20)
/* 80357060 00353C40  4B FF DF C1 */	bl __CARDCheckSum
/* 80357064 00353C44  3A 52 00 01 */	addi r18, r18, 1
lbl_80357068:
/* 80357068 00353C48  7E 40 07 34 */	extsh r0, r18
/* 8035706C 00353C4C  2C 00 00 02 */	cmpwi r0, 2
/* 80357070 00353C50  41 80 FF 9C */	blt lbl_8035700C
/* 80357074 00353C54  28 13 00 00 */	cmplwi r19, 0
/* 80357078 00353C58  41 82 00 0C */	beq lbl_80357084
/* 8035707C 00353C5C  7E 60 9B 78 */	mr r0, r19
/* 80357080 00353C60  48 00 00 0C */	b lbl_8035708C
lbl_80357084:
/* 80357084 00353C64  3C 60 80 35 */	lis r3, __CARDDefaultApiCallback@ha
/* 80357088 00353C68  38 03 22 70 */	addi r0, r3, __CARDDefaultApiCallback@l
lbl_8035708C:
/* 8035708C 00353C6C  80 A1 00 18 */	lwz r5, 0x18(r1)
/* 80357090 00353C70  3C 60 00 01 */	lis r3, 0x0000A000@ha
/* 80357094 00353C74  38 83 A0 00 */	addi r4, r3, 0x0000A000@l
/* 80357098 00353C78  90 05 00 D0 */	stw r0, 0xd0(r5)
/* 8035709C 00353C7C  80 61 00 18 */	lwz r3, 0x18(r1)
/* 803570A0 00353C80  80 63 00 80 */	lwz r3, 0x80(r3)
/* 803570A4 00353C84  4B FE D7 9D */	bl DCStoreRange
/* 803570A8 00353C88  80 81 00 18 */	lwz r4, 0x18(r1)
/* 803570AC 00353C8C  38 00 00 00 */	li r0, 0
/* 803570B0 00353C90  3C 60 80 35 */	lis r3, FormatCallback@ha
/* 803570B4 00353C94  90 04 00 24 */	stw r0, 0x24(r4)
/* 803570B8 00353C98  38 A3 69 70 */	addi r5, r3, FormatCallback@l
/* 803570BC 00353C9C  38 76 00 00 */	addi r3, r22, 0
/* 803570C0 00353CA0  80 C1 00 18 */	lwz r6, 0x18(r1)
/* 803570C4 00353CA4  80 86 00 0C */	lwz r4, 0xc(r6)
/* 803570C8 00353CA8  80 06 00 24 */	lwz r0, 0x24(r6)
/* 803570CC 00353CAC  7C 84 01 D6 */	mullw r4, r4, r0
/* 803570D0 00353CB0  4B FF BF 35 */	bl __CARDEraseSector
/* 803570D4 00353CB4  7C 72 1B 79 */	or. r18, r3, r3
/* 803570D8 00353CB8  40 80 00 10 */	bge lbl_803570E8
/* 803570DC 00353CBC  80 61 00 18 */	lwz r3, 0x18(r1)
/* 803570E0 00353CC0  7E 44 93 78 */	mr r4, r18
/* 803570E4 00353CC4  4B FF C1 8D */	bl __CARDPutControlBlock
lbl_803570E8:
/* 803570E8 00353CC8  7E 43 93 78 */	mr r3, r18
/* 803570EC 00353CCC  48 00 00 0C */	b lbl_803570F8
lbl_803570F0:
/* 803570F0 00353CD0  7F B9 02 14 */	add r29, r25, r0
/* 803570F4 00353CD4  4B FF FD E8 */	b lbl_80356EDC
lbl_803570F8:
/* 803570F8 00353CD8  BA 41 00 20 */	lmw r18, 0x20(r1)
/* 803570FC 00353CDC  80 01 00 5C */	lwz r0, 0x5c(r1)
/* 80357100 00353CE0  38 21 00 58 */	addi r1, r1, 0x58
/* 80357104 00353CE4  7C 08 03 A6 */	mtlr r0
/* 80357108 00353CE8  4E 80 00 20 */	blr 

.global CARDFormatAsync
CARDFormatAsync:
/* 8035710C 00353CEC  7C 08 02 A6 */	mflr r0
/* 80357110 00353CF0  90 01 00 04 */	stw r0, 4(r1)
/* 80357114 00353CF4  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 80357118 00353CF8  93 E1 00 14 */	stw r31, 0x14(r1)
/* 8035711C 00353CFC  3B E4 00 00 */	addi r31, r4, 0
/* 80357120 00353D00  93 C1 00 10 */	stw r30, 0x10(r1)
/* 80357124 00353D04  3B C3 00 00 */	addi r30, r3, 0
/* 80357128 00353D08  4B FF 01 E5 */	bl OSGetFontEncode
/* 8035712C 00353D0C  38 83 00 00 */	addi r4, r3, 0
/* 80357130 00353D10  38 7E 00 00 */	addi r3, r30, 0
/* 80357134 00353D14  38 BF 00 00 */	addi r5, r31, 0
/* 80357138 00353D18  4B FF F9 7D */	bl __CARDFormatRegionAsync
/* 8035713C 00353D1C  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 80357140 00353D20  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 80357144 00353D24  83 C1 00 10 */	lwz r30, 0x10(r1)
/* 80357148 00353D28  38 21 00 18 */	addi r1, r1, 0x18
/* 8035714C 00353D2C  7C 08 03 A6 */	mtlr r0
/* 80357150 00353D30  4E 80 00 20 */	blr 
