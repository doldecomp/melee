.include "macros.inc"

.section .text  # 0x80005940 - 0x803B7240

.global CARDProbe
CARDProbe:
/* 80355F5C 00352B3C  7C 08 02 A6 */	mflr r0
/* 80355F60 00352B40  3C 80 80 00 */	lis r4, 0x800030E3@ha
/* 80355F64 00352B44  90 01 00 04 */	stw r0, 4(r1)
/* 80355F68 00352B48  94 21 FF F8 */	stwu r1, -8(r1)
/* 80355F6C 00352B4C  88 04 30 E3 */	lbz r0, 0x800030E3@l(r4)
/* 80355F70 00352B50  54 00 06 31 */	rlwinm. r0, r0, 0, 0x18, 0x18
/* 80355F74 00352B54  41 82 00 0C */	beq lbl_80355F80
/* 80355F78 00352B58  38 60 00 00 */	li r3, 0
/* 80355F7C 00352B5C  48 00 00 08 */	b lbl_80355F84
lbl_80355F80:
/* 80355F80 00352B60  4B FF 04 0D */	bl EXIProbe
lbl_80355F84:
/* 80355F84 00352B64  80 01 00 0C */	lwz r0, 0xc(r1)
/* 80355F88 00352B68  38 21 00 08 */	addi r1, r1, 8
/* 80355F8C 00352B6C  7C 08 03 A6 */	mtlr r0
/* 80355F90 00352B70  4E 80 00 20 */	blr 

.global CARDProbeEx
CARDProbeEx:
/* 80355F94 00352B74  7C 08 02 A6 */	mflr r0
/* 80355F98 00352B78  90 01 00 04 */	stw r0, 4(r1)
/* 80355F9C 00352B7C  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 80355FA0 00352B80  BF 61 00 1C */	stmw r27, 0x1c(r1)
/* 80355FA4 00352B84  7C 7B 1B 79 */	or. r27, r3, r3
/* 80355FA8 00352B88  3B A4 00 00 */	addi r29, r4, 0
/* 80355FAC 00352B8C  3B C5 00 00 */	addi r30, r5, 0
/* 80355FB0 00352B90  41 80 00 0C */	blt lbl_80355FBC
/* 80355FB4 00352B94  2C 1B 00 02 */	cmpwi r27, 2
/* 80355FB8 00352B98  41 80 00 0C */	blt lbl_80355FC4
lbl_80355FBC:
/* 80355FBC 00352B9C  38 60 FF 80 */	li r3, -128
/* 80355FC0 00352BA0  48 00 01 5C */	b lbl_8035611C
lbl_80355FC4:
/* 80355FC4 00352BA4  3C 60 80 00 */	lis r3, 0x800030E3@ha
/* 80355FC8 00352BA8  88 03 30 E3 */	lbz r0, 0x800030E3@l(r3)
/* 80355FCC 00352BAC  54 00 06 31 */	rlwinm. r0, r0, 0, 0x18, 0x18
/* 80355FD0 00352BB0  41 82 00 0C */	beq lbl_80355FDC
/* 80355FD4 00352BB4  38 60 FF FD */	li r3, -3
/* 80355FD8 00352BB8  48 00 01 44 */	b lbl_8035611C
lbl_80355FDC:
/* 80355FDC 00352BBC  1C 9B 01 10 */	mulli r4, r27, 0x110
/* 80355FE0 00352BC0  3C 60 80 4B */	lis r3, lbl_804A8B38@ha
/* 80355FE4 00352BC4  38 03 8B 38 */	addi r0, r3, lbl_804A8B38@l
/* 80355FE8 00352BC8  7F 80 22 14 */	add r28, r0, r4
/* 80355FEC 00352BCC  4B FF 13 79 */	bl OSDisableInterrupts
/* 80355FF0 00352BD0  3B E3 00 00 */	addi r31, r3, 0
/* 80355FF4 00352BD4  38 7B 00 00 */	addi r3, r27, 0
/* 80355FF8 00352BD8  4B FF 04 15 */	bl EXIProbeEx
/* 80355FFC 00352BDC  2C 03 FF FF */	cmpwi r3, -1
/* 80356000 00352BE0  40 82 00 0C */	bne lbl_8035600C
/* 80356004 00352BE4  3B 80 FF FD */	li r28, -3
/* 80356008 00352BE8  48 00 01 08 */	b lbl_80356110
lbl_8035600C:
/* 8035600C 00352BEC  2C 03 00 00 */	cmpwi r3, 0
/* 80356010 00352BF0  40 82 00 0C */	bne lbl_8035601C
/* 80356014 00352BF4  3B 80 FF FF */	li r28, -1
/* 80356018 00352BF8  48 00 00 F8 */	b lbl_80356110
lbl_8035601C:
/* 8035601C 00352BFC  80 1C 00 00 */	lwz r0, 0(r28)
/* 80356020 00352C00  2C 00 00 00 */	cmpwi r0, 0
/* 80356024 00352C04  41 82 00 40 */	beq lbl_80356064
/* 80356028 00352C08  80 1C 00 24 */	lwz r0, 0x24(r28)
/* 8035602C 00352C0C  2C 00 00 01 */	cmpwi r0, 1
/* 80356030 00352C10  40 80 00 0C */	bge lbl_8035603C
/* 80356034 00352C14  3B 80 FF FF */	li r28, -1
/* 80356038 00352C18  48 00 00 D8 */	b lbl_80356110
lbl_8035603C:
/* 8035603C 00352C1C  28 1D 00 00 */	cmplwi r29, 0
/* 80356040 00352C20  41 82 00 0C */	beq lbl_8035604C
/* 80356044 00352C24  A0 1C 00 08 */	lhz r0, 8(r28)
/* 80356048 00352C28  90 1D 00 00 */	stw r0, 0(r29)
lbl_8035604C:
/* 8035604C 00352C2C  28 1E 00 00 */	cmplwi r30, 0
/* 80356050 00352C30  41 82 00 0C */	beq lbl_8035605C
/* 80356054 00352C34  80 1C 00 0C */	lwz r0, 0xc(r28)
/* 80356058 00352C38  90 1E 00 00 */	stw r0, 0(r30)
lbl_8035605C:
/* 8035605C 00352C3C  3B 80 00 00 */	li r28, 0
/* 80356060 00352C40  48 00 00 B0 */	b lbl_80356110
lbl_80356064:
/* 80356064 00352C44  7F 63 DB 78 */	mr r3, r27
/* 80356068 00352C48  4B FF 0E E9 */	bl EXIGetState
/* 8035606C 00352C4C  54 60 07 39 */	rlwinm. r0, r3, 0, 0x1c, 0x1c
/* 80356070 00352C50  41 82 00 0C */	beq lbl_8035607C
/* 80356074 00352C54  3B 80 FF FE */	li r28, -2
/* 80356078 00352C58  48 00 00 98 */	b lbl_80356110
lbl_8035607C:
/* 8035607C 00352C5C  38 7B 00 00 */	addi r3, r27, 0
/* 80356080 00352C60  38 A1 00 14 */	addi r5, r1, 0x14
/* 80356084 00352C64  38 80 00 00 */	li r4, 0
/* 80356088 00352C68  4B FF 0F 09 */	bl EXIGetID
/* 8035608C 00352C6C  2C 03 00 00 */	cmpwi r3, 0
/* 80356090 00352C70  40 82 00 0C */	bne lbl_8035609C
/* 80356094 00352C74  3B 80 FF FF */	li r28, -1
/* 80356098 00352C78  48 00 00 78 */	b lbl_80356110
lbl_8035609C:
/* 8035609C 00352C7C  80 61 00 14 */	lwz r3, 0x14(r1)
/* 803560A0 00352C80  3C 03 80 00 */	addis r0, r3, 0x8000
/* 803560A4 00352C84  28 00 00 04 */	cmplwi r0, 4
/* 803560A8 00352C88  40 82 00 10 */	bne lbl_803560B8
/* 803560AC 00352C8C  A0 0D A5 C0 */	lhz r0, lbl_804D5C60@sda21(r13)
/* 803560B0 00352C90  28 00 FF FF */	cmplwi r0, 0xffff
/* 803560B4 00352C94  40 82 00 18 */	bne lbl_803560CC
lbl_803560B8:
/* 803560B8 00352C98  80 61 00 14 */	lwz r3, 0x14(r1)
/* 803560BC 00352C9C  54 60 00 1F */	rlwinm. r0, r3, 0, 0, 0xf
/* 803560C0 00352CA0  40 82 00 4C */	bne lbl_8035610C
/* 803560C4 00352CA4  54 60 07 BF */	clrlwi. r0, r3, 0x1e
/* 803560C8 00352CA8  40 82 00 44 */	bne lbl_8035610C
lbl_803560CC:
/* 803560CC 00352CAC  28 1D 00 00 */	cmplwi r29, 0
/* 803560D0 00352CB0  41 82 00 10 */	beq lbl_803560E0
/* 803560D4 00352CB4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803560D8 00352CB8  54 00 06 3A */	rlwinm r0, r0, 0, 0x18, 0x1d
/* 803560DC 00352CBC  90 1D 00 00 */	stw r0, 0(r29)
lbl_803560E0:
/* 803560E0 00352CC0  28 1E 00 00 */	cmplwi r30, 0
/* 803560E4 00352CC4  41 82 00 20 */	beq lbl_80356104
/* 803560E8 00352CC8  80 81 00 14 */	lwz r4, 0x14(r1)
/* 803560EC 00352CCC  3C 60 80 40 */	lis r3, lbl_80403160@ha
/* 803560F0 00352CD0  38 03 31 60 */	addi r0, r3, lbl_80403160@l
/* 803560F4 00352CD4  54 83 BE FA */	rlwinm r3, r4, 0x17, 0x1b, 0x1d
/* 803560F8 00352CD8  7C 60 1A 14 */	add r3, r0, r3
/* 803560FC 00352CDC  80 03 00 00 */	lwz r0, 0(r3)
/* 80356100 00352CE0  90 1E 00 00 */	stw r0, 0(r30)
lbl_80356104:
/* 80356104 00352CE4  3B 80 00 00 */	li r28, 0
/* 80356108 00352CE8  48 00 00 08 */	b lbl_80356110
lbl_8035610C:
/* 8035610C 00352CEC  3B 80 FF FE */	li r28, -2
lbl_80356110:
/* 80356110 00352CF0  7F E3 FB 78 */	mr r3, r31
/* 80356114 00352CF4  4B FF 12 79 */	bl OSRestoreInterrupts
/* 80356118 00352CF8  7F 83 E3 78 */	mr r3, r28
lbl_8035611C:
/* 8035611C 00352CFC  BB 61 00 1C */	lmw r27, 0x1c(r1)
/* 80356120 00352D00  80 01 00 34 */	lwz r0, 0x34(r1)
/* 80356124 00352D04  38 21 00 30 */	addi r1, r1, 0x30
/* 80356128 00352D08  7C 08 03 A6 */	mtlr r0
/* 8035612C 00352D0C  4E 80 00 20 */	blr 

.global DoMount
DoMount:
/* 80356130 00352D10  7C 08 02 A6 */	mflr r0
/* 80356134 00352D14  90 01 00 04 */	stw r0, 4(r1)
/* 80356138 00352D18  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 8035613C 00352D1C  93 E1 00 2C */	stw r31, 0x2c(r1)
/* 80356140 00352D20  93 C1 00 28 */	stw r30, 0x28(r1)
/* 80356144 00352D24  93 A1 00 24 */	stw r29, 0x24(r1)
/* 80356148 00352D28  3B A3 00 00 */	addi r29, r3, 0
/* 8035614C 00352D2C  1C 9D 01 10 */	mulli r4, r29, 0x110
/* 80356150 00352D30  93 81 00 20 */	stw r28, 0x20(r1)
/* 80356154 00352D34  3C 60 80 4B */	lis r3, lbl_804A8B38@ha
/* 80356158 00352D38  38 03 8B 38 */	addi r0, r3, lbl_804A8B38@l
/* 8035615C 00352D3C  7C 60 22 14 */	add r3, r0, r4
/* 80356160 00352D40  80 03 00 24 */	lwz r0, 0x24(r3)
/* 80356164 00352D44  3B E3 00 00 */	addi r31, r3, 0
/* 80356168 00352D48  2C 00 00 00 */	cmpwi r0, 0
/* 8035616C 00352D4C  40 82 02 EC */	bne lbl_80356458
/* 80356170 00352D50  38 7D 00 00 */	addi r3, r29, 0
/* 80356174 00352D54  38 A1 00 18 */	addi r5, r1, 0x18
/* 80356178 00352D58  38 80 00 00 */	li r4, 0
/* 8035617C 00352D5C  4B FF 0E 15 */	bl EXIGetID
/* 80356180 00352D60  2C 03 00 00 */	cmpwi r3, 0
/* 80356184 00352D64  40 82 00 0C */	bne lbl_80356190
/* 80356188 00352D68  3B C0 FF FD */	li r30, -3
/* 8035618C 00352D6C  48 00 00 40 */	b lbl_803561CC
lbl_80356190:
/* 80356190 00352D70  80 61 00 18 */	lwz r3, 0x18(r1)
/* 80356194 00352D74  3C 03 80 00 */	addis r0, r3, 0x8000
/* 80356198 00352D78  28 00 00 04 */	cmplwi r0, 4
/* 8035619C 00352D7C  40 82 00 10 */	bne lbl_803561AC
/* 803561A0 00352D80  A0 0D A5 C0 */	lhz r0, lbl_804D5C60@sda21(r13)
/* 803561A4 00352D84  28 00 FF FF */	cmplwi r0, 0xffff
/* 803561A8 00352D88  40 82 00 18 */	bne lbl_803561C0
lbl_803561AC:
/* 803561AC 00352D8C  80 61 00 18 */	lwz r3, 0x18(r1)
/* 803561B0 00352D90  54 60 00 1F */	rlwinm. r0, r3, 0, 0, 0xf
/* 803561B4 00352D94  40 82 00 14 */	bne lbl_803561C8
/* 803561B8 00352D98  54 60 07 BF */	clrlwi. r0, r3, 0x1e
/* 803561BC 00352D9C  40 82 00 0C */	bne lbl_803561C8
lbl_803561C0:
/* 803561C0 00352DA0  3B C0 00 00 */	li r30, 0
/* 803561C4 00352DA4  48 00 00 08 */	b lbl_803561CC
lbl_803561C8:
/* 803561C8 00352DA8  3B C0 FF FE */	li r30, -2
lbl_803561CC:
/* 803561CC 00352DAC  2C 1E 00 00 */	cmpwi r30, 0
/* 803561D0 00352DB0  41 80 03 64 */	blt lbl_80356534
/* 803561D4 00352DB4  80 01 00 18 */	lwz r0, 0x18(r1)
/* 803561D8 00352DB8  3C 80 80 40 */	lis r4, lbl_80403160@ha
/* 803561DC 00352DBC  3C 60 80 40 */	lis r3, lbl_80403180@ha
/* 803561E0 00352DC0  90 1F 01 08 */	stw r0, 0x108(r31)
/* 803561E4 00352DC4  38 03 31 80 */	addi r0, r3, lbl_80403180@l
/* 803561E8 00352DC8  38 84 31 60 */	addi r4, r4, lbl_80403160@l
/* 803561EC 00352DCC  80 61 00 18 */	lwz r3, 0x18(r1)
/* 803561F0 00352DD0  54 63 06 3A */	rlwinm r3, r3, 0, 0x18, 0x1d
/* 803561F4 00352DD4  B0 7F 00 08 */	sth r3, 8(r31)
/* 803561F8 00352DD8  80 61 00 18 */	lwz r3, 0x18(r1)
/* 803561FC 00352DDC  54 63 BE FA */	rlwinm r3, r3, 0x17, 0x1b, 0x1d
/* 80356200 00352DE0  7C 64 1A 14 */	add r3, r4, r3
/* 80356204 00352DE4  80 63 00 00 */	lwz r3, 0(r3)
/* 80356208 00352DE8  90 7F 00 0C */	stw r3, 0xc(r31)
/* 8035620C 00352DEC  A0 9F 00 08 */	lhz r4, 8(r31)
/* 80356210 00352DF0  80 7F 00 0C */	lwz r3, 0xc(r31)
/* 80356214 00352DF4  54 84 A0 16 */	slwi r4, r4, 0x14
/* 80356218 00352DF8  7C 84 1E 70 */	srawi r4, r4, 3
/* 8035621C 00352DFC  7C 84 01 94 */	addze r4, r4
/* 80356220 00352E00  7C 64 1B D6 */	divw r3, r4, r3
/* 80356224 00352E04  B0 7F 00 10 */	sth r3, 0x10(r31)
/* 80356228 00352E08  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8035622C 00352E0C  54 63 D6 FA */	rlwinm r3, r3, 0x1a, 0x1b, 0x1d
/* 80356230 00352E10  7C 60 1A 14 */	add r3, r0, r3
/* 80356234 00352E14  80 03 00 00 */	lwz r0, 0(r3)
/* 80356238 00352E18  90 1F 00 14 */	stw r0, 0x14(r31)
/* 8035623C 00352E1C  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 80356240 00352E20  2C 00 00 00 */	cmpwi r0, 0
/* 80356244 00352E24  41 82 00 10 */	beq lbl_80356254
/* 80356248 00352E28  A0 1F 00 10 */	lhz r0, 0x10(r31)
/* 8035624C 00352E2C  28 00 00 08 */	cmplwi r0, 8
/* 80356250 00352E30  40 80 00 0C */	bge lbl_8035625C
lbl_80356254:
/* 80356254 00352E34  3B C0 FF FE */	li r30, -2
/* 80356258 00352E38  48 00 02 DC */	b lbl_80356534
lbl_8035625C:
/* 8035625C 00352E3C  7F A3 EB 78 */	mr r3, r29
/* 80356260 00352E40  4B FF C5 15 */	bl __CARDClearStatus
/* 80356264 00352E44  7C 7E 1B 79 */	or. r30, r3, r3
/* 80356268 00352E48  41 80 02 CC */	blt lbl_80356534
/* 8035626C 00352E4C  38 7D 00 00 */	addi r3, r29, 0
/* 80356270 00352E50  38 81 00 14 */	addi r4, r1, 0x14
/* 80356274 00352E54  4B FF C4 11 */	bl __CARDReadStatus
/* 80356278 00352E58  7C 7E 1B 79 */	or. r30, r3, r3
/* 8035627C 00352E5C  41 80 02 B8 */	blt lbl_80356534
/* 80356280 00352E60  7F A3 EB 78 */	mr r3, r29
/* 80356284 00352E64  4B FF 01 09 */	bl EXIProbe
/* 80356288 00352E68  2C 03 00 00 */	cmpwi r3, 0
/* 8035628C 00352E6C  40 82 00 0C */	bne lbl_80356298
/* 80356290 00352E70  3B C0 FF FD */	li r30, -3
/* 80356294 00352E74  48 00 02 A0 */	b lbl_80356534
lbl_80356298:
/* 80356298 00352E78  88 01 00 14 */	lbz r0, 0x14(r1)
/* 8035629C 00352E7C  54 00 06 73 */	rlwinm. r0, r0, 0, 0x19, 0x19
/* 803562A0 00352E80  40 82 01 14 */	bne lbl_803563B4
/* 803562A4 00352E84  38 7D 00 00 */	addi r3, r29, 0
/* 803562A8 00352E88  38 9F 00 18 */	addi r4, r31, 0x18
/* 803562AC 00352E8C  4B FF D5 A5 */	bl __CARDUnlock
/* 803562B0 00352E90  7C 7E 1B 79 */	or. r30, r3, r3
/* 803562B4 00352E94  41 80 02 80 */	blt lbl_80356534
/* 803562B8 00352E98  4B FF 2A E1 */	bl __OSLockSramEx
/* 803562BC 00352E9C  1C 1D 00 0C */	mulli r0, r29, 0xc
/* 803562C0 00352EA0  7C 83 02 14 */	add r4, r3, r0
/* 803562C4 00352EA4  88 1F 00 18 */	lbz r0, 0x18(r31)
/* 803562C8 00352EA8  38 BF 00 18 */	addi r5, r31, 0x18
/* 803562CC 00352EAC  98 04 00 00 */	stb r0, 0(r4)
/* 803562D0 00352EB0  39 05 00 02 */	addi r8, r5, 2
/* 803562D4 00352EB4  39 25 00 03 */	addi r9, r5, 3
/* 803562D8 00352EB8  88 FF 00 18 */	lbz r7, 0x18(r31)
/* 803562DC 00352EBC  39 45 00 04 */	addi r10, r5, 4
/* 803562E0 00352EC0  88 1F 00 19 */	lbz r0, 0x19(r31)
/* 803562E4 00352EC4  39 65 00 05 */	addi r11, r5, 5
/* 803562E8 00352EC8  39 85 00 06 */	addi r12, r5, 6
/* 803562EC 00352ECC  98 04 00 01 */	stb r0, 1(r4)
/* 803562F0 00352ED0  3B 85 00 07 */	addi r28, r5, 7
/* 803562F4 00352ED4  38 A0 00 08 */	li r5, 8
/* 803562F8 00352ED8  88 1F 00 19 */	lbz r0, 0x19(r31)
/* 803562FC 00352EDC  88 C8 00 00 */	lbz r6, 0(r8)
/* 80356300 00352EE0  7C 07 02 14 */	add r0, r7, r0
/* 80356304 00352EE4  98 C4 00 02 */	stb r6, 2(r4)
/* 80356308 00352EE8  88 E8 00 00 */	lbz r7, 0(r8)
/* 8035630C 00352EEC  88 C9 00 00 */	lbz r6, 0(r9)
/* 80356310 00352EF0  7C 00 3A 14 */	add r0, r0, r7
/* 80356314 00352EF4  98 C4 00 03 */	stb r6, 3(r4)
/* 80356318 00352EF8  88 E9 00 00 */	lbz r7, 0(r9)
/* 8035631C 00352EFC  88 CA 00 00 */	lbz r6, 0(r10)
/* 80356320 00352F00  7C 00 3A 14 */	add r0, r0, r7
/* 80356324 00352F04  98 C4 00 04 */	stb r6, 4(r4)
/* 80356328 00352F08  88 EA 00 00 */	lbz r7, 0(r10)
/* 8035632C 00352F0C  88 CB 00 00 */	lbz r6, 0(r11)
/* 80356330 00352F10  7C 00 3A 14 */	add r0, r0, r7
/* 80356334 00352F14  98 C4 00 05 */	stb r6, 5(r4)
/* 80356338 00352F18  88 EB 00 00 */	lbz r7, 0(r11)
/* 8035633C 00352F1C  88 CC 00 00 */	lbz r6, 0(r12)
/* 80356340 00352F20  7C 00 3A 14 */	add r0, r0, r7
/* 80356344 00352F24  98 C4 00 06 */	stb r6, 6(r4)
/* 80356348 00352F28  88 EC 00 00 */	lbz r7, 0(r12)
/* 8035634C 00352F2C  88 DC 00 00 */	lbz r6, 0(r28)
/* 80356350 00352F30  7C 00 3A 14 */	add r0, r0, r7
/* 80356354 00352F34  98 C4 00 07 */	stb r6, 7(r4)
/* 80356358 00352F38  88 DC 00 00 */	lbz r6, 0(r28)
/* 8035635C 00352F3C  7C 00 32 14 */	add r0, r0, r6
/* 80356360 00352F40  48 00 01 F0 */	b lbl_80356550
lbl_80356364:
/* 80356364 00352F44  20 85 00 0C */	subfic r4, r5, 0xc
/* 80356368 00352F48  2C 05 00 0C */	cmpwi r5, 0xc
/* 8035636C 00352F4C  7C 89 03 A6 */	mtctr r4
/* 80356370 00352F50  40 80 00 28 */	bge lbl_80356398
lbl_80356374:
/* 80356374 00352F54  38 E5 00 18 */	addi r7, r5, 0x18
/* 80356378 00352F58  7C FF 3A 14 */	add r7, r31, r7
/* 8035637C 00352F5C  88 87 00 00 */	lbz r4, 0(r7)
/* 80356380 00352F60  38 A5 00 01 */	addi r5, r5, 1
/* 80356384 00352F64  98 86 00 00 */	stb r4, 0(r6)
/* 80356388 00352F68  38 C6 00 01 */	addi r6, r6, 1
/* 8035638C 00352F6C  88 87 00 00 */	lbz r4, 0(r7)
/* 80356390 00352F70  7C 00 22 14 */	add r0, r0, r4
/* 80356394 00352F74  42 00 FF E0 */	bdnz lbl_80356374
lbl_80356398:
/* 80356398 00352F78  7C 63 EA 14 */	add r3, r3, r29
/* 8035639C 00352F7C  7C 00 00 F8 */	nor r0, r0, r0
/* 803563A0 00352F80  98 03 00 26 */	stb r0, 0x26(r3)
/* 803563A4 00352F84  38 60 00 01 */	li r3, 1
/* 803563A8 00352F88  4B FF 2D 79 */	bl __OSUnlockSramEx
/* 803563AC 00352F8C  7F C3 F3 78 */	mr r3, r30
/* 803563B0 00352F90  48 00 01 B0 */	b lbl_80356560
lbl_803563B4:
/* 803563B4 00352F94  38 00 00 01 */	li r0, 1
/* 803563B8 00352F98  90 1F 00 24 */	stw r0, 0x24(r31)
/* 803563BC 00352F9C  4B FF 29 DD */	bl __OSLockSramEx
/* 803563C0 00352FA0  1C 1D 00 0C */	mulli r0, r29, 0xc
/* 803563C4 00352FA4  3B C3 00 00 */	addi r30, r3, 0
/* 803563C8 00352FA8  7C BE 02 14 */	add r5, r30, r0
/* 803563CC 00352FAC  88 85 00 00 */	lbz r4, 0(r5)
/* 803563D0 00352FB0  38 C0 00 08 */	li r6, 8
/* 803563D4 00352FB4  88 05 00 01 */	lbz r0, 1(r5)
/* 803563D8 00352FB8  88 65 00 02 */	lbz r3, 2(r5)
/* 803563DC 00352FBC  7F 84 02 14 */	add r28, r4, r0
/* 803563E0 00352FC0  88 05 00 03 */	lbz r0, 3(r5)
/* 803563E4 00352FC4  7F 9C 1A 14 */	add r28, r28, r3
/* 803563E8 00352FC8  88 65 00 04 */	lbz r3, 4(r5)
/* 803563EC 00352FCC  7F 9C 02 14 */	add r28, r28, r0
/* 803563F0 00352FD0  88 05 00 05 */	lbz r0, 5(r5)
/* 803563F4 00352FD4  7F 9C 1A 14 */	add r28, r28, r3
/* 803563F8 00352FD8  88 65 00 06 */	lbz r3, 6(r5)
/* 803563FC 00352FDC  7F 9C 02 14 */	add r28, r28, r0
/* 80356400 00352FE0  88 05 00 07 */	lbz r0, 7(r5)
/* 80356404 00352FE4  7F 9C 1A 14 */	add r28, r28, r3
/* 80356408 00352FE8  7F 9C 02 14 */	add r28, r28, r0
/* 8035640C 00352FEC  48 00 01 4C */	b lbl_80356558
lbl_80356410:
/* 80356410 00352FF0  20 06 00 0C */	subfic r0, r6, 0xc
/* 80356414 00352FF4  2C 06 00 0C */	cmpwi r6, 0xc
/* 80356418 00352FF8  7C 09 03 A6 */	mtctr r0
/* 8035641C 00352FFC  40 80 00 14 */	bge lbl_80356430
lbl_80356420:
/* 80356420 00353000  88 03 00 00 */	lbz r0, 0(r3)
/* 80356424 00353004  38 63 00 01 */	addi r3, r3, 1
/* 80356428 00353008  7F 9C 02 14 */	add r28, r28, r0
/* 8035642C 0035300C  42 00 FF F4 */	bdnz lbl_80356420
lbl_80356430:
/* 80356430 00353010  38 60 00 00 */	li r3, 0
/* 80356434 00353014  4B FF 2C ED */	bl __OSUnlockSramEx
/* 80356438 00353018  7C 7E EA 14 */	add r3, r30, r29
/* 8035643C 0035301C  7F 80 E0 F8 */	nor r0, r28, r28
/* 80356440 00353020  88 63 00 26 */	lbz r3, 0x26(r3)
/* 80356444 00353024  54 00 06 3E */	clrlwi r0, r0, 0x18
/* 80356448 00353028  7C 03 00 40 */	cmplw r3, r0
/* 8035644C 0035302C  41 82 00 0C */	beq lbl_80356458
/* 80356450 00353030  3B C0 FF FB */	li r30, -5
/* 80356454 00353034  48 00 00 E0 */	b lbl_80356534
lbl_80356458:
/* 80356458 00353038  80 1F 00 24 */	lwz r0, 0x24(r31)
/* 8035645C 0035303C  2C 00 00 01 */	cmpwi r0, 1
/* 80356460 00353040  40 82 00 88 */	bne lbl_803564E8
/* 80356464 00353044  80 7F 01 08 */	lwz r3, 0x108(r31)
/* 80356468 00353048  3C 03 80 00 */	addis r0, r3, 0x8000
/* 8035646C 0035304C  28 00 00 04 */	cmplwi r0, 4
/* 80356470 00353050  40 82 00 34 */	bne lbl_803564A4
/* 80356474 00353054  4B FF 29 25 */	bl __OSLockSramEx
/* 80356478 00353058  1C 1D 00 0C */	mulli r0, r29, 0xc
/* 8035647C 0035305C  7F 83 02 2E */	lhzx r28, r3, r0
/* 80356480 00353060  38 60 00 00 */	li r3, 0
/* 80356484 00353064  4B FF 2C 9D */	bl __OSUnlockSramEx
/* 80356488 00353068  A0 0D A5 C0 */	lhz r0, lbl_804D5C60@sda21(r13)
/* 8035648C 0035306C  28 00 FF FF */	cmplwi r0, 0xffff
/* 80356490 00353070  41 82 00 0C */	beq lbl_8035649C
/* 80356494 00353074  7C 1C 00 40 */	cmplw r28, r0
/* 80356498 00353078  41 82 00 0C */	beq lbl_803564A4
lbl_8035649C:
/* 8035649C 0035307C  3B C0 FF FE */	li r30, -2
/* 803564A0 00353080  48 00 00 94 */	b lbl_80356534
lbl_803564A4:
/* 803564A4 00353084  38 00 00 02 */	li r0, 2
/* 803564A8 00353088  90 1F 00 24 */	stw r0, 0x24(r31)
/* 803564AC 0035308C  38 7D 00 00 */	addi r3, r29, 0
/* 803564B0 00353090  38 80 00 01 */	li r4, 1
/* 803564B4 00353094  4B FF C1 11 */	bl __CARDEnableInterrupt
/* 803564B8 00353098  7C 7E 1B 79 */	or. r30, r3, r3
/* 803564BC 0035309C  41 80 00 78 */	blt lbl_80356534
/* 803564C0 003530A0  3C 60 80 35 */	lis r3, __CARDExiHandler@ha
/* 803564C4 003530A4  38 83 23 80 */	addi r4, r3, __CARDExiHandler@l
/* 803564C8 003530A8  38 7D 00 00 */	addi r3, r29, 0
/* 803564CC 003530AC  4B FE FC D1 */	bl EXISetExiCallback
/* 803564D0 003530B0  7F A3 EB 78 */	mr r3, r29
/* 803564D4 003530B4  4B FF 09 A1 */	bl EXIUnlock
/* 803564D8 003530B8  3C 80 00 01 */	lis r4, 0x0000A000@ha
/* 803564DC 003530BC  80 7F 00 80 */	lwz r3, 0x80(r31)
/* 803564E0 003530C0  38 84 A0 00 */	addi r4, r4, 0x0000A000@l
/* 803564E4 003530C4  4B FE E2 F9 */	bl DCInvalidateRange
lbl_803564E8:
/* 803564E8 003530C8  80 9F 00 24 */	lwz r4, 0x24(r31)
/* 803564EC 003530CC  3C 60 80 35 */	lis r3, __CARDMountCallback@ha
/* 803564F0 003530D0  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 803564F4 003530D4  38 E3 65 80 */	addi r7, r3, __CARDMountCallback@l
/* 803564F8 003530D8  38 64 FF FE */	addi r3, r4, -2
/* 803564FC 003530DC  7C 80 19 D6 */	mullw r4, r0, r3
/* 80356500 003530E0  80 BF 00 80 */	lwz r5, 0x80(r31)
/* 80356504 003530E4  54 60 68 24 */	slwi r0, r3, 0xd
/* 80356508 003530E8  7C C5 02 14 */	add r6, r5, r0
/* 8035650C 003530EC  38 7D 00 00 */	addi r3, r29, 0
/* 80356510 003530F0  38 A0 20 00 */	li r5, 0x2000
/* 80356514 003530F4  4B FF E2 E9 */	bl func_803547FC
/* 80356518 003530F8  7C 7C 1B 79 */	or. r28, r3, r3
/* 8035651C 003530FC  40 80 00 10 */	bge lbl_8035652C
/* 80356520 00353100  38 7F 00 00 */	addi r3, r31, 0
/* 80356524 00353104  38 9C 00 00 */	addi r4, r28, 0
/* 80356528 00353108  4B FF CD 49 */	bl __CARDPutControlBlock
lbl_8035652C:
/* 8035652C 0035310C  7F 83 E3 78 */	mr r3, r28
/* 80356530 00353110  48 00 00 30 */	b lbl_80356560
lbl_80356534:
/* 80356534 00353114  7F A3 EB 78 */	mr r3, r29
/* 80356538 00353118  4B FF 09 3D */	bl EXIUnlock
/* 8035653C 0035311C  38 7D 00 00 */	addi r3, r29, 0
/* 80356540 00353120  38 9E 00 00 */	addi r4, r30, 0
/* 80356544 00353124  48 00 02 E5 */	bl DoUnmount
/* 80356548 00353128  7F C3 F3 78 */	mr r3, r30
/* 8035654C 0035312C  48 00 00 14 */	b lbl_80356560
lbl_80356550:
/* 80356550 00353130  38 C4 00 08 */	addi r6, r4, 8
/* 80356554 00353134  4B FF FE 10 */	b lbl_80356364
lbl_80356558:
/* 80356558 00353138  38 65 00 08 */	addi r3, r5, 8
/* 8035655C 0035313C  4B FF FE B4 */	b lbl_80356410
lbl_80356560:
/* 80356560 00353140  80 01 00 34 */	lwz r0, 0x34(r1)
/* 80356564 00353144  83 E1 00 2C */	lwz r31, 0x2c(r1)
/* 80356568 00353148  83 C1 00 28 */	lwz r30, 0x28(r1)
/* 8035656C 0035314C  83 A1 00 24 */	lwz r29, 0x24(r1)
/* 80356570 00353150  83 81 00 20 */	lwz r28, 0x20(r1)
/* 80356574 00353154  38 21 00 30 */	addi r1, r1, 0x30
/* 80356578 00353158  7C 08 03 A6 */	mtlr r0
/* 8035657C 0035315C  4E 80 00 20 */	blr 

.global __CARDMountCallback
__CARDMountCallback:
/* 80356580 00353160  7C 08 02 A6 */	mflr r0
/* 80356584 00353164  90 01 00 04 */	stw r0, 4(r1)
/* 80356588 00353168  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8035658C 0035316C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80356590 00353170  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80356594 00353174  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80356598 00353178  3B A4 00 00 */	addi r29, r4, 0
/* 8035659C 0035317C  2C 1D FF FD */	cmpwi r29, -3
/* 803565A0 00353180  93 81 00 10 */	stw r28, 0x10(r1)
/* 803565A4 00353184  3B 83 00 00 */	addi r28, r3, 0
/* 803565A8 00353188  1C BC 01 10 */	mulli r5, r28, 0x110
/* 803565AC 0035318C  3C 60 80 4B */	lis r3, lbl_804A8B38@ha
/* 803565B0 00353190  38 03 8B 38 */	addi r0, r3, lbl_804A8B38@l
/* 803565B4 00353194  7F E0 2A 14 */	add r31, r0, r5
/* 803565B8 00353198  41 82 00 78 */	beq lbl_80356630
/* 803565BC 0035319C  40 80 00 10 */	bge lbl_803565CC
/* 803565C0 003531A0  2C 1D FF FB */	cmpwi r29, -5
/* 803565C4 003531A4  41 82 00 6C */	beq lbl_80356630
/* 803565C8 003531A8  48 00 00 74 */	b lbl_8035663C
lbl_803565CC:
/* 803565CC 003531AC  2C 1D 00 01 */	cmpwi r29, 1
/* 803565D0 003531B0  41 82 00 4C */	beq lbl_8035661C
/* 803565D4 003531B4  40 80 00 68 */	bge lbl_8035663C
/* 803565D8 003531B8  2C 1D 00 00 */	cmpwi r29, 0
/* 803565DC 003531BC  40 80 00 08 */	bge lbl_803565E4
/* 803565E0 003531C0  48 00 00 5C */	b lbl_8035663C
lbl_803565E4:
/* 803565E4 003531C4  80 7F 00 24 */	lwz r3, 0x24(r31)
/* 803565E8 003531C8  38 03 00 01 */	addi r0, r3, 1
/* 803565EC 003531CC  2C 00 00 07 */	cmpwi r0, 7
/* 803565F0 003531D0  90 1F 00 24 */	stw r0, 0x24(r31)
/* 803565F4 003531D4  40 80 00 18 */	bge lbl_8035660C
/* 803565F8 003531D8  7F 83 E3 78 */	mr r3, r28
/* 803565FC 003531DC  4B FF FB 35 */	bl DoMount
/* 80356600 003531E0  7C 7D 1B 79 */	or. r29, r3, r3
/* 80356604 003531E4  41 80 00 38 */	blt lbl_8035663C
/* 80356608 003531E8  48 00 00 60 */	b lbl_80356668
lbl_8035660C:
/* 8035660C 003531EC  7F E3 FB 78 */	mr r3, r31
/* 80356610 003531F0  4B FF F3 09 */	bl __CARDVerify
/* 80356614 003531F4  7C 7D 1B 78 */	mr r29, r3
/* 80356618 003531F8  48 00 00 24 */	b lbl_8035663C
lbl_8035661C:
/* 8035661C 003531FC  7F 83 E3 78 */	mr r3, r28
/* 80356620 00353200  4B FF FB 11 */	bl DoMount
/* 80356624 00353204  7C 7D 1B 79 */	or. r29, r3, r3
/* 80356628 00353208  41 80 00 14 */	blt lbl_8035663C
/* 8035662C 0035320C  48 00 00 3C */	b lbl_80356668
lbl_80356630:
/* 80356630 00353210  38 7C 00 00 */	addi r3, r28, 0
/* 80356634 00353214  38 9D 00 00 */	addi r4, r29, 0
/* 80356638 00353218  48 00 01 F1 */	bl DoUnmount
lbl_8035663C:
/* 8035663C 0035321C  83 DF 00 D0 */	lwz r30, 0xd0(r31)
/* 80356640 00353220  38 00 00 00 */	li r0, 0
/* 80356644 00353224  38 7F 00 00 */	addi r3, r31, 0
/* 80356648 00353228  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 8035664C 0035322C  7F A4 EB 78 */	mr r4, r29
/* 80356650 00353230  4B FF CC 21 */	bl __CARDPutControlBlock
/* 80356654 00353234  39 9E 00 00 */	addi r12, r30, 0
/* 80356658 00353238  7D 88 03 A6 */	mtlr r12
/* 8035665C 0035323C  38 7C 00 00 */	addi r3, r28, 0
/* 80356660 00353240  38 9D 00 00 */	addi r4, r29, 0
/* 80356664 00353244  4E 80 00 21 */	blrl 
lbl_80356668:
/* 80356668 00353248  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8035666C 0035324C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80356670 00353250  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80356674 00353254  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80356678 00353258  83 81 00 10 */	lwz r28, 0x10(r1)
/* 8035667C 0035325C  38 21 00 20 */	addi r1, r1, 0x20
/* 80356680 00353260  7C 08 03 A6 */	mtlr r0
/* 80356684 00353264  4E 80 00 20 */	blr 

.global CARDMountAsync
CARDMountAsync:
/* 80356688 00353268  7C 08 02 A6 */	mflr r0
/* 8035668C 0035326C  90 01 00 04 */	stw r0, 4(r1)
/* 80356690 00353270  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 80356694 00353274  BF 41 00 18 */	stmw r26, 0x18(r1)
/* 80356698 00353278  7C 7E 1B 79 */	or. r30, r3, r3
/* 8035669C 0035327C  3B 44 00 00 */	addi r26, r4, 0
/* 803566A0 00353280  3B 65 00 00 */	addi r27, r5, 0
/* 803566A4 00353284  3B A6 00 00 */	addi r29, r6, 0
/* 803566A8 00353288  41 80 00 0C */	blt lbl_803566B4
/* 803566AC 0035328C  2C 1E 00 02 */	cmpwi r30, 2
/* 803566B0 00353290  41 80 00 0C */	blt lbl_803566BC
lbl_803566B4:
/* 803566B4 00353294  38 60 FF 80 */	li r3, -128
/* 803566B8 00353298  48 00 01 5C */	b lbl_80356814
lbl_803566BC:
/* 803566BC 0035329C  3C 60 80 00 */	lis r3, 0x800030E3@ha
/* 803566C0 003532A0  88 03 30 E3 */	lbz r0, 0x800030E3@l(r3)
/* 803566C4 003532A4  54 00 06 31 */	rlwinm. r0, r0, 0, 0x18, 0x18
/* 803566C8 003532A8  41 82 00 0C */	beq lbl_803566D4
/* 803566CC 003532AC  38 60 FF FD */	li r3, -3
/* 803566D0 003532B0  48 00 01 44 */	b lbl_80356814
lbl_803566D4:
/* 803566D4 003532B4  1C 9E 01 10 */	mulli r4, r30, 0x110
/* 803566D8 003532B8  3C 60 80 4B */	lis r3, lbl_804A8B38@ha
/* 803566DC 003532BC  38 03 8B 38 */	addi r0, r3, lbl_804A8B38@l
/* 803566E0 003532C0  7F E0 22 14 */	add r31, r0, r4
/* 803566E4 003532C4  4B FF 0C 81 */	bl OSDisableInterrupts
/* 803566E8 003532C8  80 1F 00 04 */	lwz r0, 4(r31)
/* 803566EC 003532CC  3B 83 00 00 */	addi r28, r3, 0
/* 803566F0 003532D0  2C 00 FF FF */	cmpwi r0, -1
/* 803566F4 003532D4  40 82 00 14 */	bne lbl_80356708
/* 803566F8 003532D8  7F 83 E3 78 */	mr r3, r28
/* 803566FC 003532DC  4B FF 0C 91 */	bl OSRestoreInterrupts
/* 80356700 003532E0  38 60 FF FF */	li r3, -1
/* 80356704 003532E4  48 00 01 10 */	b lbl_80356814
lbl_80356708:
/* 80356708 003532E8  80 1F 00 00 */	lwz r0, 0(r31)
/* 8035670C 003532EC  2C 00 00 00 */	cmpwi r0, 0
/* 80356710 003532F0  40 82 00 24 */	bne lbl_80356734
/* 80356714 003532F4  7F C3 F3 78 */	mr r3, r30
/* 80356718 003532F8  4B FF 08 39 */	bl EXIGetState
/* 8035671C 003532FC  54 60 07 39 */	rlwinm. r0, r3, 0, 0x1c, 0x1c
/* 80356720 00353300  41 82 00 14 */	beq lbl_80356734
/* 80356724 00353304  7F 83 E3 78 */	mr r3, r28
/* 80356728 00353308  4B FF 0C 65 */	bl OSRestoreInterrupts
/* 8035672C 0035330C  38 60 FF FE */	li r3, -2
/* 80356730 00353310  48 00 00 E4 */	b lbl_80356814
lbl_80356734:
/* 80356734 00353314  38 00 FF FF */	li r0, -1
/* 80356738 00353318  90 1F 00 04 */	stw r0, 4(r31)
/* 8035673C 0035331C  28 1D 00 00 */	cmplwi r29, 0
/* 80356740 00353320  93 5F 00 80 */	stw r26, 0x80(r31)
/* 80356744 00353324  93 7F 00 C4 */	stw r27, 0xc4(r31)
/* 80356748 00353328  41 82 00 0C */	beq lbl_80356754
/* 8035674C 0035332C  7F A0 EB 78 */	mr r0, r29
/* 80356750 00353330  48 00 00 0C */	b lbl_8035675C
lbl_80356754:
/* 80356754 00353334  3C 60 80 35 */	lis r3, __CARDDefaultApiCallback@ha
/* 80356758 00353338  38 03 22 70 */	addi r0, r3, __CARDDefaultApiCallback@l
lbl_8035675C:
/* 8035675C 0035333C  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 80356760 00353340  38 00 00 00 */	li r0, 0
/* 80356764 00353344  90 1F 00 CC */	stw r0, 0xcc(r31)
/* 80356768 00353348  80 1F 00 00 */	lwz r0, 0(r31)
/* 8035676C 0035334C  2C 00 00 00 */	cmpwi r0, 0
/* 80356770 00353350  40 82 00 34 */	bne lbl_803567A4
/* 80356774 00353354  3C 60 80 35 */	lis r3, __CARDExtHandler@ha
/* 80356778 00353358  38 83 22 A8 */	addi r4, r3, __CARDExtHandler@l
/* 8035677C 0035335C  38 7E 00 00 */	addi r3, r30, 0
/* 80356780 00353360  4B FE FD 41 */	bl EXIAttach
/* 80356784 00353364  2C 03 00 00 */	cmpwi r3, 0
/* 80356788 00353368  40 82 00 1C */	bne lbl_803567A4
/* 8035678C 0035336C  38 00 FF FD */	li r0, -3
/* 80356790 00353370  90 1F 00 04 */	stw r0, 4(r31)
/* 80356794 00353374  7F 83 E3 78 */	mr r3, r28
/* 80356798 00353378  4B FF 0B F5 */	bl OSRestoreInterrupts
/* 8035679C 0035337C  38 60 FF FD */	li r3, -3
/* 803567A0 00353380  48 00 00 74 */	b lbl_80356814
lbl_803567A4:
/* 803567A4 00353384  3B A0 00 00 */	li r29, 0
/* 803567A8 00353388  93 BF 00 24 */	stw r29, 0x24(r31)
/* 803567AC 0035338C  38 00 00 01 */	li r0, 1
/* 803567B0 00353390  38 7E 00 00 */	addi r3, r30, 0
/* 803567B4 00353394  90 1F 00 00 */	stw r0, 0(r31)
/* 803567B8 00353398  38 80 00 00 */	li r4, 0
/* 803567BC 0035339C  4B FE F9 E1 */	bl EXISetExiCallback
/* 803567C0 003533A0  38 7F 00 E0 */	addi r3, r31, 0xe0
/* 803567C4 003533A4  4B FE D2 E9 */	bl OSCancelAlarm
/* 803567C8 003533A8  93 BF 00 84 */	stw r29, 0x84(r31)
/* 803567CC 003533AC  7F 83 E3 78 */	mr r3, r28
/* 803567D0 003533B0  93 BF 00 88 */	stw r29, 0x88(r31)
/* 803567D4 003533B4  4B FF 0B B9 */	bl OSRestoreInterrupts
/* 803567D8 003533B8  3C 60 80 35 */	lis r3, __CARDMountCallback@ha
/* 803567DC 003533BC  38 03 65 80 */	addi r0, r3, __CARDMountCallback@l
/* 803567E0 003533C0  3C 60 80 35 */	lis r3, __CARDUnlockedHandler@ha
/* 803567E4 003533C4  90 1F 00 DC */	stw r0, 0xdc(r31)
/* 803567E8 003533C8  38 A3 25 40 */	addi r5, r3, __CARDUnlockedHandler@l
/* 803567EC 003533CC  38 7E 00 00 */	addi r3, r30, 0
/* 803567F0 003533D0  38 80 00 00 */	li r4, 0
/* 803567F4 003533D4  4B FF 05 8D */	bl EXILock
/* 803567F8 003533D8  2C 03 00 00 */	cmpwi r3, 0
/* 803567FC 003533DC  40 82 00 0C */	bne lbl_80356808
/* 80356800 003533E0  38 60 00 00 */	li r3, 0
/* 80356804 003533E4  48 00 00 10 */	b lbl_80356814
lbl_80356808:
/* 80356808 003533E8  93 BF 00 DC */	stw r29, 0xdc(r31)
/* 8035680C 003533EC  7F C3 F3 78 */	mr r3, r30
/* 80356810 003533F0  4B FF F9 21 */	bl DoMount
lbl_80356814:
/* 80356814 003533F4  BB 41 00 18 */	lmw r26, 0x18(r1)
/* 80356818 003533F8  80 01 00 34 */	lwz r0, 0x34(r1)
/* 8035681C 003533FC  38 21 00 30 */	addi r1, r1, 0x30
/* 80356820 00353400  7C 08 03 A6 */	mtlr r0
/* 80356824 00353404  4E 80 00 20 */	blr 

.global DoUnmount
DoUnmount:
/* 80356828 00353408  7C 08 02 A6 */	mflr r0
/* 8035682C 0035340C  90 01 00 04 */	stw r0, 4(r1)
/* 80356830 00353410  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80356834 00353414  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80356838 00353418  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8035683C 0035341C  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80356840 00353420  3B A4 00 00 */	addi r29, r4, 0
/* 80356844 00353424  93 81 00 10 */	stw r28, 0x10(r1)
/* 80356848 00353428  3B 83 00 00 */	addi r28, r3, 0
/* 8035684C 0035342C  1C BC 01 10 */	mulli r5, r28, 0x110
/* 80356850 00353430  3C 60 80 4B */	lis r3, lbl_804A8B38@ha
/* 80356854 00353434  38 03 8B 38 */	addi r0, r3, lbl_804A8B38@l
/* 80356858 00353438  7F E0 2A 14 */	add r31, r0, r5
/* 8035685C 0035343C  4B FF 0B 09 */	bl OSDisableInterrupts
/* 80356860 00353440  80 1F 00 00 */	lwz r0, 0(r31)
/* 80356864 00353444  3B C3 00 00 */	addi r30, r3, 0
/* 80356868 00353448  2C 00 00 00 */	cmpwi r0, 0
/* 8035686C 0035344C  41 82 00 30 */	beq lbl_8035689C
/* 80356870 00353450  38 7C 00 00 */	addi r3, r28, 0
/* 80356874 00353454  38 80 00 00 */	li r4, 0
/* 80356878 00353458  4B FE F9 25 */	bl EXISetExiCallback
/* 8035687C 0035345C  7F 83 E3 78 */	mr r3, r28
/* 80356880 00353460  4B FE FD 4D */	bl EXIDetach
/* 80356884 00353464  38 7F 00 E0 */	addi r3, r31, 0xe0
/* 80356888 00353468  4B FE D2 25 */	bl OSCancelAlarm
/* 8035688C 0035346C  38 00 00 00 */	li r0, 0
/* 80356890 00353470  90 1F 00 00 */	stw r0, 0(r31)
/* 80356894 00353474  93 BF 00 04 */	stw r29, 4(r31)
/* 80356898 00353478  90 1F 00 24 */	stw r0, 0x24(r31)
lbl_8035689C:
/* 8035689C 0035347C  7F C3 F3 78 */	mr r3, r30
/* 803568A0 00353480  4B FF 0A ED */	bl OSRestoreInterrupts
/* 803568A4 00353484  80 01 00 24 */	lwz r0, 0x24(r1)
/* 803568A8 00353488  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 803568AC 0035348C  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 803568B0 00353490  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 803568B4 00353494  83 81 00 10 */	lwz r28, 0x10(r1)
/* 803568B8 00353498  38 21 00 20 */	addi r1, r1, 0x20
/* 803568BC 0035349C  7C 08 03 A6 */	mtlr r0
/* 803568C0 003534A0  4E 80 00 20 */	blr 

.global CARDUnmount
CARDUnmount:
/* 803568C4 003534A4  7C 08 02 A6 */	mflr r0
/* 803568C8 003534A8  90 01 00 04 */	stw r0, 4(r1)
/* 803568CC 003534AC  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 803568D0 003534B0  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 803568D4 003534B4  38 81 00 0C */	addi r4, r1, 0xc
/* 803568D8 003534B8  93 C1 00 18 */	stw r30, 0x18(r1)
/* 803568DC 003534BC  93 A1 00 14 */	stw r29, 0x14(r1)
/* 803568E0 003534C0  3B A3 00 00 */	addi r29, r3, 0
/* 803568E4 003534C4  4B FF C8 D5 */	bl __CARDGetControlBlock
/* 803568E8 003534C8  2C 03 00 00 */	cmpwi r3, 0
/* 803568EC 003534CC  40 80 00 08 */	bge lbl_803568F4
/* 803568F0 003534D0  48 00 00 64 */	b lbl_80356954
lbl_803568F4:
/* 803568F4 003534D4  1C 9D 01 10 */	mulli r4, r29, 0x110
/* 803568F8 003534D8  3C 60 80 4B */	lis r3, lbl_804A8B38@ha
/* 803568FC 003534DC  38 03 8B 38 */	addi r0, r3, lbl_804A8B38@l
/* 80356900 003534E0  7F C0 22 14 */	add r30, r0, r4
/* 80356904 003534E4  4B FF 0A 61 */	bl OSDisableInterrupts
/* 80356908 003534E8  80 1E 00 00 */	lwz r0, 0(r30)
/* 8035690C 003534EC  3B E3 00 00 */	addi r31, r3, 0
/* 80356910 003534F0  2C 00 00 00 */	cmpwi r0, 0
/* 80356914 003534F4  41 82 00 34 */	beq lbl_80356948
/* 80356918 003534F8  38 7D 00 00 */	addi r3, r29, 0
/* 8035691C 003534FC  38 80 00 00 */	li r4, 0
/* 80356920 00353500  4B FE F8 7D */	bl EXISetExiCallback
/* 80356924 00353504  7F A3 EB 78 */	mr r3, r29
/* 80356928 00353508  4B FE FC A5 */	bl EXIDetach
/* 8035692C 0035350C  38 7E 00 E0 */	addi r3, r30, 0xe0
/* 80356930 00353510  4B FE D1 7D */	bl OSCancelAlarm
/* 80356934 00353514  38 60 00 00 */	li r3, 0
/* 80356938 00353518  90 7E 00 00 */	stw r3, 0(r30)
/* 8035693C 0035351C  38 00 FF FD */	li r0, -3
/* 80356940 00353520  90 1E 00 04 */	stw r0, 4(r30)
/* 80356944 00353524  90 7E 00 24 */	stw r3, 0x24(r30)
lbl_80356948:
/* 80356948 00353528  7F E3 FB 78 */	mr r3, r31
/* 8035694C 0035352C  4B FF 0A 41 */	bl OSRestoreInterrupts
/* 80356950 00353530  38 60 00 00 */	li r3, 0
lbl_80356954:
/* 80356954 00353534  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80356958 00353538  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8035695C 0035353C  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80356960 00353540  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80356964 00353544  38 21 00 20 */	addi r1, r1, 0x20
/* 80356968 00353548  7C 08 03 A6 */	mtlr r0
/* 8035696C 0035354C  4E 80 00 20 */	blr 


.section .data
    .balign 8
.global lbl_80403160
lbl_80403160:
    .4byte 0x00002000
    .4byte 0x00004000
    .4byte 0x00008000
    .4byte 0x00010000
    .4byte 0x00020000
    .4byte 0x00040000
    .4byte NULL
    .4byte NULL
.global lbl_80403180
lbl_80403180:
    .4byte 0x00000004
    .4byte 0x00000008
    .4byte 0x00000010
    .4byte 0x00000020
    .4byte 0x00000040
    .4byte 0x00000080
    .4byte 0x00000100
    .4byte 0x00000200


.section .sdata
    .balign 8
.global lbl_804D5C60
lbl_804D5C60:
    .4byte 0xFFFF0000
    .4byte 0x00000000
