.include "macros.inc"

.section .text  # 0x80005940 - 0x803B7240

.global BlockReadCallback
BlockReadCallback:
/* 80354720 00351300  7C 08 02 A6 */	mflr r0
/* 80354724 00351304  90 01 00 04 */	stw r0, 4(r1)
/* 80354728 00351308  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8035472C 0035130C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80354730 00351310  3B E3 00 00 */	addi r31, r3, 0
/* 80354734 00351314  3C 60 80 4B */	lis r3, lbl_804A8B38@ha
/* 80354738 00351318  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8035473C 0035131C  1C BF 01 10 */	mulli r5, r31, 0x110
/* 80354740 00351320  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80354744 00351324  38 03 8B 38 */	addi r0, r3, lbl_804A8B38@l
/* 80354748 00351328  7C 9D 23 79 */	or. r29, r4, r4
/* 8035474C 0035132C  7F C0 2A 14 */	add r30, r0, r5
/* 80354750 00351330  41 80 00 50 */	blt lbl_803547A0
/* 80354754 00351334  80 7E 00 B8 */	lwz r3, 0xb8(r30)
/* 80354758 00351338  38 03 02 00 */	addi r0, r3, 0x200
/* 8035475C 0035133C  90 1E 00 B8 */	stw r0, 0xb8(r30)
/* 80354760 00351340  80 7E 00 B0 */	lwz r3, 0xb0(r30)
/* 80354764 00351344  38 03 02 00 */	addi r0, r3, 0x200
/* 80354768 00351348  90 1E 00 B0 */	stw r0, 0xb0(r30)
/* 8035476C 0035134C  80 7E 00 B4 */	lwz r3, 0xb4(r30)
/* 80354770 00351350  38 03 02 00 */	addi r0, r3, 0x200
/* 80354774 00351354  90 1E 00 B4 */	stw r0, 0xb4(r30)
/* 80354778 00351358  80 7E 00 AC */	lwz r3, 0xac(r30)
/* 8035477C 0035135C  34 03 FF FF */	addic. r0, r3, -1
/* 80354780 00351360  90 1E 00 AC */	stw r0, 0xac(r30)
/* 80354784 00351364  40 81 00 1C */	ble lbl_803547A0
/* 80354788 00351368  3C 60 80 35 */	lis r3, BlockReadCallback@ha
/* 8035478C 0035136C  38 83 47 20 */	addi r4, r3, BlockReadCallback@l
/* 80354790 00351370  38 7F 00 00 */	addi r3, r31, 0
/* 80354794 00351374  4B FF E6 21 */	bl __CARDReadSegment
/* 80354798 00351378  7C 7D 1B 79 */	or. r29, r3, r3
/* 8035479C 0035137C  40 80 00 44 */	bge lbl_803547E0
lbl_803547A0:
/* 803547A0 00351380  80 1E 00 D0 */	lwz r0, 0xd0(r30)
/* 803547A4 00351384  28 00 00 00 */	cmplwi r0, 0
/* 803547A8 00351388  40 82 00 10 */	bne lbl_803547B8
/* 803547AC 0035138C  38 7E 00 00 */	addi r3, r30, 0
/* 803547B0 00351390  38 9D 00 00 */	addi r4, r29, 0
/* 803547B4 00351394  4B FF EA BD */	bl __CARDPutControlBlock
lbl_803547B8:
/* 803547B8 00351398  80 1E 00 D4 */	lwz r0, 0xd4(r30)
/* 803547BC 0035139C  28 00 00 00 */	cmplwi r0, 0
/* 803547C0 003513A0  7C 0C 03 78 */	mr r12, r0
/* 803547C4 003513A4  41 82 00 1C */	beq lbl_803547E0
/* 803547C8 003513A8  38 00 00 00 */	li r0, 0
/* 803547CC 003513AC  7D 88 03 A6 */	mtlr r12
/* 803547D0 003513B0  90 1E 00 D4 */	stw r0, 0xd4(r30)
/* 803547D4 003513B4  38 7F 00 00 */	addi r3, r31, 0
/* 803547D8 003513B8  38 9D 00 00 */	addi r4, r29, 0
/* 803547DC 003513BC  4E 80 00 21 */	blrl 
lbl_803547E0:
/* 803547E0 003513C0  80 01 00 24 */	lwz r0, 0x24(r1)
/* 803547E4 003513C4  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 803547E8 003513C8  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 803547EC 003513CC  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 803547F0 003513D0  38 21 00 20 */	addi r1, r1, 0x20
/* 803547F4 003513D4  7C 08 03 A6 */	mtlr r0
/* 803547F8 003513D8  4E 80 00 20 */	blr 

.global func_803547FC
func_803547FC:
/* 803547FC 003513DC  7C 08 02 A6 */	mflr r0
/* 80354800 003513E0  1D 23 01 10 */	mulli r9, r3, 0x110
/* 80354804 003513E4  90 01 00 04 */	stw r0, 4(r1)
/* 80354808 003513E8  3D 00 80 4B */	lis r8, lbl_804A8B38@ha
/* 8035480C 003513EC  94 21 FF F8 */	stwu r1, -8(r1)
/* 80354810 003513F0  38 08 8B 38 */	addi r0, r8, lbl_804A8B38@l
/* 80354814 003513F4  7D 00 4A 14 */	add r8, r0, r9
/* 80354818 003513F8  80 08 00 00 */	lwz r0, 0(r8)
/* 8035481C 003513FC  2C 00 00 00 */	cmpwi r0, 0
/* 80354820 00351400  40 82 00 0C */	bne lbl_8035482C
/* 80354824 00351404  38 60 FF FD */	li r3, -3
/* 80354828 00351408  48 00 00 28 */	b lbl_80354850
lbl_8035482C:
/* 8035482C 0035140C  90 E8 00 D4 */	stw r7, 0xd4(r8)
/* 80354830 00351410  54 A0 BA 7E */	srwi r0, r5, 9
/* 80354834 00351414  3C A0 80 35 */	lis r5, BlockReadCallback@ha
/* 80354838 00351418  90 08 00 AC */	stw r0, 0xac(r8)
/* 8035483C 0035141C  38 05 47 20 */	addi r0, r5, BlockReadCallback@l
/* 80354840 00351420  90 88 00 B0 */	stw r4, 0xb0(r8)
/* 80354844 00351424  7C 04 03 78 */	mr r4, r0
/* 80354848 00351428  90 C8 00 B4 */	stw r6, 0xb4(r8)
/* 8035484C 0035142C  4B FF E5 69 */	bl __CARDReadSegment
lbl_80354850:
/* 80354850 00351430  80 01 00 0C */	lwz r0, 0xc(r1)
/* 80354854 00351434  38 21 00 08 */	addi r1, r1, 8
/* 80354858 00351438  7C 08 03 A6 */	mtlr r0
/* 8035485C 0035143C  4E 80 00 20 */	blr 
lbl_80354860:
/* 80354860 00351440  7C 08 02 A6 */	mflr r0
/* 80354864 00351444  90 01 00 04 */	stw r0, 4(r1)
/* 80354868 00351448  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8035486C 0035144C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80354870 00351450  3B E3 00 00 */	addi r31, r3, 0
/* 80354874 00351454  3C 60 80 4B */	lis r3, lbl_804A8B38@ha
/* 80354878 00351458  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8035487C 0035145C  1C BF 01 10 */	mulli r5, r31, 0x110
/* 80354880 00351460  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80354884 00351464  38 03 8B 38 */	addi r0, r3, lbl_804A8B38@l
/* 80354888 00351468  7C 9D 23 79 */	or. r29, r4, r4
/* 8035488C 0035146C  7F C0 2A 14 */	add r30, r0, r5
/* 80354890 00351470  41 80 00 50 */	blt lbl_803548E0
/* 80354894 00351474  80 7E 00 B8 */	lwz r3, 0xb8(r30)
/* 80354898 00351478  38 03 00 80 */	addi r0, r3, 0x80
/* 8035489C 0035147C  90 1E 00 B8 */	stw r0, 0xb8(r30)
/* 803548A0 00351480  80 7E 00 B0 */	lwz r3, 0xb0(r30)
/* 803548A4 00351484  38 03 00 80 */	addi r0, r3, 0x80
/* 803548A8 00351488  90 1E 00 B0 */	stw r0, 0xb0(r30)
/* 803548AC 0035148C  80 7E 00 B4 */	lwz r3, 0xb4(r30)
/* 803548B0 00351490  38 03 00 80 */	addi r0, r3, 0x80
/* 803548B4 00351494  90 1E 00 B4 */	stw r0, 0xb4(r30)
/* 803548B8 00351498  80 7E 00 AC */	lwz r3, 0xac(r30)
/* 803548BC 0035149C  34 03 FF FF */	addic. r0, r3, -1
/* 803548C0 003514A0  90 1E 00 AC */	stw r0, 0xac(r30)
/* 803548C4 003514A4  40 81 00 1C */	ble lbl_803548E0
/* 803548C8 003514A8  3C 60 80 35 */	lis r3, lbl_80354860@ha
/* 803548CC 003514AC  38 83 48 60 */	addi r4, r3, lbl_80354860@l
/* 803548D0 003514B0  38 7F 00 00 */	addi r3, r31, 0
/* 803548D4 003514B4  4B FF E6 15 */	bl __CARDWritePage
/* 803548D8 003514B8  7C 7D 1B 79 */	or. r29, r3, r3
/* 803548DC 003514BC  40 80 00 44 */	bge lbl_80354920
lbl_803548E0:
/* 803548E0 003514C0  80 1E 00 D0 */	lwz r0, 0xd0(r30)
/* 803548E4 003514C4  28 00 00 00 */	cmplwi r0, 0
/* 803548E8 003514C8  40 82 00 10 */	bne lbl_803548F8
/* 803548EC 003514CC  38 7E 00 00 */	addi r3, r30, 0
/* 803548F0 003514D0  38 9D 00 00 */	addi r4, r29, 0
/* 803548F4 003514D4  4B FF E9 7D */	bl __CARDPutControlBlock
lbl_803548F8:
/* 803548F8 003514D8  80 1E 00 D4 */	lwz r0, 0xd4(r30)
/* 803548FC 003514DC  28 00 00 00 */	cmplwi r0, 0
/* 80354900 003514E0  7C 0C 03 78 */	mr r12, r0
/* 80354904 003514E4  41 82 00 1C */	beq lbl_80354920
/* 80354908 003514E8  38 00 00 00 */	li r0, 0
/* 8035490C 003514EC  7D 88 03 A6 */	mtlr r12
/* 80354910 003514F0  90 1E 00 D4 */	stw r0, 0xd4(r30)
/* 80354914 003514F4  38 7F 00 00 */	addi r3, r31, 0
/* 80354918 003514F8  38 9D 00 00 */	addi r4, r29, 0
/* 8035491C 003514FC  4E 80 00 21 */	blrl 
lbl_80354920:
/* 80354920 00351500  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80354924 00351504  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80354928 00351508  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8035492C 0035150C  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80354930 00351510  38 21 00 20 */	addi r1, r1, 0x20
/* 80354934 00351514  7C 08 03 A6 */	mtlr r0
/* 80354938 00351518  4E 80 00 20 */	blr 

.global func_8035493C
func_8035493C:
/* 8035493C 0035151C  7C 08 02 A6 */	mflr r0
/* 80354940 00351520  1D 23 01 10 */	mulli r9, r3, 0x110
/* 80354944 00351524  90 01 00 04 */	stw r0, 4(r1)
/* 80354948 00351528  3D 00 80 4B */	lis r8, lbl_804A8B38@ha
/* 8035494C 0035152C  94 21 FF F8 */	stwu r1, -8(r1)
/* 80354950 00351530  38 08 8B 38 */	addi r0, r8, lbl_804A8B38@l
/* 80354954 00351534  7D 00 4A 14 */	add r8, r0, r9
/* 80354958 00351538  80 08 00 00 */	lwz r0, 0(r8)
/* 8035495C 0035153C  2C 00 00 00 */	cmpwi r0, 0
/* 80354960 00351540  40 82 00 0C */	bne lbl_8035496C
/* 80354964 00351544  38 60 FF FD */	li r3, -3
/* 80354968 00351548  48 00 00 28 */	b lbl_80354990
lbl_8035496C:
/* 8035496C 0035154C  90 E8 00 D4 */	stw r7, 0xd4(r8)
/* 80354970 00351550  54 A0 C9 FE */	srwi r0, r5, 7
/* 80354974 00351554  3C A0 80 35 */	lis r5, lbl_80354860@ha
/* 80354978 00351558  90 08 00 AC */	stw r0, 0xac(r8)
/* 8035497C 0035155C  38 05 48 60 */	addi r0, r5, lbl_80354860@l
/* 80354980 00351560  90 88 00 B0 */	stw r4, 0xb0(r8)
/* 80354984 00351564  7C 04 03 78 */	mr r4, r0
/* 80354988 00351568  90 C8 00 B4 */	stw r6, 0xb4(r8)
/* 8035498C 0035156C  4B FF E5 5D */	bl __CARDWritePage
lbl_80354990:
/* 80354990 00351570  80 01 00 0C */	lwz r0, 0xc(r1)
/* 80354994 00351574  38 21 00 08 */	addi r1, r1, 8
/* 80354998 00351578  7C 08 03 A6 */	mtlr r0
/* 8035499C 0035157C  4E 80 00 20 */	blr 

.global CARDGetXferredBytes
CARDGetXferredBytes:
/* 803549A0 00351580  1C 03 01 10 */	mulli r0, r3, 0x110
/* 803549A4 00351584  3C 60 80 4B */	lis r3, lbl_804A8B38@ha
/* 803549A8 00351588  38 63 8B 38 */	addi r3, r3, lbl_804A8B38@l
/* 803549AC 0035158C  7C 63 02 14 */	add r3, r3, r0
/* 803549B0 00351590  80 63 00 B8 */	lwz r3, 0xb8(r3)
/* 803549B4 00351594  4E 80 00 20 */	blr 
