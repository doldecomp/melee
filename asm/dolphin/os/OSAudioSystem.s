.include "macros.inc"

.section .text  # 0x80342E94 - 0x803B7240

.global __OSInitAudioSystem
__OSInitAudioSystem:
/* 80344534 00341114  7C 08 02 A6 */	mflr r0
/* 80344538 00341118  90 01 00 04 */	stw r0, 4(r1)
/* 8034453C 0034111C  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 80344540 00341120  BF 21 00 14 */	stmw r25, 0x14(r1)
/* 80344544 00341124  4B FF FF 85 */	bl OSGetArenaHi
/* 80344548 00341128  3C 80 81 00 */	lis r4, 0x8100
/* 8034454C 0034112C  38 A0 00 80 */	li r5, 0x80
/* 80344550 00341130  38 63 FF 80 */	addi r3, r3, -128
/* 80344554 00341134  4B CB EC A1 */	bl memcpy
/* 80344558 00341138  3C 60 80 40 */	lis r3, lbl_80401B70@ha
/* 8034455C 0034113C  38 83 1B 70 */	addi r4, r3, lbl_80401B70@l
/* 80344560 00341140  3C 60 81 00 */	lis r3, 0x8100
/* 80344564 00341144  38 A0 00 80 */	li r5, 0x80
/* 80344568 00341148  4B CB EC 8D */	bl memcpy
/* 8034456C 0034114C  3C 60 81 00 */	lis r3, 0x8100
/* 80344570 00341150  38 80 00 80 */	li r4, 0x80
/* 80344574 00341154  48 00 02 99 */	bl DCFlushRange
/* 80344578 00341158  3C 60 CC 00 */	lis r3, 0xCC005000@ha
/* 8034457C 0034115C  38 63 50 00 */	addi r3, r3, 0xCC005000@l
/* 80344580 00341160  38 00 00 43 */	li r0, 0x43
/* 80344584 00341164  B0 03 00 12 */	sth r0, 0x12(r3)
/* 80344588 00341168  3B E3 00 0A */	addi r31, r3, 0xa
/* 8034458C 0034116C  38 00 08 AC */	li r0, 0x8ac
/* 80344590 00341170  B0 03 00 0A */	sth r0, 0xa(r3)
/* 80344594 00341174  A0 03 00 0A */	lhz r0, 0xa(r3)
/* 80344598 00341178  60 00 00 01 */	ori r0, r0, 1
/* 8034459C 0034117C  B0 03 00 0A */	sth r0, 0xa(r3)
lbl_803445A0:
/* 803445A0 00341180  A0 1F 00 00 */	lhz r0, 0(r31)
/* 803445A4 00341184  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 803445A8 00341188  40 82 FF F8 */	bne lbl_803445A0
/* 803445AC 0034118C  38 00 00 00 */	li r0, 0
/* 803445B0 00341190  3C 80 CC 00 */	lis r4, 0xCC005000@ha
/* 803445B4 00341194  B0 04 50 00 */	sth r0, 0xCC005000@l(r4)
lbl_803445B8:
/* 803445B8 00341198  3B C4 50 00 */	addi r30, r4, 0x5000
/* 803445BC 0034119C  A4 7E 00 04 */	lhzu r3, 4(r30)
/* 803445C0 003411A0  3B A4 50 00 */	addi r29, r4, 0x5000
/* 803445C4 003411A4  A4 1D 00 06 */	lhzu r0, 6(r29)
/* 803445C8 003411A8  50 60 80 1E */	rlwimi r0, r3, 0x10, 0, 0xf
/* 803445CC 003411AC  54 00 00 01 */	rlwinm. r0, r0, 0, 0, 0
/* 803445D0 003411B0  40 82 FF E8 */	bne lbl_803445B8
/* 803445D4 003411B4  3C 60 CC 00 */	lis r3, 0xCC005000@ha
/* 803445D8 003411B8  3C 00 01 00 */	lis r0, 0x100
/* 803445DC 003411BC  3B 63 50 00 */	addi r27, r3, 0xCC005000@l
/* 803445E0 003411C0  94 1B 00 20 */	stwu r0, 0x20(r27)
/* 803445E4 003411C4  38 00 00 00 */	li r0, 0
/* 803445E8 003411C8  3B 43 50 00 */	addi r26, r3, 0x5000
/* 803445EC 003411CC  94 1A 00 24 */	stwu r0, 0x24(r26)
/* 803445F0 003411D0  38 00 00 20 */	li r0, 0x20
/* 803445F4 003411D4  3B 23 50 00 */	addi r25, r3, 0x5000
/* 803445F8 003411D8  94 19 00 28 */	stwu r0, 0x28(r25)
/* 803445FC 003411DC  A0 7F 00 00 */	lhz r3, 0(r31)
/* 80344600 003411E0  48 00 00 08 */	b lbl_80344608
lbl_80344604:
/* 80344604 003411E4  A0 7F 00 00 */	lhz r3, 0(r31)
lbl_80344608:
/* 80344608 003411E8  54 60 06 B5 */	rlwinm. r0, r3, 0, 0x1a, 0x1a
/* 8034460C 003411EC  41 82 FF F8 */	beq lbl_80344604
/* 80344610 003411F0  B0 7F 00 00 */	sth r3, 0(r31)
/* 80344614 003411F4  48 00 7D F5 */	bl OSGetTick
/* 80344618 003411F8  7C 7C 1B 78 */	mr r28, r3
lbl_8034461C:
/* 8034461C 003411FC  48 00 7D ED */	bl OSGetTick
/* 80344620 00341200  7C 1C 18 50 */	subf r0, r28, r3
/* 80344624 00341204  2C 00 08 92 */	cmpwi r0, 0x892
/* 80344628 00341208  41 80 FF F4 */	blt lbl_8034461C
/* 8034462C 0034120C  3C 00 01 00 */	lis r0, 0x100
/* 80344630 00341210  90 1B 00 00 */	stw r0, 0(r27)
/* 80344634 00341214  38 60 00 00 */	li r3, 0
/* 80344638 00341218  38 00 00 20 */	li r0, 0x20
/* 8034463C 0034121C  90 7A 00 00 */	stw r3, 0(r26)
/* 80344640 00341220  90 19 00 00 */	stw r0, 0(r25)
/* 80344644 00341224  A0 7F 00 00 */	lhz r3, 0(r31)
/* 80344648 00341228  48 00 00 08 */	b lbl_80344650
lbl_8034464C:
/* 8034464C 0034122C  A0 7F 00 00 */	lhz r3, 0(r31)
lbl_80344650:
/* 80344650 00341230  54 60 06 B5 */	rlwinm. r0, r3, 0, 0x1a, 0x1a
/* 80344654 00341234  41 82 FF F8 */	beq lbl_8034464C
/* 80344658 00341238  B0 7F 00 00 */	sth r3, 0(r31)
/* 8034465C 0034123C  A0 1F 00 00 */	lhz r0, 0(r31)
/* 80344660 00341240  54 00 05 66 */	rlwinm r0, r0, 0, 0x15, 0x13
/* 80344664 00341244  B0 1F 00 00 */	sth r0, 0(r31)
lbl_80344668:
/* 80344668 00341248  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8034466C 0034124C  54 00 05 6B */	rlwinm. r0, r0, 0, 0x15, 0x15
/* 80344670 00341250  40 82 FF F8 */	bne lbl_80344668
/* 80344674 00341254  A0 1F 00 00 */	lhz r0, 0(r31)
/* 80344678 00341258  54 00 07 B8 */	rlwinm r0, r0, 0, 0x1e, 0x1c
/* 8034467C 0034125C  B0 1F 00 00 */	sth r0, 0(r31)
/* 80344680 00341260  A0 1E 00 00 */	lhz r0, 0(r30)
/* 80344684 00341264  48 00 00 08 */	b lbl_8034468C
lbl_80344688:
/* 80344688 00341268  A0 1E 00 00 */	lhz r0, 0(r30)
lbl_8034468C:
/* 8034468C 0034126C  54 05 04 3E */	clrlwi r5, r0, 0x10
/* 80344690 00341270  54 00 04 21 */	rlwinm. r0, r0, 0, 0x10, 0x10
/* 80344694 00341274  41 82 FF F4 */	beq lbl_80344688
/* 80344698 00341278  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8034469C 0034127C  A0 9D 00 00 */	lhz r4, 0(r29)
/* 803446A0 00341280  60 00 00 04 */	ori r0, r0, 4
/* 803446A4 00341284  B0 1F 00 00 */	sth r0, 0(r31)
/* 803446A8 00341288  38 00 08 AC */	li r0, 0x8ac
/* 803446AC 0034128C  B0 1F 00 00 */	sth r0, 0(r31)
/* 803446B0 00341290  A0 1F 00 00 */	lhz r0, 0(r31)
/* 803446B4 00341294  60 00 00 01 */	ori r0, r0, 1
/* 803446B8 00341298  B0 1F 00 00 */	sth r0, 0(r31)
lbl_803446BC:
/* 803446BC 0034129C  A0 1F 00 00 */	lhz r0, 0(r31)
/* 803446C0 003412A0  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 803446C4 003412A4  40 82 FF F8 */	bne lbl_803446BC
/* 803446C8 003412A8  4B FF FE 01 */	bl OSGetArenaHi
/* 803446CC 003412AC  38 83 FF 80 */	addi r4, r3, -128
/* 803446D0 003412B0  3C 60 81 00 */	lis r3, 0x8100
/* 803446D4 003412B4  38 A0 00 80 */	li r5, 0x80
/* 803446D8 003412B8  4B CB EB 1D */	bl memcpy
/* 803446DC 003412BC  BB 21 00 14 */	lmw r25, 0x14(r1)
/* 803446E0 003412C0  80 01 00 34 */	lwz r0, 0x34(r1)
/* 803446E4 003412C4  38 21 00 30 */	addi r1, r1, 0x30
/* 803446E8 003412C8  7C 08 03 A6 */	mtlr r0
/* 803446EC 003412CC  4E 80 00 20 */	blr 

.global __OSStopAudioSystem
__OSStopAudioSystem:
/* 803446F0 003412D0  7C 08 02 A6 */	mflr r0
/* 803446F4 003412D4  3C 60 CC 00 */	lis r3, 0xCC005000@ha
/* 803446F8 003412D8  90 01 00 04 */	stw r0, 4(r1)
/* 803446FC 003412DC  38 00 08 04 */	li r0, 0x804
/* 80344700 003412E0  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80344704 003412E4  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80344708 003412E8  3B E3 50 00 */	addi r31, r3, 0xCC005000@l
/* 8034470C 003412EC  38 63 50 00 */	addi r3, r3, 0x5000
/* 80344710 003412F0  93 C1 00 08 */	stw r30, 8(r1)
/* 80344714 003412F4  B0 1F 00 0A */	sth r0, 0xa(r31)
/* 80344718 003412F8  A0 03 00 36 */	lhz r0, 0x36(r3)
/* 8034471C 003412FC  54 00 04 5E */	rlwinm r0, r0, 0, 0x11, 0xf
/* 80344720 00341300  B0 03 00 36 */	sth r0, 0x36(r3)
/* 80344724 00341304  A4 1F 00 0A */	lhzu r0, 0xa(r31)
/* 80344728 00341308  48 00 00 08 */	b lbl_80344730
lbl_8034472C:
/* 8034472C 0034130C  A0 1F 00 00 */	lhz r0, 0(r31)
lbl_80344730:
/* 80344730 00341310  54 00 05 6B */	rlwinm. r0, r0, 0, 0x15, 0x15
/* 80344734 00341314  40 82 FF F8 */	bne lbl_8034472C
/* 80344738 00341318  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8034473C 0034131C  48 00 00 08 */	b lbl_80344744
lbl_80344740:
/* 80344740 00341320  A0 1F 00 00 */	lhz r0, 0(r31)
lbl_80344744:
/* 80344744 00341324  54 00 05 AD */	rlwinm. r0, r0, 0, 0x16, 0x16
/* 80344748 00341328  40 82 FF F8 */	bne lbl_80344740
/* 8034474C 0034132C  38 00 08 AC */	li r0, 0x8ac
/* 80344750 00341330  3C 60 CC 00 */	lis r3, 0xCC005000@ha
/* 80344754 00341334  B0 1F 00 00 */	sth r0, 0(r31)
/* 80344758 00341338  38 00 00 00 */	li r0, 0
/* 8034475C 0034133C  B0 03 50 00 */	sth r0, 0xCC005000@l(r3)
/* 80344760 00341340  38 83 50 00 */	addi r4, r3, 0x5000
lbl_80344764:
/* 80344764 00341344  A0 64 00 04 */	lhz r3, 4(r4)
/* 80344768 00341348  A0 04 00 06 */	lhz r0, 6(r4)
/* 8034476C 0034134C  50 60 80 1E */	rlwimi r0, r3, 0x10, 0, 0xf
/* 80344770 00341350  54 00 00 01 */	rlwinm. r0, r0, 0, 0, 0
/* 80344774 00341354  40 82 FF F0 */	bne lbl_80344764
/* 80344778 00341358  48 00 7C 91 */	bl OSGetTick
/* 8034477C 0034135C  7C 7E 1B 78 */	mr r30, r3
lbl_80344780:
/* 80344780 00341360  48 00 7C 89 */	bl OSGetTick
/* 80344784 00341364  7C 1E 18 50 */	subf r0, r30, r3
/* 80344788 00341368  2C 00 00 2C */	cmpwi r0, 0x2c
/* 8034478C 0034136C  41 80 FF F4 */	blt lbl_80344780
/* 80344790 00341370  A0 1F 00 00 */	lhz r0, 0(r31)
/* 80344794 00341374  60 00 00 01 */	ori r0, r0, 1
/* 80344798 00341378  B0 1F 00 00 */	sth r0, 0(r31)
/* 8034479C 0034137C  A0 1F 00 00 */	lhz r0, 0(r31)
/* 803447A0 00341380  48 00 00 08 */	b lbl_803447A8
lbl_803447A4:
/* 803447A4 00341384  A0 1F 00 00 */	lhz r0, 0(r31)
lbl_803447A8:
/* 803447A8 00341388  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 803447AC 0034138C  40 82 FF F8 */	bne lbl_803447A4
/* 803447B0 00341390  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803447B4 00341394  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803447B8 00341398  83 C1 00 08 */	lwz r30, 8(r1)
/* 803447BC 0034139C  7C 08 03 A6 */	mtlr r0
/* 803447C0 003413A0  38 21 00 10 */	addi r1, r1, 0x10
/* 803447C4 003413A4  4E 80 00 20 */	blr 


.section .data
    .balign 8
.global lbl_80401B70
lbl_80401B70:
    .4byte 0x029F0010
    .4byte 0x029F0033
    .4byte 0x029F0034
    .4byte 0x029F0035
    .4byte 0x029F0036
    .4byte 0x029F0037
    .4byte 0x029F0038
    .4byte 0x029F0039
    .4byte 0x12061203
    .4byte 0x12041205
    .4byte 0x00808000
    .4byte 0x0088FFFF
    .4byte 0x00841000
    .4byte 0x0064001D
    .4byte 0x02180000
    .4byte 0x81001C1E
    .4byte 0x00441B1E
    .4byte 0x00840800
    .4byte 0x00640027
    .4byte 0x191E0000
    .4byte 0x00DEFFFC
    .4byte 0x02A08000
    .4byte 0x029C0028
    .4byte 0x16FC0054
    .4byte 0x16FD4348
    .4byte 0x002102FF
    .4byte 0x02FF02FF
    .4byte 0x02FF02FF
    .4byte 0x02FF02FF
    .4byte NULL
    .4byte NULL
    .4byte NULL
