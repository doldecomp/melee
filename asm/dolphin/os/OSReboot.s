.include "macros.inc"
.file "OSReboot.c"

# 0x00000000 - 0x00000218
.text
.balign 4

.fn Run, global
/* 00000000 00000040  7C 08 02 A6 */	mflr r0
/* 00000004 00000044  90 01 00 04 */	stw r0, 0x4(r1)
/* 00000008 00000048  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 0000000C 0000004C  93 E1 00 14 */	stw r31, 0x14(r1)
/* 00000010 00000050  7C 7F 1B 78 */	mr r31, r3
/* 00000014 00000054  48 00 00 01 */	bl OSDisableInterrupts
/* 00000018 00000058  48 00 00 01 */	bl ICFlashInvalidate
/* 0000001C 0000005C  7C 00 04 AC */	sync
/* 00000020 00000060  4C 00 01 2C */	isync
/* 00000024 00000064  7F E8 03 A6 */	mtlr r31
/* 00000028 00000068  4E 80 00 20 */	blr
/* 0000002C 0000006C  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 00000030 00000070  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 00000034 00000074  38 21 00 18 */	addi r1, r1, 0x18
/* 00000038 00000078  7C 08 03 A6 */	mtlr r0
/* 0000003C 0000007C  4E 80 00 20 */	blr
.endfn Run

.fn Callback, local
/* 00000040 00000080  38 00 00 01 */	li r0, 0x1
/* 00000044 00000084  90 00 00 00 */	stw r0, Prepared@sda21(r0)
/* 00000048 00000088  4E 80 00 20 */	blr
.endfn Callback

.fn __OSReboot, global
/* 0000004C 0000008C  7C 08 02 A6 */	mflr r0
/* 00000050 00000090  90 01 00 04 */	stw r0, 0x4(r1)
/* 00000054 00000094  94 21 FC B8 */	stwu r1, -0x348(r1)
/* 00000058 00000098  93 E1 03 44 */	stw r31, 0x344(r1)
/* 0000005C 0000009C  93 C1 03 40 */	stw r30, 0x340(r1)
/* 00000060 000000A0  93 A1 03 3C */	stw r29, 0x33c(r1)
/* 00000064 000000A4  7C 7D 1B 78 */	mr r29, r3
/* 00000068 000000A8  3C 60 00 00 */	lis r3, Header@ha
/* 0000006C 000000AC  3B C3 00 00 */	addi r30, r3, Header@l
/* 00000070 000000B0  48 00 00 01 */	bl OSDisableInterrupts
/* 00000074 000000B4  80 A0 00 00 */	lwz r5, SaveStart@sda21(r0)
/* 00000078 000000B8  3F E0 81 80 */	lis r31, 0x8180
/* 0000007C 000000BC  38 60 00 00 */	li r3, 0x0
/* 00000080 000000C0  80 00 00 00 */	lwz r0, SaveEnd@sda21(r0)
/* 00000084 000000C4  3C 80 81 30 */	lis r4, 0x8130
/* 00000088 000000C8  38 E0 00 01 */	li r7, 0x1
/* 0000008C 000000CC  93 BF FF FC */	stw r29, -0x4(r31)
/* 00000090 000000D0  3C C0 80 00 */	lis r6, 0x8000
/* 00000094 000000D4  90 7F FF F8 */	stw r3, -0x8(r31)
/* 00000098 000000D8  38 61 00 70 */	addi r3, r1, 0x70
/* 0000009C 000000DC  98 E6 30 E2 */	stb r7, 0x30e2(r6)
/* 000000A0 000000E0  90 A4 DF F0 */	stw r5, -0x2010(r4)
/* 000000A4 000000E4  90 04 DF EC */	stw r0, -0x2014(r4)
/* 000000A8 000000E8  48 00 00 01 */	bl OSClearContext
/* 000000AC 000000EC  38 61 00 70 */	addi r3, r1, 0x70
/* 000000B0 000000F0  48 00 00 01 */	bl OSSetCurrentContext
/* 000000B4 000000F4  48 00 00 01 */	bl DVDInit
/* 000000B8 000000F8  38 60 00 01 */	li r3, 0x1
/* 000000BC 000000FC  48 00 00 01 */	bl DVDSetAutoInvalidation
/* 000000C0 00000100  3C 60 00 00 */	lis r3, Callback@ha
/* 000000C4 00000104  38 63 00 00 */	addi r3, r3, Callback@l
/* 000000C8 00000108  48 00 00 01 */	bl __DVDPrepareResetAsync
/* 000000CC 0000010C  48 00 00 01 */	bl DVDCheckDisk
/* 000000D0 00000110  2C 03 00 00 */	cmpwi r3, 0x0
/* 000000D4 00000114  40 82 00 0C */	bne .L_000000E0
/* 000000D8 00000118  80 7F FF FC */	lwz r3, -0x4(r31)
/* 000000DC 0000011C  48 00 00 01 */	bl __OSDoHotReset
.L_000000E0:
/* 000000E0 00000120  38 60 FF E0 */	li r3, -0x20
/* 000000E4 00000124  48 00 00 01 */	bl __OSMaskInterrupts
/* 000000E8 00000128  38 60 04 00 */	li r3, 0x400
/* 000000EC 0000012C  48 00 00 01 */	bl __OSUnmaskInterrupts
/* 000000F0 00000130  48 00 00 01 */	bl OSEnableInterrupts
/* 000000F4 00000134  48 00 00 04 */	b .L_000000F8
.L_000000F8:
/* 000000F8 00000138  48 00 00 04 */	b .L_000000FC
.L_000000FC:
/* 000000FC 0000013C  80 00 00 00 */	lwz r0, Prepared@sda21(r0)
/* 00000100 00000140  2C 00 00 00 */	cmpwi r0, 0x0
/* 00000104 00000144  41 82 FF F8 */	beq .L_000000FC
/* 00000108 00000148  7F C4 F3 78 */	mr r4, r30
/* 0000010C 0000014C  38 61 00 40 */	addi r3, r1, 0x40
/* 00000110 00000150  38 A0 00 20 */	li r5, 0x20
/* 00000114 00000154  38 C0 24 40 */	li r6, 0x2440
/* 00000118 00000158  38 E0 00 00 */	li r7, 0x0
/* 0000011C 0000015C  48 00 00 01 */	bl DVDReadAbsAsyncForBS
/* 00000120 00000160  3F E0 81 80 */	lis r31, 0x8180
/* 00000124 00000164  48 00 00 04 */	b .L_00000128
.L_00000128:
/* 00000128 00000168  48 00 00 04 */	b .L_0000012C
.L_0000012C:
/* 0000012C 0000016C  80 01 00 4C */	lwz r0, 0x4c(r1)
/* 00000130 00000170  2C 00 00 01 */	cmpwi r0, 0x1
/* 00000134 00000174  41 82 FF F8 */	beq .L_0000012C
/* 00000138 00000178  40 80 00 14 */	bge .L_0000014C
/* 0000013C 0000017C  2C 00 FF FF */	cmpwi r0, -0x1
/* 00000140 00000180  41 82 00 18 */	beq .L_00000158
/* 00000144 00000184  40 80 00 20 */	bge .L_00000164
/* 00000148 00000188  4B FF FF E4 */	b .L_0000012C
.L_0000014C:
/* 0000014C 0000018C  2C 00 00 0C */	cmpwi r0, 0xc
/* 00000150 00000190  40 80 FF DC */	bge .L_0000012C
/* 00000154 00000194  48 00 00 04 */	b .L_00000158
.L_00000158:
/* 00000158 00000198  80 7F FF FC */	lwz r3, -0x4(r31)
/* 0000015C 0000019C  48 00 00 01 */	bl __OSDoHotReset
/* 00000160 000001A0  4B FF FF CC */	b .L_0000012C
.L_00000164:
/* 00000164 000001A4  80 7E 00 18 */	lwz r3, 0x18(r30)
/* 00000168 000001A8  80 9E 00 14 */	lwz r4, 0x14(r30)
/* 0000016C 000001AC  38 03 00 1F */	addi r0, r3, 0x1f
/* 00000170 000001B0  38 84 00 20 */	addi r4, r4, 0x20
/* 00000174 000001B4  54 1E 00 34 */	clrrwi r30, r0, 5
/* 00000178 000001B8  48 00 00 04 */	b .L_0000017C
.L_0000017C:
/* 0000017C 000001BC  48 00 00 04 */	b .L_00000180
.L_00000180:
/* 00000180 000001C0  80 00 00 00 */	lwz r0, Prepared@sda21(r0)
/* 00000184 000001C4  2C 00 00 00 */	cmpwi r0, 0x0
/* 00000188 000001C8  41 82 FF F8 */	beq .L_00000180
/* 0000018C 000001CC  7F C5 F3 78 */	mr r5, r30
/* 00000190 000001D0  38 61 00 10 */	addi r3, r1, 0x10
/* 00000194 000001D4  38 C4 24 40 */	addi r6, r4, 0x2440
/* 00000198 000001D8  3C 80 81 30 */	lis r4, 0x8130
/* 0000019C 000001DC  38 E0 00 00 */	li r7, 0x0
/* 000001A0 000001E0  48 00 00 01 */	bl DVDReadAbsAsyncForBS
/* 000001A4 000001E4  3F E0 81 80 */	lis r31, 0x8180
/* 000001A8 000001E8  48 00 00 04 */	b .L_000001AC
.L_000001AC:
/* 000001AC 000001EC  48 00 00 04 */	b .L_000001B0
.L_000001B0:
/* 000001B0 000001F0  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 000001B4 000001F4  2C 00 00 01 */	cmpwi r0, 0x1
/* 000001B8 000001F8  41 82 FF F8 */	beq .L_000001B0
/* 000001BC 000001FC  40 80 00 14 */	bge .L_000001D0
/* 000001C0 00000200  2C 00 FF FF */	cmpwi r0, -0x1
/* 000001C4 00000204  41 82 00 18 */	beq .L_000001DC
/* 000001C8 00000208  40 80 00 20 */	bge .L_000001E8
/* 000001CC 0000020C  4B FF FF E4 */	b .L_000001B0
.L_000001D0:
/* 000001D0 00000210  2C 00 00 0C */	cmpwi r0, 0xc
/* 000001D4 00000214  40 80 FF DC */	bge .L_000001B0
/* 000001D8 00000218  48 00 00 04 */	b .L_000001DC
.L_000001DC:
/* 000001DC 0000021C  80 7F FF FC */	lwz r3, -0x4(r31)
/* 000001E0 00000220  48 00 00 01 */	bl __OSDoHotReset
/* 000001E4 00000224  4B FF FF CC */	b .L_000001B0
.L_000001E8:
/* 000001E8 00000228  3C 60 81 30 */	lis r3, 0x8130
/* 000001EC 0000022C  7F C4 F3 78 */	mr r4, r30
/* 000001F0 00000230  48 00 00 01 */	bl ICInvalidateRange
/* 000001F4 00000234  3C 60 81 30 */	lis r3, 0x8130
/* 000001F8 00000238  48 00 00 01 */	bl Run
/* 000001FC 0000023C  80 01 03 4C */	lwz r0, 0x34c(r1)
/* 00000200 00000240  83 E1 03 44 */	lwz r31, 0x344(r1)
/* 00000204 00000244  83 C1 03 40 */	lwz r30, 0x340(r1)
/* 00000208 00000248  7C 08 03 A6 */	mtlr r0
/* 0000020C 0000024C  83 A1 03 3C */	lwz r29, 0x33c(r1)
/* 00000210 00000250  38 21 03 48 */	addi r1, r1, 0x348
/* 00000214 00000254  4E 80 00 20 */	blr
.endfn __OSReboot

# 0x00000000 - 0x00000020
.section .bss, "wa", @nobits
.balign 8

.obj Header, local
	.skip 0x20
.endobj Header

# 0x00000000 - 0x00000010
.section .sbss, "wa", @nobits
.balign 8

.obj SaveStart, local
	.skip 0x4
.endobj SaveStart

.obj SaveEnd, local
	.skip 0x4
.endobj SaveEnd

.obj Prepared, local
	.skip 0x4
.endobj Prepared

.obj gap_10_804D739C_sbss, global
.hidden gap_10_804D739C_sbss
	.skip 0x4
.endobj gap_10_804D739C_sbss
