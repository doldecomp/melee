.include "macros.inc"

.section .text  # 0x80005940 - 0x803B7240

.global __THPPrepBitStream
__THPPrepBitStream:
/* 8032F630 0032C210  80 83 00 08 */	lwz r4, 8(r3)
/* 8032F634 0032C214  80 03 00 00 */	lwz r0, 0(r3)
/* 8032F638 0032C218  28 04 00 21 */	cmplwi r4, 0x21
/* 8032F63C 0032C21C  54 05 00 3A */	rlwinm r5, r0, 0, 0, 0x1d
/* 8032F640 0032C220  54 00 07 BE */	clrlwi r0, r0, 0x1e
/* 8032F644 0032C224  41 82 00 18 */	beq lbl_8032F65C
/* 8032F648 0032C228  20 00 00 03 */	subfic r0, r0, 3
/* 8032F64C 0032C22C  54 00 18 38 */	slwi r0, r0, 3
/* 8032F650 0032C230  7C 00 20 50 */	subf r0, r0, r4
/* 8032F654 0032C234  90 03 00 08 */	stw r0, 8(r3)
/* 8032F658 0032C238  48 00 00 10 */	b lbl_8032F668
lbl_8032F65C:
/* 8032F65C 0032C23C  54 04 18 38 */	slwi r4, r0, 3
/* 8032F660 0032C240  38 04 00 01 */	addi r0, r4, 1
/* 8032F664 0032C244  90 03 00 08 */	stw r0, 8(r3)
lbl_8032F668:
/* 8032F668 0032C248  90 A3 00 00 */	stw r5, 0(r3)
/* 8032F66C 0032C24C  38 E3 00 00 */	addi r7, r3, 0
/* 8032F670 0032C250  39 40 00 00 */	li r10, 0
/* 8032F674 0032C254  80 05 00 00 */	lwz r0, 0(r5)
/* 8032F678 0032C258  90 03 00 04 */	stw r0, 4(r3)
lbl_8032F67C:
/* 8032F67C 0032C25C  38 00 00 01 */	li r0, 1
/* 8032F680 0032C260  88 83 00 78 */	lbz r4, 0x78(r3)
/* 8032F684 0032C264  7C 00 50 30 */	slw r0, r0, r10
/* 8032F688 0032C268  7C 80 00 39 */	and. r0, r4, r0
/* 8032F68C 0032C26C  41 82 01 98 */	beq lbl_8032F824
/* 8032F690 0032C270  38 00 00 08 */	li r0, 8
/* 8032F694 0032C274  7C 09 03 A6 */	mtctr r0
/* 8032F698 0032C278  38 C7 00 00 */	addi r6, r7, 0
/* 8032F69C 0032C27C  39 60 00 00 */	li r11, 0
lbl_8032F6A0:
/* 8032F6A0 0032C280  38 00 00 FF */	li r0, 0xff
/* 8032F6A4 0032C284  98 06 00 88 */	stb r0, 0x88(r6)
/* 8032F6A8 0032C288  39 80 00 00 */	li r12, 0
/* 8032F6AC 0032C28C  48 00 00 44 */	b lbl_8032F6F0
lbl_8032F6B0:
/* 8032F6B0 0032C290  55 80 10 3A */	slwi r0, r12, 2
/* 8032F6B4 0032C294  7D 27 02 14 */	add r9, r7, r0
/* 8032F6B8 0032C298  20 8C 00 04 */	subfic r4, r12, 4
/* 8032F6BC 0032C29C  80 09 00 D0 */	lwz r0, 0xd0(r9)
/* 8032F6C0 0032C2A0  7D 68 24 30 */	srw r8, r11, r4
/* 8032F6C4 0032C2A4  7C 08 00 00 */	cmpw r8, r0
/* 8032F6C8 0032C2A8  41 81 00 24 */	bgt lbl_8032F6EC
/* 8032F6CC 0032C2AC  80 A7 00 C8 */	lwz r5, 0xc8(r7)
/* 8032F6D0 0032C2B0  38 0C 00 01 */	addi r0, r12, 1
/* 8032F6D4 0032C2B4  80 89 01 18 */	lwz r4, 0x118(r9)
/* 8032F6D8 0032C2B8  39 80 00 63 */	li r12, 0x63
/* 8032F6DC 0032C2BC  7C 84 2A 14 */	add r4, r4, r5
/* 8032F6E0 0032C2C0  7C 88 20 AE */	lbzx r4, r8, r4
/* 8032F6E4 0032C2C4  98 86 00 88 */	stb r4, 0x88(r6)
/* 8032F6E8 0032C2C8  98 06 00 A8 */	stb r0, 0xa8(r6)
lbl_8032F6EC:
/* 8032F6EC 0032C2CC  39 8C 00 01 */	addi r12, r12, 1
lbl_8032F6F0:
/* 8032F6F0 0032C2D0  28 0C 00 05 */	cmplwi r12, 5
/* 8032F6F4 0032C2D4  41 80 FF BC */	blt lbl_8032F6B0
/* 8032F6F8 0032C2D8  38 00 00 FF */	li r0, 0xff
/* 8032F6FC 0032C2DC  98 06 00 89 */	stb r0, 0x89(r6)
/* 8032F700 0032C2E0  39 80 00 00 */	li r12, 0
/* 8032F704 0032C2E4  38 C6 00 01 */	addi r6, r6, 1
/* 8032F708 0032C2E8  39 6B 00 01 */	addi r11, r11, 1
/* 8032F70C 0032C2EC  48 00 00 44 */	b lbl_8032F750
lbl_8032F710:
/* 8032F710 0032C2F0  55 80 10 3A */	slwi r0, r12, 2
/* 8032F714 0032C2F4  7D 27 02 14 */	add r9, r7, r0
/* 8032F718 0032C2F8  20 8C 00 04 */	subfic r4, r12, 4
/* 8032F71C 0032C2FC  80 09 00 D0 */	lwz r0, 0xd0(r9)
/* 8032F720 0032C300  7D 68 24 30 */	srw r8, r11, r4
/* 8032F724 0032C304  7C 08 00 00 */	cmpw r8, r0
/* 8032F728 0032C308  41 81 00 24 */	bgt lbl_8032F74C
/* 8032F72C 0032C30C  80 A7 00 C8 */	lwz r5, 0xc8(r7)
/* 8032F730 0032C310  38 0C 00 01 */	addi r0, r12, 1
/* 8032F734 0032C314  80 89 01 18 */	lwz r4, 0x118(r9)
/* 8032F738 0032C318  39 80 00 63 */	li r12, 0x63
/* 8032F73C 0032C31C  7C 84 2A 14 */	add r4, r4, r5
/* 8032F740 0032C320  7C 88 20 AE */	lbzx r4, r8, r4
/* 8032F744 0032C324  98 86 00 88 */	stb r4, 0x88(r6)
/* 8032F748 0032C328  98 06 00 A8 */	stb r0, 0xa8(r6)
lbl_8032F74C:
/* 8032F74C 0032C32C  39 8C 00 01 */	addi r12, r12, 1
lbl_8032F750:
/* 8032F750 0032C330  28 0C 00 05 */	cmplwi r12, 5
/* 8032F754 0032C334  41 80 FF BC */	blt lbl_8032F710
/* 8032F758 0032C338  38 00 00 FF */	li r0, 0xff
/* 8032F75C 0032C33C  98 06 00 89 */	stb r0, 0x89(r6)
/* 8032F760 0032C340  39 80 00 00 */	li r12, 0
/* 8032F764 0032C344  38 C6 00 01 */	addi r6, r6, 1
/* 8032F768 0032C348  39 6B 00 01 */	addi r11, r11, 1
/* 8032F76C 0032C34C  48 00 00 44 */	b lbl_8032F7B0
lbl_8032F770:
/* 8032F770 0032C350  55 80 10 3A */	slwi r0, r12, 2
/* 8032F774 0032C354  7D 27 02 14 */	add r9, r7, r0
/* 8032F778 0032C358  20 8C 00 04 */	subfic r4, r12, 4
/* 8032F77C 0032C35C  80 09 00 D0 */	lwz r0, 0xd0(r9)
/* 8032F780 0032C360  7D 68 24 30 */	srw r8, r11, r4
/* 8032F784 0032C364  7C 08 00 00 */	cmpw r8, r0
/* 8032F788 0032C368  41 81 00 24 */	bgt lbl_8032F7AC
/* 8032F78C 0032C36C  80 A7 00 C8 */	lwz r5, 0xc8(r7)
/* 8032F790 0032C370  38 0C 00 01 */	addi r0, r12, 1
/* 8032F794 0032C374  80 89 01 18 */	lwz r4, 0x118(r9)
/* 8032F798 0032C378  39 80 00 63 */	li r12, 0x63
/* 8032F79C 0032C37C  7C 84 2A 14 */	add r4, r4, r5
/* 8032F7A0 0032C380  7C 88 20 AE */	lbzx r4, r8, r4
/* 8032F7A4 0032C384  98 86 00 88 */	stb r4, 0x88(r6)
/* 8032F7A8 0032C388  98 06 00 A8 */	stb r0, 0xa8(r6)
lbl_8032F7AC:
/* 8032F7AC 0032C38C  39 8C 00 01 */	addi r12, r12, 1
lbl_8032F7B0:
/* 8032F7B0 0032C390  28 0C 00 05 */	cmplwi r12, 5
/* 8032F7B4 0032C394  41 80 FF BC */	blt lbl_8032F770
/* 8032F7B8 0032C398  38 00 00 FF */	li r0, 0xff
/* 8032F7BC 0032C39C  98 06 00 89 */	stb r0, 0x89(r6)
/* 8032F7C0 0032C3A0  39 80 00 00 */	li r12, 0
/* 8032F7C4 0032C3A4  38 C6 00 01 */	addi r6, r6, 1
/* 8032F7C8 0032C3A8  39 6B 00 01 */	addi r11, r11, 1
/* 8032F7CC 0032C3AC  48 00 00 44 */	b lbl_8032F810
lbl_8032F7D0:
/* 8032F7D0 0032C3B0  55 80 10 3A */	slwi r0, r12, 2
/* 8032F7D4 0032C3B4  7D 27 02 14 */	add r9, r7, r0
/* 8032F7D8 0032C3B8  20 8C 00 04 */	subfic r4, r12, 4
/* 8032F7DC 0032C3BC  80 09 00 D0 */	lwz r0, 0xd0(r9)
/* 8032F7E0 0032C3C0  7D 68 24 30 */	srw r8, r11, r4
/* 8032F7E4 0032C3C4  7C 08 00 00 */	cmpw r8, r0
/* 8032F7E8 0032C3C8  41 81 00 24 */	bgt lbl_8032F80C
/* 8032F7EC 0032C3CC  80 A7 00 C8 */	lwz r5, 0xc8(r7)
/* 8032F7F0 0032C3D0  38 0C 00 01 */	addi r0, r12, 1
/* 8032F7F4 0032C3D4  80 89 01 18 */	lwz r4, 0x118(r9)
/* 8032F7F8 0032C3D8  39 80 00 63 */	li r12, 0x63
/* 8032F7FC 0032C3DC  7C 84 2A 14 */	add r4, r4, r5
/* 8032F800 0032C3E0  7C 88 20 AE */	lbzx r4, r8, r4
/* 8032F804 0032C3E4  98 86 00 88 */	stb r4, 0x88(r6)
/* 8032F808 0032C3E8  98 06 00 A8 */	stb r0, 0xa8(r6)
lbl_8032F80C:
/* 8032F80C 0032C3EC  39 8C 00 01 */	addi r12, r12, 1
lbl_8032F810:
/* 8032F810 0032C3F0  28 0C 00 05 */	cmplwi r12, 5
/* 8032F814 0032C3F4  41 80 FF BC */	blt lbl_8032F7D0
/* 8032F818 0032C3F8  38 C6 00 01 */	addi r6, r6, 1
/* 8032F81C 0032C3FC  39 6B 00 01 */	addi r11, r11, 1
/* 8032F820 0032C400  42 00 FE 80 */	bdnz lbl_8032F6A0
lbl_8032F824:
/* 8032F824 0032C404  39 4A 00 01 */	addi r10, r10, 1
/* 8032F828 0032C408  28 0A 00 04 */	cmplwi r10, 4
/* 8032F82C 0032C40C  38 E7 00 EC */	addi r7, r7, 0xec
/* 8032F830 0032C410  41 80 FE 4C */	blt lbl_8032F67C
/* 8032F834 0032C414  88 A3 08 3D */	lbz r5, 0x83d(r3)
/* 8032F838 0032C418  88 03 08 69 */	lbz r0, 0x869(r3)
/* 8032F83C 0032C41C  88 83 08 95 */	lbz r4, 0x895(r3)
/* 8032F840 0032C420  54 A6 08 3C */	slwi r6, r5, 1
/* 8032F844 0032C424  89 03 08 68 */	lbz r8, 0x868(r3)
/* 8032F848 0032C428  54 05 08 3C */	slwi r5, r0, 1
/* 8032F84C 0032C42C  88 E3 08 94 */	lbz r7, 0x894(r3)
/* 8032F850 0032C430  88 03 08 3C */	lbz r0, 0x83c(r3)
/* 8032F854 0032C434  54 84 08 3C */	slwi r4, r4, 1
/* 8032F858 0032C438  55 08 08 3C */	slwi r8, r8, 1
/* 8032F85C 0032C43C  54 E7 08 3C */	slwi r7, r7, 1
/* 8032F860 0032C440  38 C6 00 01 */	addi r6, r6, 1
/* 8032F864 0032C444  38 A5 00 01 */	addi r5, r5, 1
/* 8032F868 0032C448  38 84 00 01 */	addi r4, r4, 1
/* 8032F86C 0032C44C  54 00 08 3C */	slwi r0, r0, 1
/* 8032F870 0032C450  1D 20 00 EC */	mulli r9, r0, 0xec
/* 8032F874 0032C454  1D 08 00 EC */	mulli r8, r8, 0xec
/* 8032F878 0032C458  1C E7 00 EC */	mulli r7, r7, 0xec
/* 8032F87C 0032C45C  1C C6 00 EC */	mulli r6, r6, 0xec
/* 8032F880 0032C460  1C A5 00 EC */	mulli r5, r5, 0xec
/* 8032F884 0032C464  1C 84 00 EC */	mulli r4, r4, 0xec
/* 8032F888 0032C468  39 29 00 88 */	addi r9, r9, 0x88
/* 8032F88C 0032C46C  39 08 00 88 */	addi r8, r8, 0x88
/* 8032F890 0032C470  38 E7 00 88 */	addi r7, r7, 0x88
/* 8032F894 0032C474  38 C6 00 88 */	addi r6, r6, 0x88
/* 8032F898 0032C478  38 A5 00 88 */	addi r5, r5, 0x88
/* 8032F89C 0032C47C  38 04 00 88 */	addi r0, r4, 0x88
/* 8032F8A0 0032C480  7D 23 4A 14 */	add r9, r3, r9
/* 8032F8A4 0032C484  7C 83 42 14 */	add r4, r3, r8
/* 8032F8A8 0032C488  91 2D BA 60 */	stw r9, Ydchuff@sda21(r13)
/* 8032F8AC 0032C48C  7C E3 3A 14 */	add r7, r3, r7
/* 8032F8B0 0032C490  7C C3 32 14 */	add r6, r3, r6
/* 8032F8B4 0032C494  90 8D BA 80 */	stw r4, Udchuff@sda21(r13)
/* 8032F8B8 0032C498  7C 83 2A 14 */	add r4, r3, r5
/* 8032F8BC 0032C49C  7C 03 02 14 */	add r0, r3, r0
/* 8032F8C0 0032C4A0  90 ED BA A0 */	stw r7, Vdchuff@sda21(r13)
/* 8032F8C4 0032C4A4  90 CD BA C0 */	stw r6, Yachuff@sda21(r13)
/* 8032F8C8 0032C4A8  90 8D BA E0 */	stw r4, Uachuff@sda21(r13)
/* 8032F8CC 0032C4AC  90 0D BB 00 */	stw r0, Vachuff@sda21(r13)
/* 8032F8D0 0032C4B0  4E 80 00 20 */	blr
