.include "macros.inc"

.section .text

LObjRelease:
/* 803674B4 00364094  7C 08 02 A6 */	mflr r0
/* 803674B8 00364098  90 01 00 04 */	stw r0, 4(r1)
/* 803674BC 0036409C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 803674C0 003640A0  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 803674C4 003640A4  7C 7F 1B 78 */	mr r31, r3
/* 803674C8 003640A8  93 C1 00 18 */	stw r30, 0x18(r1)
/* 803674CC 003640AC  80 63 00 48 */	lwz r3, 0x48(r3)
/* 803674D0 003640B0  4B FF CF FD */	bl HSD_AObjRemove
/* 803674D4 003640B4  28 1F 00 00 */	cmplwi r31, 0
/* 803674D8 003640B8  41 82 00 0C */	beq .L_803674E4
/* 803674DC 003640BC  83 DF 00 18 */	lwz r30, 0x18(r31)
/* 803674E0 003640C0  48 00 00 08 */	b .L_803674E8
.L_803674E4:
/* 803674E4 003640C4  3B C0 00 00 */	li r30, 0
.L_803674E8:
/* 803674E8 003640C8  28 1E 00 00 */	cmplwi r30, 0
/* 803674EC 003640CC  41 82 00 78 */	beq .L_80367564
/* 803674F0 003640D0  3C 60 00 01 */	lis r3, 0x0000FFFF@ha
/* 803674F4 003640D4  A0 9E 00 04 */	lhz r4, 4(r30)
/* 803674F8 003640D8  38 03 FF FF */	addi r0, r3, 0x0000FFFF@l
/* 803674FC 003640DC  54 00 04 3E */	clrlwi r0, r0, 0x10
/* 80367500 003640E0  7C 04 00 50 */	subf r0, r4, r0
/* 80367504 003640E4  7C 00 00 34 */	cntlzw r0, r0
/* 80367508 003640E8  54 00 D9 7F */	rlwinm. r0, r0, 0x1b, 5, 0x1f
/* 8036750C 003640EC  38 BE 00 04 */	addi r5, r30, 4
/* 80367510 003640F0  41 82 00 08 */	beq .L_80367518
/* 80367514 003640F4  48 00 00 18 */	b .L_8036752C
.L_80367518:
/* 80367518 003640F8  38 64 FF FF */	addi r3, r4, -1
/* 8036751C 003640FC  7C 04 00 D0 */	neg r0, r4
/* 80367520 00364100  B0 65 00 00 */	sth r3, 0(r5)
/* 80367524 00364104  7C 00 00 34 */	cntlzw r0, r0
/* 80367528 00364108  54 00 D9 7E */	srwi r0, r0, 5
.L_8036752C:
/* 8036752C 0036410C  2C 00 00 00 */	cmpwi r0, 0
/* 80367530 00364110  41 82 00 34 */	beq .L_80367564
/* 80367534 00364114  28 1E 00 00 */	cmplwi r30, 0
/* 80367538 00364118  41 82 00 2C */	beq .L_80367564
/* 8036753C 0036411C  80 9E 00 00 */	lwz r4, 0(r30)
/* 80367540 00364120  7F C3 F3 78 */	mr r3, r30
/* 80367544 00364124  81 84 00 30 */	lwz r12, 0x30(r4)
/* 80367548 00364128  7D 88 03 A6 */	mtlr r12
/* 8036754C 0036412C  4E 80 00 21 */	blrl
/* 80367550 00364130  80 9E 00 00 */	lwz r4, 0(r30)
/* 80367554 00364134  7F C3 F3 78 */	mr r3, r30
/* 80367558 00364138  81 84 00 34 */	lwz r12, 0x34(r4)
/* 8036755C 0036413C  7D 88 03 A6 */	mtlr r12
/* 80367560 00364140  4E 80 00 21 */	blrl
.L_80367564:
/* 80367564 00364144  28 1F 00 00 */	cmplwi r31, 0
/* 80367568 00364148  41 82 00 0C */	beq .L_80367574
/* 8036756C 0036414C  83 DF 00 1C */	lwz r30, 0x1c(r31)
/* 80367570 00364150  48 00 00 08 */	b .L_80367578
.L_80367574:
/* 80367574 00364154  3B C0 00 00 */	li r30, 0
.L_80367578:
/* 80367578 00364158  28 1E 00 00 */	cmplwi r30, 0
/* 8036757C 0036415C  41 82 00 78 */	beq .L_803675F4
/* 80367580 00364160  3C 60 00 01 */	lis r3, 0x0000FFFF@ha
/* 80367584 00364164  A0 9E 00 04 */	lhz r4, 4(r30)
/* 80367588 00364168  38 03 FF FF */	addi r0, r3, 0x0000FFFF@l
/* 8036758C 0036416C  54 00 04 3E */	clrlwi r0, r0, 0x10
/* 80367590 00364170  7C 04 00 50 */	subf r0, r4, r0
/* 80367594 00364174  7C 00 00 34 */	cntlzw r0, r0
/* 80367598 00364178  54 00 D9 7F */	rlwinm. r0, r0, 0x1b, 5, 0x1f
/* 8036759C 0036417C  38 BE 00 04 */	addi r5, r30, 4
/* 803675A0 00364180  41 82 00 08 */	beq .L_803675A8
/* 803675A4 00364184  48 00 00 18 */	b .L_803675BC
.L_803675A8:
/* 803675A8 00364188  38 64 FF FF */	addi r3, r4, -1
/* 803675AC 0036418C  7C 04 00 D0 */	neg r0, r4
/* 803675B0 00364190  B0 65 00 00 */	sth r3, 0(r5)
/* 803675B4 00364194  7C 00 00 34 */	cntlzw r0, r0
/* 803675B8 00364198  54 00 D9 7E */	srwi r0, r0, 5
.L_803675BC:
/* 803675BC 0036419C  2C 00 00 00 */	cmpwi r0, 0
/* 803675C0 003641A0  41 82 00 34 */	beq .L_803675F4
/* 803675C4 003641A4  28 1E 00 00 */	cmplwi r30, 0
/* 803675C8 003641A8  41 82 00 2C */	beq .L_803675F4
/* 803675CC 003641AC  80 9E 00 00 */	lwz r4, 0(r30)
/* 803675D0 003641B0  7F C3 F3 78 */	mr r3, r30
/* 803675D4 003641B4  81 84 00 30 */	lwz r12, 0x30(r4)
/* 803675D8 003641B8  7D 88 03 A6 */	mtlr r12
/* 803675DC 003641BC  4E 80 00 21 */	blrl
/* 803675E0 003641C0  80 9E 00 00 */	lwz r4, 0(r30)
/* 803675E4 003641C4  7F C3 F3 78 */	mr r3, r30
/* 803675E8 003641C8  81 84 00 34 */	lwz r12, 0x34(r4)
/* 803675EC 003641CC  7D 88 03 A6 */	mtlr r12
/* 803675F0 003641D0  4E 80 00 21 */	blrl
.L_803675F4:
/* 803675F4 003641D4  3C 60 80 40 */	lis r3, hsdLObj@ha
/* 803675F8 003641D8  38 63 60 C0 */	addi r3, r3, hsdLObj@l
/* 803675FC 003641DC  80 83 00 14 */	lwz r4, 0x14(r3)
/* 80367600 003641E0  7F E3 FB 78 */	mr r3, r31
/* 80367604 003641E4  81 84 00 30 */	lwz r12, 0x30(r4)
/* 80367608 003641E8  7D 88 03 A6 */	mtlr r12
/* 8036760C 003641EC  4E 80 00 21 */	blrl
/* 80367610 003641F0  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80367614 003641F4  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80367618 003641F8  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8036761C 003641FC  38 21 00 20 */	addi r1, r1, 0x20
/* 80367620 00364200  7C 08 03 A6 */	mtlr r0
/* 80367624 00364204  4E 80 00 20 */	blr

LObjAmnesia:
/* 80367628 00364208  7C 08 02 A6 */	mflr r0
/* 8036762C 0036420C  90 01 00 04 */	stw r0, 4(r1)
/* 80367630 00364210  94 21 FF F8 */	stwu r1, -8(r1)
/* 80367634 00364214  80 0D BF 98 */	lwz r0, default_class@sda21(r13)
/* 80367638 00364218  7C 03 00 40 */	cmplw r3, r0
/* 8036763C 0036421C  40 82 00 0C */	bne .L_80367648
/* 80367640 00364220  38 00 00 00 */	li r0, 0
/* 80367644 00364224  90 0D BF 98 */	stw r0, default_class@sda21(r13)
.L_80367648:
/* 80367648 00364228  3C 80 80 40 */	lis r4, hsdLObj@ha
/* 8036764C 0036422C  38 04 60 C0 */	addi r0, r4, hsdLObj@l
/* 80367650 00364230  7C 03 00 40 */	cmplw r3, r0
/* 80367654 00364234  40 82 00 0C */	bne .L_80367660
/* 80367658 00364238  38 00 00 00 */	li r0, 0
/* 8036765C 0036423C  90 0D BF 9C */	stw r0, current_lights@sda21(r13)
.L_80367660:
/* 80367660 00364240  3C 80 80 40 */	lis r4, hsdLObj@ha
/* 80367664 00364244  38 84 60 C0 */	addi r4, r4, hsdLObj@l
/* 80367668 00364248  80 84 00 14 */	lwz r4, 0x14(r4)
/* 8036766C 0036424C  81 84 00 38 */	lwz r12, 0x38(r4)
/* 80367670 00364250  7D 88 03 A6 */	mtlr r12
/* 80367674 00364254  4E 80 00 21 */	blrl
/* 80367678 00364258  80 01 00 0C */	lwz r0, 0xc(r1)
/* 8036767C 0036425C  38 21 00 08 */	addi r1, r1, 8
/* 80367680 00364260  7C 08 03 A6 */	mtlr r0
/* 80367684 00364264  4E 80 00 20 */	blr

.global LObjInfoInit
LObjInfoInit:
/* 80367688 00364268  7C 08 02 A6 */	mflr r0
/* 8036768C 0036426C  3C 60 80 40 */	lis r3, hsdLObj@ha
/* 80367690 00364270  90 01 00 04 */	stw r0, 4(r1)
/* 80367694 00364274  38 E0 00 40 */	li r7, 0x40
/* 80367698 00364278  39 00 00 D4 */	li r8, 0xd4
/* 8036769C 0036427C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803676A0 00364280  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803676A4 00364284  3B E3 60 C0 */	addi r31, r3, hsdLObj@l
/* 803676A8 00364288  3C 60 80 40 */	lis r3, hsdObj@ha
/* 803676AC 0036428C  38 83 72 A8 */	addi r4, r3, hsdObj@l
/* 803676B0 00364290  38 7F 00 00 */	addi r3, r31, 0
/* 803676B4 00364294  38 BF 01 38 */	addi r5, r31, 0x138
/* 803676B8 00364298  38 DF 01 50 */	addi r6, r31, 0x150
/* 803676BC 0036429C  48 01 A5 5D */	bl hsdInitClassInfo
/* 803676C0 003642A0  3C 60 80 36 */	lis r3, LObjRelease@ha
/* 803676C4 003642A4  38 03 74 B4 */	addi r0, r3, LObjRelease@l
/* 803676C8 003642A8  3C 60 80 36 */	lis r3, LObjAmnesia@ha
/* 803676CC 003642AC  90 1F 00 30 */	stw r0, 0x30(r31)
/* 803676D0 003642B0  38 03 76 28 */	addi r0, r3, LObjAmnesia@l
/* 803676D4 003642B4  3C 60 80 36 */	lis r3, LObjLoad@ha
/* 803676D8 003642B8  90 1F 00 38 */	stw r0, 0x38(r31)
/* 803676DC 003642BC  38 03 6E A8 */	addi r0, r3, LObjLoad@l
/* 803676E0 003642C0  90 1F 00 3C */	stw r0, 0x3c(r31)
/* 803676E4 003642C4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803676E8 003642C8  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803676EC 003642CC  38 21 00 10 */	addi r1, r1, 0x10
/* 803676F0 003642D0  7C 08 03 A6 */	mtlr r0
/* 803676F4 003642D4  4E 80 00 20 */	blr


.section .sdata
    .balign 8
.global HSD_LObj_804D5D18
HSD_LObj_804D5D18:
    .asciz "lobj.c"
    .balign 4
.global HSD_LObj_804D5D20
HSD_LObj_804D5D20:
    .asciz "0"
    .balign 4
.global HSD_LObj_804D5D24
HSD_LObj_804D5D24:
    .asciz "lobj"
    .balign 4
.global HSD_LObj_804D5D2C
HSD_LObj_804D5D2C:
    .asciz "lobj.h"
    .balign 4
.global HSD_LObj_804D5D34
HSD_LObj_804D5D34:
    .asciz "new"
    .balign 4
.global HSD_LObj_804D5D38
HSD_LObj_804D5D38:
    .4byte NULL
.global HSD_LObj_804D5D3C
HSD_LObj_804D5D3C:
    .asciz "*p"
    .balign 4


.section .sbss
    .balign 8
.global current_lights
current_lights:
    .skip 0x4
.global nb_active_lights
nb_active_lights:
    .skip 0x4
.global lightmask_diffuse
lightmask_diffuse:
    .skip 0x4
.global lightmask_specular
lightmask_specular:
    .skip 0x4
.global lightmask_attnfunc
lightmask_attnfunc:
    .skip 0x4
.global lightmask_alpha
lightmask_alpha:
    .skip 0x4
