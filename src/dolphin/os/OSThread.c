#include <dolphin/os/OSInterrupt.h>
#include <dolphin/os/OSMutex.h>
#include <dolphin/os/OSThread.h>

extern unk_t _stack_end;
extern unk_t _db_stack_end;
extern unk_t lbl_804A7FB8;
extern unk_t lbl_804D73D8;
extern unk_t lbl_804D73DC;
extern unk_t lbl_804D73E0;

#pragma push
asm void __OSThreadInit(void)
{ // clang-format off
    nofralloc
/* 8034AC04 003477E4  7C 08 02 A6 */	mflr r0
/* 8034AC08 003477E8  3C 60 80 4A */	lis r3, lbl_804A7FB8@ha
/* 8034AC0C 003477EC  90 01 00 04 */	stw r0, 4(r1)
/* 8034AC10 003477F0  38 00 00 02 */	li r0, 2
/* 8034AC14 003477F4  38 80 00 10 */	li r4, 0x10
/* 8034AC18 003477F8  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8034AC1C 003477FC  BF 41 00 08 */	stmw r26, 8(r1)
/* 8034AC20 00347800  3B 83 7F B8 */	addi r28, r3, lbl_804A7FB8@l
/* 8034AC24 00347804  3B FC 04 10 */	addi r31, r28, 0x410
/* 8034AC28 00347808  3B A0 00 00 */	li r29, 0
/* 8034AC2C 0034780C  38 7F 02 E8 */	addi r3, r31, 0x2e8
/* 8034AC30 00347810  B0 1C 06 D8 */	sth r0, 0x6d8(r28)
/* 8034AC34 00347814  38 00 00 01 */	li r0, 1
/* 8034AC38 00347818  B0 1C 06 DA */	sth r0, 0x6da(r28)
/* 8034AC3C 0034781C  38 00 FF FF */	li r0, -1
/* 8034AC40 00347820  90 9C 06 E4 */	stw r4, 0x6e4(r28)
/* 8034AC44 00347824  90 9C 06 E0 */	stw r4, 0x6e0(r28)
/* 8034AC48 00347828  93 BC 06 DC */	stw r29, 0x6dc(r28)
/* 8034AC4C 0034782C  90 1C 06 E8 */	stw r0, 0x6e8(r28)
/* 8034AC50 00347830  93 BC 07 00 */	stw r29, 0x700(r28)
/* 8034AC54 00347834  48 00 00 D9 */	bl OSInitThreadQueue
/* 8034AC58 00347838  93 BC 07 08 */	stw r29, 0x708(r28)
/* 8034AC5C 0034783C  3F C0 80 00 */	lis r30, 0x800000D8@ha
/* 8034AC60 00347840  38 7F 00 00 */	addi r3, r31, 0
/* 8034AC64 00347844  93 BC 07 04 */	stw r29, 0x704(r28)
/* 8034AC68 00347848  93 FE 00 D8 */	stw r31, 0x800000D8@l(r30)
/* 8034AC6C 0034784C  4B FF A5 E9 */	bl OSClearContext
/* 8034AC70 00347850  7F E3 FB 78 */	mr r3, r31
/* 8034AC74 00347854  4B FF A4 19 */	bl OSSetCurrentContext
/* 8034AC78 00347858  3C 60 80 4F */	lis r3, _db_stack_end@ha
/* 8034AC7C 0034785C  38 03 EC 00 */	addi r0, r3, _db_stack_end@l
/* 8034AC80 00347860  3C 60 80 4E */	lis r3, _stack_end@ha
/* 8034AC84 00347864  90 1C 07 14 */	stw r0, 0x714(r28)
/* 8034AC88 00347868  38 03 EC 00 */	addi r0, r3, _stack_end@l
/* 8034AC8C 0034786C  38 7C 07 18 */	addi r3, r28, 0x718
/* 8034AC90 00347870  90 1C 07 18 */	stw r0, 0x718(r28)
/* 8034AC94 00347874  3C 80 DE AE */	lis r4, 0xDEADBABE@ha
/* 8034AC98 00347878  3B 40 00 00 */	li r26, 0
/* 8034AC9C 0034787C  80 63 00 00 */	lwz r3, 0(r3)
/* 8034ACA0 00347880  38 84 BA BE */	addi r4, r4, 0xDEADBABE@l
/* 8034ACA4 00347884  57 40 18 38 */	slwi r0, r26, 3
/* 8034ACA8 00347888  90 83 00 00 */	stw r4, 0(r3)
/* 8034ACAC 0034788C  7F 7C 02 14 */	add r27, r28, r0
/* 8034ACB0 00347890  93 AD BD 38 */	stw r29, lbl_804D73D8(r13)
/* 8034ACB4 00347894  93 FE 00 E4 */	stw r31, 0xe4(r30)
/* 8034ACB8 00347898  93 AD BD 3C */	stw r29, lbl_804D73DC(r13)
lbl_8034ACBC:
/* 8034ACBC 0034789C  7F 63 DB 78 */	mr r3, r27
/* 8034ACC0 003478A0  48 00 00 6D */	bl OSInitThreadQueue
/* 8034ACC4 003478A4  3B 5A 00 01 */	addi r26, r26, 1
/* 8034ACC8 003478A8  2C 1A 00 1F */	cmpwi r26, 0x1f
/* 8034ACCC 003478AC  3B 7B 00 08 */	addi r27, r27, 8
/* 8034ACD0 003478B0  40 81 FF EC */	ble lbl_8034ACBC
/* 8034ACD4 003478B4  3F C0 80 00 */	lis r30, 0x800000DC@ha
/* 8034ACD8 003478B8  38 7E 00 DC */	addi r3, r30, 0x800000DC@l
/* 8034ACDC 003478BC  48 00 00 51 */	bl OSInitThreadQueue
/* 8034ACE0 003478C0  38 9E 00 DC */	addi r4, r30, 0xdc
/* 8034ACE4 003478C4  84 64 00 04 */	lwzu r3, 4(r4)
/* 8034ACE8 003478C8  28 03 00 00 */	cmplwi r3, 0
/* 8034ACEC 003478CC  40 82 00 0C */	bne lbl_8034ACF8
/* 8034ACF0 003478D0  93 FE 00 DC */	stw r31, 0xdc(r30)
/* 8034ACF4 003478D4  48 00 00 08 */	b lbl_8034ACFC
lbl_8034ACF8:
/* 8034ACF8 003478D8  93 E3 02 FC */	stw r31, 0x2fc(r3)
lbl_8034ACFC:
/* 8034ACFC 003478DC  90 7F 03 00 */	stw r3, 0x300(r31)
/* 8034AD00 003478E0  3B C0 00 00 */	li r30, 0
/* 8034AD04 003478E4  38 7C 07 20 */	addi r3, r28, 0x720
/* 8034AD08 003478E8  93 DF 02 FC */	stw r30, 0x2fc(r31)
/* 8034AD0C 003478EC  93 E4 00 00 */	stw r31, 0(r4)
/* 8034AD10 003478F0  4B FF A5 45 */	bl OSClearContext
/* 8034AD14 003478F4  93 CD BD 40 */	stw r30, lbl_804D73E0(r13)
/* 8034AD18 003478F8  BB 41 00 08 */	lmw r26, 8(r1)
/* 8034AD1C 003478FC  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8034AD20 00347900  38 21 00 20 */	addi r1, r1, 0x20
/* 8034AD24 00347904  7C 08 03 A6 */	mtlr r0
/* 8034AD28 00347908  4E 80 00 20 */	blr 
} // clang-format on
#pragma pop

#pragma push
asm void OSInitThreadQueue(OSThreadQueue*)
{ // clang-format off
    nofralloc
/* 8034AD2C 0034790C  38 00 00 00 */	li r0, 0
/* 8034AD30 00347910  90 03 00 04 */	stw r0, 4(r3)
/* 8034AD34 00347914  90 03 00 00 */	stw r0, 0(r3)
/* 8034AD38 00347918  4E 80 00 20 */	blr 
} // clang-format on
#pragma pop

// https://decomp.me/scratch/EPwIs
#pragma push
asm OSThread* OSGetCurrentThread(void)
{ // clang-format off
    nofralloc
/* 8034AD3C 0034791C  3C 60 80 00 */	lis r3, 0x800000E4@ha
/* 8034AD40 00347920  80 63 00 E4 */	lwz r3, 0x800000E4@l(r3)
/* 8034AD44 00347924  4E 80 00 20 */	blr 
} // clang-format on
#pragma pop

#pragma push
asm s32 OSDisableScheduler(void)
{ // clang-format off
    nofralloc
/* 8034AD48 00347928  7C 08 02 A6 */	mflr r0
/* 8034AD4C 0034792C  90 01 00 04 */	stw r0, 4(r1)
/* 8034AD50 00347930  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8034AD54 00347934  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8034AD58 00347938  4B FF C6 0D */	bl OSDisableInterrupts
/* 8034AD5C 0034793C  80 8D BD 40 */	lwz r4, lbl_804D73E0(r13)
/* 8034AD60 00347940  38 04 00 01 */	addi r0, r4, 1
/* 8034AD64 00347944  90 0D BD 40 */	stw r0, lbl_804D73E0(r13)
/* 8034AD68 00347948  7C 9F 23 78 */	mr r31, r4
/* 8034AD6C 0034794C  4B FF C6 21 */	bl OSRestoreInterrupts
/* 8034AD70 00347950  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8034AD74 00347954  7F E3 FB 78 */	mr r3, r31
/* 8034AD78 00347958  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8034AD7C 0034795C  38 21 00 10 */	addi r1, r1, 0x10
/* 8034AD80 00347960  7C 08 03 A6 */	mtlr r0
/* 8034AD84 00347964  4E 80 00 20 */	blr 
} // clang-format on
#pragma pop

#pragma push
asm s32 OSEnableScheduler(void)
{ // clang-format off
    nofralloc
/* 8034AD88 00347968  7C 08 02 A6 */	mflr r0
/* 8034AD8C 0034796C  90 01 00 04 */	stw r0, 4(r1)
/* 8034AD90 00347970  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8034AD94 00347974  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8034AD98 00347978  4B FF C5 CD */	bl OSDisableInterrupts
/* 8034AD9C 0034797C  80 8D BD 40 */	lwz r4, lbl_804D73E0(r13)
/* 8034ADA0 00347980  38 04 FF FF */	addi r0, r4, -1
/* 8034ADA4 00347984  90 0D BD 40 */	stw r0, lbl_804D73E0(r13)
/* 8034ADA8 00347988  7C 9F 23 78 */	mr r31, r4
/* 8034ADAC 0034798C  4B FF C5 E1 */	bl OSRestoreInterrupts
/* 8034ADB0 00347990  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8034ADB4 00347994  7F E3 FB 78 */	mr r3, r31
/* 8034ADB8 00347998  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8034ADBC 0034799C  38 21 00 10 */	addi r1, r1, 0x10
/* 8034ADC0 003479A0  7C 08 03 A6 */	mtlr r0
/* 8034ADC4 003479A4  4E 80 00 20 */	blr 
} // clang-format on
#pragma pop

#pragma push
asm unk_t UnsetRun()
{ // clang-format off
    nofralloc
/* 8034ADC8 003479A8  80 83 02 E0 */	lwz r4, 0x2e0(r3)
/* 8034ADCC 003479AC  80 A3 02 DC */	lwz r5, 0x2dc(r3)
/* 8034ADD0 003479B0  28 04 00 00 */	cmplwi r4, 0
/* 8034ADD4 003479B4  80 C3 02 E4 */	lwz r6, 0x2e4(r3)
/* 8034ADD8 003479B8  40 82 00 0C */	bne lbl_8034ADE4
/* 8034ADDC 003479BC  90 C5 00 04 */	stw r6, 4(r5)
/* 8034ADE0 003479C0  48 00 00 08 */	b lbl_8034ADE8
lbl_8034ADE4:
/* 8034ADE4 003479C4  90 C4 02 E4 */	stw r6, 0x2e4(r4)
lbl_8034ADE8:
/* 8034ADE8 003479C8  28 06 00 00 */	cmplwi r6, 0
/* 8034ADEC 003479CC  40 82 00 0C */	bne lbl_8034ADF8
/* 8034ADF0 003479D0  90 85 00 00 */	stw r4, 0(r5)
/* 8034ADF4 003479D4  48 00 00 08 */	b lbl_8034ADFC
lbl_8034ADF8:
/* 8034ADF8 003479D8  90 86 02 E0 */	stw r4, 0x2e0(r6)
lbl_8034ADFC:
/* 8034ADFC 003479DC  80 05 00 00 */	lwz r0, 0(r5)
/* 8034AE00 003479E0  28 00 00 00 */	cmplwi r0, 0
/* 8034AE04 003479E4  40 82 00 20 */	bne lbl_8034AE24
/* 8034AE08 003479E8  80 03 02 D0 */	lwz r0, 0x2d0(r3)
/* 8034AE0C 003479EC  38 80 00 01 */	li r4, 1
/* 8034AE10 003479F0  80 AD BD 38 */	lwz r5, lbl_804D73D8(r13)
/* 8034AE14 003479F4  20 00 00 1F */	subfic r0, r0, 0x1f
/* 8034AE18 003479F8  7C 80 00 30 */	slw r0, r4, r0
/* 8034AE1C 003479FC  7C A0 00 78 */	andc r0, r5, r0
/* 8034AE20 00347A00  90 0D BD 38 */	stw r0, lbl_804D73D8(r13)
lbl_8034AE24:
/* 8034AE24 00347A04  38 00 00 00 */	li r0, 0
/* 8034AE28 00347A08  90 03 02 DC */	stw r0, 0x2dc(r3)
/* 8034AE2C 00347A0C  4E 80 00 20 */	blr 
} // clang-format on
#pragma pop

#pragma push
asm s32 __OSGetEffectivePriority(OSThread*)
{ // clang-format off
    nofralloc
/* 8034AE30 00347A10  80 83 02 D4 */	lwz r4, 0x2d4(r3)
/* 8034AE34 00347A14  80 A3 02 F4 */	lwz r5, 0x2f4(r3)
/* 8034AE38 00347A18  48 00 00 24 */	b lbl_8034AE5C
lbl_8034AE3C:
/* 8034AE3C 00347A1C  80 65 00 00 */	lwz r3, 0(r5)
/* 8034AE40 00347A20  28 03 00 00 */	cmplwi r3, 0
/* 8034AE44 00347A24  41 82 00 14 */	beq lbl_8034AE58
/* 8034AE48 00347A28  80 03 02 D0 */	lwz r0, 0x2d0(r3)
/* 8034AE4C 00347A2C  7C 00 20 00 */	cmpw r0, r4
/* 8034AE50 00347A30  40 80 00 08 */	bge lbl_8034AE58
/* 8034AE54 00347A34  7C 04 03 78 */	mr r4, r0
lbl_8034AE58:
/* 8034AE58 00347A38  80 A5 00 10 */	lwz r5, 0x10(r5)
lbl_8034AE5C:
/* 8034AE5C 00347A3C  28 05 00 00 */	cmplwi r5, 0
/* 8034AE60 00347A40  40 82 FF DC */	bne lbl_8034AE3C
/* 8034AE64 00347A44  7C 83 23 78 */	mr r3, r4
/* 8034AE68 00347A48  4E 80 00 20 */	blr 
} // clang-format on
#pragma pop

#pragma push
asm unk_t SetEffectivePriority()
{ // clang-format off
    nofralloc
/* 8034AE6C 00347A4C  7C 08 02 A6 */	mflr r0
/* 8034AE70 00347A50  90 01 00 04 */	stw r0, 4(r1)
/* 8034AE74 00347A54  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 8034AE78 00347A58  93 E1 00 14 */	stw r31, 0x14(r1)
/* 8034AE7C 00347A5C  7C 7F 1B 78 */	mr r31, r3
/* 8034AE80 00347A60  93 C1 00 10 */	stw r30, 0x10(r1)
/* 8034AE84 00347A64  3B C4 00 00 */	addi r30, r4, 0
/* 8034AE88 00347A68  A0 03 02 C8 */	lhz r0, 0x2c8(r3)
/* 8034AE8C 00347A6C  2C 00 00 03 */	cmpwi r0, 3
/* 8034AE90 00347A70  41 82 01 80 */	beq lbl_8034B010
/* 8034AE94 00347A74  40 80 00 14 */	bge lbl_8034AEA8
/* 8034AE98 00347A78  2C 00 00 01 */	cmpwi r0, 1
/* 8034AE9C 00347A7C  41 82 00 18 */	beq lbl_8034AEB4
/* 8034AEA0 00347A80  40 80 01 64 */	bge lbl_8034B004
/* 8034AEA4 00347A84  48 00 01 6C */	b lbl_8034B010
lbl_8034AEA8:
/* 8034AEA8 00347A88  2C 00 00 05 */	cmpwi r0, 5
/* 8034AEAC 00347A8C  40 80 01 64 */	bge lbl_8034B010
/* 8034AEB0 00347A90  48 00 00 7C */	b lbl_8034AF2C
lbl_8034AEB4:
/* 8034AEB4 00347A94  7F E3 FB 78 */	mr r3, r31
/* 8034AEB8 00347A98  4B FF FF 11 */	bl UnsetRun
/* 8034AEBC 00347A9C  93 DF 02 D0 */	stw r30, 0x2d0(r31)
/* 8034AEC0 00347AA0  3C 60 80 4A */	lis r3, lbl_804A7FB8@ha
/* 8034AEC4 00347AA4  38 03 7F B8 */	addi r0, r3, lbl_804A7FB8@l
/* 8034AEC8 00347AA8  80 7F 02 D0 */	lwz r3, 0x2d0(r31)
/* 8034AECC 00347AAC  54 63 18 38 */	slwi r3, r3, 3
/* 8034AED0 00347AB0  7C 00 1A 14 */	add r0, r0, r3
/* 8034AED4 00347AB4  90 1F 02 DC */	stw r0, 0x2dc(r31)
/* 8034AED8 00347AB8  80 9F 02 DC */	lwz r4, 0x2dc(r31)
/* 8034AEDC 00347ABC  80 64 00 04 */	lwz r3, 4(r4)
/* 8034AEE0 00347AC0  28 03 00 00 */	cmplwi r3, 0
/* 8034AEE4 00347AC4  40 82 00 0C */	bne lbl_8034AEF0
/* 8034AEE8 00347AC8  93 E4 00 00 */	stw r31, 0(r4)
/* 8034AEEC 00347ACC  48 00 00 08 */	b lbl_8034AEF4
lbl_8034AEF0:
/* 8034AEF0 00347AD0  93 E3 02 E0 */	stw r31, 0x2e0(r3)
lbl_8034AEF4:
/* 8034AEF4 00347AD4  90 7F 02 E4 */	stw r3, 0x2e4(r31)
/* 8034AEF8 00347AD8  38 00 00 00 */	li r0, 0
/* 8034AEFC 00347ADC  38 60 00 01 */	li r3, 1
/* 8034AF00 00347AE0  90 1F 02 E0 */	stw r0, 0x2e0(r31)
/* 8034AF04 00347AE4  80 9F 02 DC */	lwz r4, 0x2dc(r31)
/* 8034AF08 00347AE8  93 E4 00 04 */	stw r31, 4(r4)
/* 8034AF0C 00347AEC  80 1F 02 D0 */	lwz r0, 0x2d0(r31)
/* 8034AF10 00347AF0  80 8D BD 38 */	lwz r4, lbl_804D73D8(r13)
/* 8034AF14 00347AF4  20 00 00 1F */	subfic r0, r0, 0x1f
/* 8034AF18 00347AF8  7C 60 00 30 */	slw r0, r3, r0
/* 8034AF1C 00347AFC  7C 80 03 78 */	or r0, r4, r0
/* 8034AF20 00347B00  90 0D BD 38 */	stw r0, lbl_804D73D8(r13)
/* 8034AF24 00347B04  90 6D BD 3C */	stw r3, lbl_804D73DC(r13)
/* 8034AF28 00347B08  48 00 00 E8 */	b lbl_8034B010
lbl_8034AF2C:
/* 8034AF2C 00347B0C  80 9F 02 E0 */	lwz r4, 0x2e0(r31)
/* 8034AF30 00347B10  80 BF 02 E4 */	lwz r5, 0x2e4(r31)
/* 8034AF34 00347B14  28 04 00 00 */	cmplwi r4, 0
/* 8034AF38 00347B18  40 82 00 10 */	bne lbl_8034AF48
/* 8034AF3C 00347B1C  80 7F 02 DC */	lwz r3, 0x2dc(r31)
/* 8034AF40 00347B20  90 A3 00 04 */	stw r5, 4(r3)
/* 8034AF44 00347B24  48 00 00 08 */	b lbl_8034AF4C
lbl_8034AF48:
/* 8034AF48 00347B28  90 A4 02 E4 */	stw r5, 0x2e4(r4)
lbl_8034AF4C:
/* 8034AF4C 00347B2C  28 05 00 00 */	cmplwi r5, 0
/* 8034AF50 00347B30  40 82 00 10 */	bne lbl_8034AF60
/* 8034AF54 00347B34  80 7F 02 DC */	lwz r3, 0x2dc(r31)
/* 8034AF58 00347B38  90 83 00 00 */	stw r4, 0(r3)
/* 8034AF5C 00347B3C  48 00 00 08 */	b lbl_8034AF64
lbl_8034AF60:
/* 8034AF60 00347B40  90 85 02 E0 */	stw r4, 0x2e0(r5)
lbl_8034AF64:
/* 8034AF64 00347B44  93 DF 02 D0 */	stw r30, 0x2d0(r31)
/* 8034AF68 00347B48  80 9F 02 DC */	lwz r4, 0x2dc(r31)
/* 8034AF6C 00347B4C  80 A4 00 00 */	lwz r5, 0(r4)
/* 8034AF70 00347B50  48 00 00 08 */	b lbl_8034AF78
lbl_8034AF74:
/* 8034AF74 00347B54  80 A5 02 E0 */	lwz r5, 0x2e0(r5)
lbl_8034AF78:
/* 8034AF78 00347B58  28 05 00 00 */	cmplwi r5, 0
/* 8034AF7C 00347B5C  41 82 00 14 */	beq lbl_8034AF90
/* 8034AF80 00347B60  80 65 02 D0 */	lwz r3, 0x2d0(r5)
/* 8034AF84 00347B64  80 1F 02 D0 */	lwz r0, 0x2d0(r31)
/* 8034AF88 00347B68  7C 03 00 00 */	cmpw r3, r0
/* 8034AF8C 00347B6C  40 81 FF E8 */	ble lbl_8034AF74
lbl_8034AF90:
/* 8034AF90 00347B70  28 05 00 00 */	cmplwi r5, 0
/* 8034AF94 00347B74  40 82 00 34 */	bne lbl_8034AFC8
/* 8034AF98 00347B78  80 64 00 04 */	lwz r3, 4(r4)
/* 8034AF9C 00347B7C  28 03 00 00 */	cmplwi r3, 0
/* 8034AFA0 00347B80  40 82 00 0C */	bne lbl_8034AFAC
/* 8034AFA4 00347B84  93 E4 00 00 */	stw r31, 0(r4)
/* 8034AFA8 00347B88  48 00 00 08 */	b lbl_8034AFB0
lbl_8034AFAC:
/* 8034AFAC 00347B8C  93 E3 02 E0 */	stw r31, 0x2e0(r3)
lbl_8034AFB0:
/* 8034AFB0 00347B90  90 7F 02 E4 */	stw r3, 0x2e4(r31)
/* 8034AFB4 00347B94  38 00 00 00 */	li r0, 0
/* 8034AFB8 00347B98  90 1F 02 E0 */	stw r0, 0x2e0(r31)
/* 8034AFBC 00347B9C  80 7F 02 DC */	lwz r3, 0x2dc(r31)
/* 8034AFC0 00347BA0  93 E3 00 04 */	stw r31, 4(r3)
/* 8034AFC4 00347BA4  48 00 00 2C */	b lbl_8034AFF0
lbl_8034AFC8:
/* 8034AFC8 00347BA8  90 BF 02 E0 */	stw r5, 0x2e0(r31)
/* 8034AFCC 00347BAC  80 65 02 E4 */	lwz r3, 0x2e4(r5)
/* 8034AFD0 00347BB0  93 E5 02 E4 */	stw r31, 0x2e4(r5)
/* 8034AFD4 00347BB4  28 03 00 00 */	cmplwi r3, 0
/* 8034AFD8 00347BB8  90 7F 02 E4 */	stw r3, 0x2e4(r31)
/* 8034AFDC 00347BBC  40 82 00 10 */	bne lbl_8034AFEC
/* 8034AFE0 00347BC0  80 7F 02 DC */	lwz r3, 0x2dc(r31)
/* 8034AFE4 00347BC4  93 E3 00 00 */	stw r31, 0(r3)
/* 8034AFE8 00347BC8  48 00 00 08 */	b lbl_8034AFF0
lbl_8034AFEC:
/* 8034AFEC 00347BCC  93 E3 02 E0 */	stw r31, 0x2e0(r3)
lbl_8034AFF0:
/* 8034AFF0 00347BD0  80 7F 02 F0 */	lwz r3, 0x2f0(r31)
/* 8034AFF4 00347BD4  28 03 00 00 */	cmplwi r3, 0
/* 8034AFF8 00347BD8  41 82 00 18 */	beq lbl_8034B010
/* 8034AFFC 00347BDC  80 63 00 08 */	lwz r3, 8(r3)
/* 8034B000 00347BE0  48 00 00 14 */	b lbl_8034B014
lbl_8034B004:
/* 8034B004 00347BE4  38 00 00 01 */	li r0, 1
/* 8034B008 00347BE8  90 0D BD 3C */	stw r0, lbl_804D73DC(r13)
/* 8034B00C 00347BEC  93 DF 02 D0 */	stw r30, 0x2d0(r31)
lbl_8034B010:
/* 8034B010 00347BF0  38 60 00 00 */	li r3, 0
lbl_8034B014:
/* 8034B014 00347BF4  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 8034B018 00347BF8  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 8034B01C 00347BFC  83 C1 00 10 */	lwz r30, 0x10(r1)
/* 8034B020 00347C00  7C 08 03 A6 */	mtlr r0
/* 8034B024 00347C04  38 21 00 18 */	addi r1, r1, 0x18
/* 8034B028 00347C08  4E 80 00 20 */	blr 
} // clang-format on
#pragma pop

#pragma push
asm unk_t SelectThread()
{ // clang-format off
    nofralloc
/* 8034B02C 00347C0C  7C 08 02 A6 */	mflr r0
/* 8034B030 00347C10  3C 80 80 4A */	lis r4, lbl_804A7FB8@ha
/* 8034B034 00347C14  90 01 00 04 */	stw r0, 4(r1)
/* 8034B038 00347C18  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 8034B03C 00347C1C  93 E1 00 14 */	stw r31, 0x14(r1)
/* 8034B040 00347C20  3B E4 7F B8 */	addi r31, r4, lbl_804A7FB8@l
/* 8034B044 00347C24  93 C1 00 10 */	stw r30, 0x10(r1)
/* 8034B048 00347C28  3B C3 00 00 */	addi r30, r3, 0
/* 8034B04C 00347C2C  80 0D BD 40 */	lwz r0, lbl_804D73E0(r13)
/* 8034B050 00347C30  2C 00 00 00 */	cmpwi r0, 0
/* 8034B054 00347C34  40 81 00 0C */	ble lbl_8034B060
/* 8034B058 00347C38  38 60 00 00 */	li r3, 0
/* 8034B05C 00347C3C  48 00 01 B8 */	b lbl_8034B214
lbl_8034B060:
/* 8034B060 00347C40  4B FF A0 89 */	bl OSGetCurrentContext
/* 8034B064 00347C44  3C 80 80 00 */	lis r4, 0x800000E4@ha
/* 8034B068 00347C48  80 C4 00 E4 */	lwz r6, 0x800000E4@l(r4)
/* 8034B06C 00347C4C  7C 03 30 40 */	cmplw r3, r6
/* 8034B070 00347C50  38 66 00 00 */	addi r3, r6, 0
/* 8034B074 00347C54  41 82 00 0C */	beq lbl_8034B080
/* 8034B078 00347C58  38 60 00 00 */	li r3, 0
/* 8034B07C 00347C5C  48 00 01 98 */	b lbl_8034B214
lbl_8034B080:
/* 8034B080 00347C60  28 06 00 00 */	cmplwi r6, 0
/* 8034B084 00347C64  41 82 00 BC */	beq lbl_8034B140
/* 8034B088 00347C68  A0 06 02 C8 */	lhz r0, 0x2c8(r6)
/* 8034B08C 00347C6C  28 00 00 02 */	cmplwi r0, 2
/* 8034B090 00347C70  40 82 00 90 */	bne lbl_8034B120
/* 8034B094 00347C74  2C 1E 00 00 */	cmpwi r30, 0
/* 8034B098 00347C78  40 82 00 20 */	bne lbl_8034B0B8
/* 8034B09C 00347C7C  80 8D BD 38 */	lwz r4, lbl_804D73D8(r13)
/* 8034B0A0 00347C80  80 06 02 D0 */	lwz r0, 0x2d0(r6)
/* 8034B0A4 00347C84  7C 84 00 34 */	cntlzw r4, r4
/* 8034B0A8 00347C88  7C 00 20 00 */	cmpw r0, r4
/* 8034B0AC 00347C8C  41 81 00 0C */	bgt lbl_8034B0B8
/* 8034B0B0 00347C90  38 60 00 00 */	li r3, 0
/* 8034B0B4 00347C94  48 00 01 60 */	b lbl_8034B214
lbl_8034B0B8:
/* 8034B0B8 00347C98  38 00 00 01 */	li r0, 1
/* 8034B0BC 00347C9C  B0 06 02 C8 */	sth r0, 0x2c8(r6)
/* 8034B0C0 00347CA0  80 06 02 D0 */	lwz r0, 0x2d0(r6)
/* 8034B0C4 00347CA4  54 00 18 38 */	slwi r0, r0, 3
/* 8034B0C8 00347CA8  7C 1F 02 14 */	add r0, r31, r0
/* 8034B0CC 00347CAC  90 06 02 DC */	stw r0, 0x2dc(r6)
/* 8034B0D0 00347CB0  80 A6 02 DC */	lwz r5, 0x2dc(r6)
/* 8034B0D4 00347CB4  80 85 00 04 */	lwz r4, 4(r5)
/* 8034B0D8 00347CB8  28 04 00 00 */	cmplwi r4, 0
/* 8034B0DC 00347CBC  40 82 00 0C */	bne lbl_8034B0E8
/* 8034B0E0 00347CC0  90 C5 00 00 */	stw r6, 0(r5)
/* 8034B0E4 00347CC4  48 00 00 08 */	b lbl_8034B0EC
lbl_8034B0E8:
/* 8034B0E8 00347CC8  90 C4 02 E0 */	stw r6, 0x2e0(r4)
lbl_8034B0EC:
/* 8034B0EC 00347CCC  90 86 02 E4 */	stw r4, 0x2e4(r6)
/* 8034B0F0 00347CD0  38 00 00 00 */	li r0, 0
/* 8034B0F4 00347CD4  38 80 00 01 */	li r4, 1
/* 8034B0F8 00347CD8  90 06 02 E0 */	stw r0, 0x2e0(r6)
/* 8034B0FC 00347CDC  80 A6 02 DC */	lwz r5, 0x2dc(r6)
/* 8034B100 00347CE0  90 C5 00 04 */	stw r6, 4(r5)
/* 8034B104 00347CE4  80 06 02 D0 */	lwz r0, 0x2d0(r6)
/* 8034B108 00347CE8  80 AD BD 38 */	lwz r5, lbl_804D73D8(r13)
/* 8034B10C 00347CEC  20 00 00 1F */	subfic r0, r0, 0x1f
/* 8034B110 00347CF0  7C 80 00 30 */	slw r0, r4, r0
/* 8034B114 00347CF4  7C A0 03 78 */	or r0, r5, r0
/* 8034B118 00347CF8  90 0D BD 38 */	stw r0, lbl_804D73D8(r13)
/* 8034B11C 00347CFC  90 8D BD 3C */	stw r4, lbl_804D73DC(r13)
lbl_8034B120:
/* 8034B120 00347D00  A0 06 01 A2 */	lhz r0, 0x1a2(r6)
/* 8034B124 00347D04  54 00 07 BD */	rlwinm. r0, r0, 0, 0x1e, 0x1e
/* 8034B128 00347D08  40 82 00 18 */	bne lbl_8034B140
/* 8034B12C 00347D0C  4B FF 9F C9 */	bl OSSaveContext
/* 8034B130 00347D10  28 03 00 00 */	cmplwi r3, 0
/* 8034B134 00347D14  41 82 00 0C */	beq lbl_8034B140
/* 8034B138 00347D18  38 60 00 00 */	li r3, 0
/* 8034B13C 00347D1C  48 00 00 D8 */	b lbl_8034B214
lbl_8034B140:
/* 8034B140 00347D20  80 0D BD 38 */	lwz r0, lbl_804D73D8(r13)
/* 8034B144 00347D24  38 80 00 00 */	li r4, 0
/* 8034B148 00347D28  3C 60 80 00 */	lis r3, 0x800000E4@ha
/* 8034B14C 00347D2C  28 00 00 00 */	cmplwi r0, 0
/* 8034B150 00347D30  90 83 00 E4 */	stw r4, 0x800000E4@l(r3)
/* 8034B154 00347D34  40 82 00 34 */	bne lbl_8034B188
/* 8034B158 00347D38  38 7F 07 20 */	addi r3, r31, 0x720
/* 8034B15C 00347D3C  4B FF 9F 31 */	bl OSSetCurrentContext
lbl_8034B160:
/* 8034B160 00347D40  4B FF C2 19 */	bl OSEnableInterrupts
lbl_8034B164:
/* 8034B164 00347D44  80 0D BD 38 */	lwz r0, lbl_804D73D8(r13)
/* 8034B168 00347D48  28 00 00 00 */	cmplwi r0, 0
/* 8034B16C 00347D4C  41 82 FF F8 */	beq lbl_8034B164
/* 8034B170 00347D50  4B FF C1 F5 */	bl OSDisableInterrupts
/* 8034B174 00347D54  80 0D BD 38 */	lwz r0, lbl_804D73D8(r13)
/* 8034B178 00347D58  28 00 00 00 */	cmplwi r0, 0
/* 8034B17C 00347D5C  41 82 FF E4 */	beq lbl_8034B160
/* 8034B180 00347D60  38 7F 07 20 */	addi r3, r31, 0x720
/* 8034B184 00347D64  4B FF A0 D1 */	bl OSClearContext
lbl_8034B188:
/* 8034B188 00347D68  38 60 00 00 */	li r3, 0
/* 8034B18C 00347D6C  90 6D BD 3C */	stw r3, lbl_804D73DC(r13)
/* 8034B190 00347D70  80 0D BD 38 */	lwz r0, lbl_804D73D8(r13)
/* 8034B194 00347D74  7C 07 00 34 */	cntlzw r7, r0
/* 8034B198 00347D78  54 E0 18 38 */	slwi r0, r7, 3
/* 8034B19C 00347D7C  7C 9F 02 14 */	add r4, r31, r0
/* 8034B1A0 00347D80  80 A4 00 00 */	lwz r5, 0(r4)
/* 8034B1A4 00347D84  80 C5 02 E0 */	lwz r6, 0x2e0(r5)
/* 8034B1A8 00347D88  3B E5 00 00 */	addi r31, r5, 0
/* 8034B1AC 00347D8C  28 06 00 00 */	cmplwi r6, 0
/* 8034B1B0 00347D90  40 82 00 0C */	bne lbl_8034B1BC
/* 8034B1B4 00347D94  90 64 00 04 */	stw r3, 4(r4)
/* 8034B1B8 00347D98  48 00 00 08 */	b lbl_8034B1C0
lbl_8034B1BC:
/* 8034B1BC 00347D9C  90 66 02 E4 */	stw r3, 0x2e4(r6)
lbl_8034B1C0:
/* 8034B1C0 00347DA0  90 C4 00 00 */	stw r6, 0(r4)
/* 8034B1C4 00347DA4  80 04 00 00 */	lwz r0, 0(r4)
/* 8034B1C8 00347DA8  28 00 00 00 */	cmplwi r0, 0
/* 8034B1CC 00347DAC  40 82 00 1C */	bne lbl_8034B1E8
/* 8034B1D0 00347DB0  20 07 00 1F */	subfic r0, r7, 0x1f
/* 8034B1D4 00347DB4  80 8D BD 38 */	lwz r4, lbl_804D73D8(r13)
/* 8034B1D8 00347DB8  38 60 00 01 */	li r3, 1
/* 8034B1DC 00347DBC  7C 60 00 30 */	slw r0, r3, r0
/* 8034B1E0 00347DC0  7C 80 00 78 */	andc r0, r4, r0
/* 8034B1E4 00347DC4  90 0D BD 38 */	stw r0, lbl_804D73D8(r13)
lbl_8034B1E8:
/* 8034B1E8 00347DC8  38 00 00 00 */	li r0, 0
/* 8034B1EC 00347DCC  90 1F 02 DC */	stw r0, 0x2dc(r31)
/* 8034B1F0 00347DD0  38 00 00 02 */	li r0, 2
/* 8034B1F4 00347DD4  3C 80 80 00 */	lis r4, 0x800000E4@ha
/* 8034B1F8 00347DD8  B0 1F 02 C8 */	sth r0, 0x2c8(r31)
/* 8034B1FC 00347DDC  7F E3 FB 78 */	mr r3, r31
/* 8034B200 00347DE0  93 E4 00 E4 */	stw r31, 0x800000E4@l(r4)
/* 8034B204 00347DE4  4B FF 9E 89 */	bl OSSetCurrentContext
/* 8034B208 00347DE8  7F E3 FB 78 */	mr r3, r31
/* 8034B20C 00347DEC  4B FF 9F 69 */	bl OSLoadContext
/* 8034B210 00347DF0  7F E3 FB 78 */	mr r3, r31
lbl_8034B214:
/* 8034B214 00347DF4  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 8034B218 00347DF8  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 8034B21C 00347DFC  83 C1 00 10 */	lwz r30, 0x10(r1)
/* 8034B220 00347E00  7C 08 03 A6 */	mtlr r0
/* 8034B224 00347E04  38 21 00 18 */	addi r1, r1, 0x18
/* 8034B228 00347E08  4E 80 00 20 */	blr 
} // clang-format on
#pragma pop

#pragma push
asm void __OSReschedule(void)
{ // clang-format off
    nofralloc
/* 8034B22C 00347E0C  7C 08 02 A6 */	mflr r0
/* 8034B230 00347E10  90 01 00 04 */	stw r0, 4(r1)
/* 8034B234 00347E14  94 21 FF F8 */	stwu r1, -8(r1)
/* 8034B238 00347E18  80 0D BD 3C */	lwz r0, lbl_804D73DC(r13)
/* 8034B23C 00347E1C  2C 00 00 00 */	cmpwi r0, 0
/* 8034B240 00347E20  41 82 00 0C */	beq lbl_8034B24C
/* 8034B244 00347E24  38 60 00 00 */	li r3, 0
/* 8034B248 00347E28  4B FF FD E5 */	bl SelectThread
lbl_8034B24C:
/* 8034B24C 00347E2C  80 01 00 0C */	lwz r0, 0xc(r1)
/* 8034B250 00347E30  38 21 00 08 */	addi r1, r1, 8
/* 8034B254 00347E34  7C 08 03 A6 */	mtlr r0
/* 8034B258 00347E38  4E 80 00 20 */	blr 
} // clang-format on
#pragma pop

#pragma push
asm BOOL OSCreateThread(OSThread*, OSThreadFunc, OSThread_Unk1*, OSThread_Unk2*, u32, s32, u16)
{ // clang-format off
    nofralloc
/* 8034B25C 00347E3C  7C 08 02 A6 */	mflr r0
/* 8034B260 00347E40  2C 08 00 00 */	cmpwi r8, 0
/* 8034B264 00347E44  90 01 00 04 */	stw r0, 4(r1)
/* 8034B268 00347E48  94 21 FF C8 */	stwu r1, -0x38(r1)
/* 8034B26C 00347E4C  93 E1 00 34 */	stw r31, 0x34(r1)
/* 8034B270 00347E50  3B E3 00 00 */	addi r31, r3, 0
/* 8034B274 00347E54  93 C1 00 30 */	stw r30, 0x30(r1)
/* 8034B278 00347E58  3B C7 00 00 */	addi r30, r7, 0
/* 8034B27C 00347E5C  93 A1 00 2C */	stw r29, 0x2c(r1)
/* 8034B280 00347E60  3B A6 00 00 */	addi r29, r6, 0
/* 8034B284 00347E64  93 81 00 28 */	stw r28, 0x28(r1)
/* 8034B288 00347E68  3B 85 00 00 */	addi r28, r5, 0
/* 8034B28C 00347E6C  41 80 00 0C */	blt lbl_8034B298
/* 8034B290 00347E70  2C 08 00 1F */	cmpwi r8, 0x1f
/* 8034B294 00347E74  40 81 00 0C */	ble lbl_8034B2A0
lbl_8034B298:
/* 8034B298 00347E78  38 60 00 00 */	li r3, 0
/* 8034B29C 00347E7C  48 00 00 C0 */	b lbl_8034B35C
lbl_8034B2A0:
/* 8034B2A0 00347E80  38 E0 00 01 */	li r7, 1
/* 8034B2A4 00347E84  B0 FF 02 C8 */	sth r7, 0x2c8(r31)
/* 8034B2A8 00347E88  55 20 07 FE */	clrlwi r0, r9, 0x1f
/* 8034B2AC 00347E8C  57 A9 00 38 */	rlwinm r9, r29, 0, 0, 0x1c
/* 8034B2B0 00347E90  B0 1F 02 CA */	sth r0, 0x2ca(r31)
/* 8034B2B4 00347E94  38 C0 FF FF */	li r6, -1
/* 8034B2B8 00347E98  38 00 00 00 */	li r0, 0
/* 8034B2BC 00347E9C  91 1F 02 D4 */	stw r8, 0x2d4(r31)
/* 8034B2C0 00347EA0  38 7F 00 00 */	addi r3, r31, 0
/* 8034B2C4 00347EA4  38 A9 FF F8 */	addi r5, r9, -8
/* 8034B2C8 00347EA8  91 1F 02 D0 */	stw r8, 0x2d0(r31)
/* 8034B2CC 00347EAC  90 FF 02 CC */	stw r7, 0x2cc(r31)
/* 8034B2D0 00347EB0  90 DF 02 D8 */	stw r6, 0x2d8(r31)
/* 8034B2D4 00347EB4  90 1F 02 F0 */	stw r0, 0x2f0(r31)
/* 8034B2D8 00347EB8  90 1F 02 EC */	stw r0, 0x2ec(r31)
/* 8034B2DC 00347EBC  90 1F 02 E8 */	stw r0, 0x2e8(r31)
/* 8034B2E0 00347EC0  90 1F 02 F8 */	stw r0, 0x2f8(r31)
/* 8034B2E4 00347EC4  90 1F 02 F4 */	stw r0, 0x2f4(r31)
/* 8034B2E8 00347EC8  90 09 FF F8 */	stw r0, -8(r9)
/* 8034B2EC 00347ECC  90 09 FF FC */	stw r0, -4(r9)
/* 8034B2F0 00347ED0  4B FF 9F 89 */	bl OSInitContext
/* 8034B2F4 00347ED4  3C 60 80 35 */	lis r3, OSExitThread@ha
/* 8034B2F8 00347ED8  38 03 B3 7C */	addi r0, r3, OSExitThread@l
/* 8034B2FC 00347EDC  90 1F 00 84 */	stw r0, 0x84(r31)
/* 8034B300 00347EE0  3C 60 DE AE */	lis r3, 0xDEADBABE@ha
/* 8034B304 00347EE4  7C 9E E8 50 */	subf r4, r30, r29
/* 8034B308 00347EE8  93 9F 00 0C */	stw r28, 0xc(r31)
/* 8034B30C 00347EEC  38 03 BA BE */	addi r0, r3, 0xDEADBABE@l
/* 8034B310 00347EF0  93 BF 03 04 */	stw r29, 0x304(r31)
/* 8034B314 00347EF4  90 9F 03 08 */	stw r4, 0x308(r31)
/* 8034B318 00347EF8  80 7F 03 08 */	lwz r3, 0x308(r31)
/* 8034B31C 00347EFC  90 03 00 00 */	stw r0, 0(r3)
/* 8034B320 00347F00  4B FF C0 45 */	bl OSDisableInterrupts
/* 8034B324 00347F04  3C 80 80 00 */	lis r4, 0x800000DC@ha
/* 8034B328 00347F08  38 A4 00 DC */	addi r5, r4, 0x800000DC@l
/* 8034B32C 00347F0C  84 C5 00 04 */	lwzu r6, 4(r5)
/* 8034B330 00347F10  28 06 00 00 */	cmplwi r6, 0
/* 8034B334 00347F14  40 82 00 0C */	bne lbl_8034B340
/* 8034B338 00347F18  93 E4 00 DC */	stw r31, 0xdc(r4)
/* 8034B33C 00347F1C  48 00 00 08 */	b lbl_8034B344
lbl_8034B340:
/* 8034B340 00347F20  93 E6 02 FC */	stw r31, 0x2fc(r6)
lbl_8034B344:
/* 8034B344 00347F24  90 DF 03 00 */	stw r6, 0x300(r31)
/* 8034B348 00347F28  38 00 00 00 */	li r0, 0
/* 8034B34C 00347F2C  90 1F 02 FC */	stw r0, 0x2fc(r31)
/* 8034B350 00347F30  93 E5 00 00 */	stw r31, 0(r5)
/* 8034B354 00347F34  4B FF C0 39 */	bl OSRestoreInterrupts
/* 8034B358 00347F38  38 60 00 01 */	li r3, 1
lbl_8034B35C:
/* 8034B35C 00347F3C  80 01 00 3C */	lwz r0, 0x3c(r1)
/* 8034B360 00347F40  83 E1 00 34 */	lwz r31, 0x34(r1)
/* 8034B364 00347F44  83 C1 00 30 */	lwz r30, 0x30(r1)
/* 8034B368 00347F48  7C 08 03 A6 */	mtlr r0
/* 8034B36C 00347F4C  83 A1 00 2C */	lwz r29, 0x2c(r1)
/* 8034B370 00347F50  83 81 00 28 */	lwz r28, 0x28(r1)
/* 8034B374 00347F54  38 21 00 38 */	addi r1, r1, 0x38
/* 8034B378 00347F58  4E 80 00 20 */	blr 
} // clang-format on
#pragma pop

#pragma push
asm void OSExitThread(OSThread*)
{ // clang-format off
    nofralloc
/* 8034B37C 00347F5C  7C 08 02 A6 */	mflr r0
/* 8034B380 00347F60  90 01 00 04 */	stw r0, 4(r1)
/* 8034B384 00347F64  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8034B388 00347F68  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8034B38C 00347F6C  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8034B390 00347F70  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8034B394 00347F74  93 81 00 10 */	stw r28, 0x10(r1)
/* 8034B398 00347F78  7C 7C 1B 78 */	mr r28, r3
/* 8034B39C 00347F7C  4B FF BF C9 */	bl OSDisableInterrupts
/* 8034B3A0 00347F80  3F E0 80 00 */	lis r31, 0x800000E4@ha
/* 8034B3A4 00347F84  83 DF 00 E4 */	lwz r30, 0x800000E4@l(r31)
/* 8034B3A8 00347F88  3B A3 00 00 */	addi r29, r3, 0
/* 8034B3AC 00347F8C  38 7E 00 00 */	addi r3, r30, 0
/* 8034B3B0 00347F90  4B FF 9E A5 */	bl OSClearContext
/* 8034B3B4 00347F94  A0 1E 02 CA */	lhz r0, 0x2ca(r30)
/* 8034B3B8 00347F98  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 8034B3BC 00347F9C  41 82 00 44 */	beq lbl_8034B400
/* 8034B3C0 00347FA0  80 9E 02 FC */	lwz r4, 0x2fc(r30)
/* 8034B3C4 00347FA4  80 BE 03 00 */	lwz r5, 0x300(r30)
/* 8034B3C8 00347FA8  28 04 00 00 */	cmplwi r4, 0
/* 8034B3CC 00347FAC  40 82 00 0C */	bne lbl_8034B3D8
/* 8034B3D0 00347FB0  90 BF 00 E0 */	stw r5, 0xe0(r31)
/* 8034B3D4 00347FB4  48 00 00 08 */	b lbl_8034B3DC
lbl_8034B3D8:
/* 8034B3D8 00347FB8  90 A4 03 00 */	stw r5, 0x300(r4)
lbl_8034B3DC:
/* 8034B3DC 00347FBC  28 05 00 00 */	cmplwi r5, 0
/* 8034B3E0 00347FC0  40 82 00 10 */	bne lbl_8034B3F0
/* 8034B3E4 00347FC4  3C 60 80 00 */	lis r3, 0x800000DC@ha
/* 8034B3E8 00347FC8  90 83 00 DC */	stw r4, 0x800000DC@l(r3)
/* 8034B3EC 00347FCC  48 00 00 08 */	b lbl_8034B3F4
lbl_8034B3F0:
/* 8034B3F0 00347FD0  90 85 02 FC */	stw r4, 0x2fc(r5)
lbl_8034B3F4:
/* 8034B3F4 00347FD4  38 00 00 00 */	li r0, 0
/* 8034B3F8 00347FD8  B0 1E 02 C8 */	sth r0, 0x2c8(r30)
/* 8034B3FC 00347FDC  48 00 00 10 */	b lbl_8034B40C
lbl_8034B400:
/* 8034B400 00347FE0  38 00 00 08 */	li r0, 8
/* 8034B404 00347FE4  B0 1E 02 C8 */	sth r0, 0x2c8(r30)
/* 8034B408 00347FE8  93 9E 02 D8 */	stw r28, 0x2d8(r30)
lbl_8034B40C:
/* 8034B40C 00347FEC  7F C3 F3 78 */	mr r3, r30
/* 8034B410 00347FF0  4B FF CA CD */	bl __OSUnlockAllMutex
/* 8034B414 00347FF4  38 7E 02 E8 */	addi r3, r30, 0x2e8
/* 8034B418 00347FF8  48 00 06 E9 */	bl OSWakeupThread
/* 8034B41C 00347FFC  38 00 00 01 */	li r0, 1
/* 8034B420 00348000  90 0D BD 3C */	stw r0, lbl_804D73DC(r13)
/* 8034B424 00348004  80 0D BD 3C */	lwz r0, lbl_804D73DC(r13)
/* 8034B428 00348008  2C 00 00 00 */	cmpwi r0, 0
/* 8034B42C 0034800C  41 82 00 0C */	beq lbl_8034B438
/* 8034B430 00348010  38 60 00 00 */	li r3, 0
/* 8034B434 00348014  4B FF FB F9 */	bl SelectThread
lbl_8034B438:
/* 8034B438 00348018  7F A3 EB 78 */	mr r3, r29
/* 8034B43C 0034801C  4B FF BF 51 */	bl OSRestoreInterrupts
/* 8034B440 00348020  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8034B444 00348024  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8034B448 00348028  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8034B44C 0034802C  7C 08 03 A6 */	mtlr r0
/* 8034B450 00348030  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8034B454 00348034  83 81 00 10 */	lwz r28, 0x10(r1)
/* 8034B458 00348038  38 21 00 20 */	addi r1, r1, 0x20
/* 8034B45C 0034803C  4E 80 00 20 */	blr 
} // clang-format on
#pragma pop

#pragma push
asm void OSCancelThread(OSThread*)
{ // clang-format off
    nofralloc
/* 8034B460 00348040  7C 08 02 A6 */	mflr r0
/* 8034B464 00348044  90 01 00 04 */	stw r0, 4(r1)
/* 8034B468 00348048  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8034B46C 0034804C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8034B470 00348050  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8034B474 00348054  7C 7E 1B 78 */	mr r30, r3
/* 8034B478 00348058  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8034B47C 0034805C  4B FF BE E9 */	bl OSDisableInterrupts
/* 8034B480 00348060  A0 1E 02 C8 */	lhz r0, 0x2c8(r30)
/* 8034B484 00348064  3B E3 00 00 */	addi r31, r3, 0
/* 8034B488 00348068  2C 00 00 03 */	cmpwi r0, 3
/* 8034B48C 0034806C  41 82 00 DC */	beq lbl_8034B568
/* 8034B490 00348070  40 80 00 14 */	bge lbl_8034B4A4
/* 8034B494 00348074  2C 00 00 01 */	cmpwi r0, 1
/* 8034B498 00348078  41 82 00 18 */	beq lbl_8034B4B0
/* 8034B49C 0034807C  40 80 00 2C */	bge lbl_8034B4C8
/* 8034B4A0 00348080  48 00 00 C8 */	b lbl_8034B568
lbl_8034B4A4:
/* 8034B4A4 00348084  2C 00 00 05 */	cmpwi r0, 5
/* 8034B4A8 00348088  40 80 00 C0 */	bge lbl_8034B568
/* 8034B4AC 0034808C  48 00 00 28 */	b lbl_8034B4D4
lbl_8034B4B0:
/* 8034B4B0 00348090  80 1E 02 CC */	lwz r0, 0x2cc(r30)
/* 8034B4B4 00348094  2C 00 00 00 */	cmpwi r0, 0
/* 8034B4B8 00348098  41 81 00 BC */	bgt lbl_8034B574
/* 8034B4BC 0034809C  7F C3 F3 78 */	mr r3, r30
/* 8034B4C0 003480A0  4B FF F9 09 */	bl UnsetRun
/* 8034B4C4 003480A4  48 00 00 B0 */	b lbl_8034B574
lbl_8034B4C8:
/* 8034B4C8 003480A8  38 00 00 01 */	li r0, 1
/* 8034B4CC 003480AC  90 0D BD 3C */	stw r0, lbl_804D73DC(r13)
/* 8034B4D0 003480B0  48 00 00 A4 */	b lbl_8034B574
lbl_8034B4D4:
/* 8034B4D4 003480B4  80 9E 02 E0 */	lwz r4, 0x2e0(r30)
/* 8034B4D8 003480B8  80 BE 02 E4 */	lwz r5, 0x2e4(r30)
/* 8034B4DC 003480BC  28 04 00 00 */	cmplwi r4, 0
/* 8034B4E0 003480C0  40 82 00 10 */	bne lbl_8034B4F0
/* 8034B4E4 003480C4  80 7E 02 DC */	lwz r3, 0x2dc(r30)
/* 8034B4E8 003480C8  90 A3 00 04 */	stw r5, 4(r3)
/* 8034B4EC 003480CC  48 00 00 08 */	b lbl_8034B4F4
lbl_8034B4F0:
/* 8034B4F0 003480D0  90 A4 02 E4 */	stw r5, 0x2e4(r4)
lbl_8034B4F4:
/* 8034B4F4 003480D4  28 05 00 00 */	cmplwi r5, 0
/* 8034B4F8 003480D8  40 82 00 10 */	bne lbl_8034B508
/* 8034B4FC 003480DC  80 7E 02 DC */	lwz r3, 0x2dc(r30)
/* 8034B500 003480E0  90 83 00 00 */	stw r4, 0(r3)
/* 8034B504 003480E4  48 00 00 08 */	b lbl_8034B50C
lbl_8034B508:
/* 8034B508 003480E8  90 85 02 E0 */	stw r4, 0x2e0(r5)
lbl_8034B50C:
/* 8034B50C 003480EC  38 00 00 00 */	li r0, 0
/* 8034B510 003480F0  90 1E 02 DC */	stw r0, 0x2dc(r30)
/* 8034B514 003480F4  80 1E 02 CC */	lwz r0, 0x2cc(r30)
/* 8034B518 003480F8  2C 00 00 00 */	cmpwi r0, 0
/* 8034B51C 003480FC  41 81 00 58 */	bgt lbl_8034B574
/* 8034B520 00348100  80 7E 02 F0 */	lwz r3, 0x2f0(r30)
/* 8034B524 00348104  28 03 00 00 */	cmplwi r3, 0
/* 8034B528 00348108  41 82 00 4C */	beq lbl_8034B574
/* 8034B52C 0034810C  83 A3 00 08 */	lwz r29, 8(r3)
lbl_8034B530:
/* 8034B530 00348110  80 1D 02 CC */	lwz r0, 0x2cc(r29)
/* 8034B534 00348114  2C 00 00 00 */	cmpwi r0, 0
/* 8034B538 00348118  41 81 00 3C */	bgt lbl_8034B574
/* 8034B53C 0034811C  7F A3 EB 78 */	mr r3, r29
/* 8034B540 00348120  4B FF F8 F1 */	bl __OSGetEffectivePriority
/* 8034B544 00348124  80 1D 02 D0 */	lwz r0, 0x2d0(r29)
/* 8034B548 00348128  38 83 00 00 */	addi r4, r3, 0
/* 8034B54C 0034812C  7C 00 20 00 */	cmpw r0, r4
/* 8034B550 00348130  41 82 00 24 */	beq lbl_8034B574
/* 8034B554 00348134  7F A3 EB 78 */	mr r3, r29
/* 8034B558 00348138  4B FF F9 15 */	bl SetEffectivePriority
/* 8034B55C 0034813C  7C 7D 1B 79 */	or. r29, r3, r3
/* 8034B560 00348140  40 82 FF D0 */	bne lbl_8034B530
/* 8034B564 00348144  48 00 00 10 */	b lbl_8034B574
lbl_8034B568:
/* 8034B568 00348148  7F E3 FB 78 */	mr r3, r31
/* 8034B56C 0034814C  4B FF BE 21 */	bl OSRestoreInterrupts
/* 8034B570 00348150  48 00 00 90 */	b lbl_8034B600
lbl_8034B574:
/* 8034B574 00348154  7F C3 F3 78 */	mr r3, r30
/* 8034B578 00348158  4B FF 9C DD */	bl OSClearContext
/* 8034B57C 0034815C  A0 1E 02 CA */	lhz r0, 0x2ca(r30)
/* 8034B580 00348160  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 8034B584 00348164  41 82 00 48 */	beq lbl_8034B5CC
/* 8034B588 00348168  80 9E 02 FC */	lwz r4, 0x2fc(r30)
/* 8034B58C 0034816C  80 BE 03 00 */	lwz r5, 0x300(r30)
/* 8034B590 00348170  28 04 00 00 */	cmplwi r4, 0
/* 8034B594 00348174  40 82 00 10 */	bne lbl_8034B5A4
/* 8034B598 00348178  3C 60 80 00 */	lis r3, 0x800000E0@ha
/* 8034B59C 0034817C  90 A3 00 E0 */	stw r5, 0x800000E0@l(r3)
/* 8034B5A0 00348180  48 00 00 08 */	b lbl_8034B5A8
lbl_8034B5A4:
/* 8034B5A4 00348184  90 A4 03 00 */	stw r5, 0x300(r4)
lbl_8034B5A8:
/* 8034B5A8 00348188  28 05 00 00 */	cmplwi r5, 0
/* 8034B5AC 0034818C  40 82 00 10 */	bne lbl_8034B5BC
/* 8034B5B0 00348190  3C 60 80 00 */	lis r3, 0x800000DC@ha
/* 8034B5B4 00348194  90 83 00 DC */	stw r4, 0x800000DC@l(r3)
/* 8034B5B8 00348198  48 00 00 08 */	b lbl_8034B5C0
lbl_8034B5BC:
/* 8034B5BC 0034819C  90 85 02 FC */	stw r4, 0x2fc(r5)
lbl_8034B5C0:
/* 8034B5C0 003481A0  38 00 00 00 */	li r0, 0
/* 8034B5C4 003481A4  B0 1E 02 C8 */	sth r0, 0x2c8(r30)
/* 8034B5C8 003481A8  48 00 00 0C */	b lbl_8034B5D4
lbl_8034B5CC:
/* 8034B5CC 003481AC  38 00 00 08 */	li r0, 8
/* 8034B5D0 003481B0  B0 1E 02 C8 */	sth r0, 0x2c8(r30)
lbl_8034B5D4:
/* 8034B5D4 003481B4  7F C3 F3 78 */	mr r3, r30
/* 8034B5D8 003481B8  4B FF C9 05 */	bl __OSUnlockAllMutex
/* 8034B5DC 003481BC  38 7E 02 E8 */	addi r3, r30, 0x2e8
/* 8034B5E0 003481C0  48 00 05 21 */	bl OSWakeupThread
/* 8034B5E4 003481C4  80 0D BD 3C */	lwz r0, lbl_804D73DC(r13)
/* 8034B5E8 003481C8  2C 00 00 00 */	cmpwi r0, 0
/* 8034B5EC 003481CC  41 82 00 0C */	beq lbl_8034B5F8
/* 8034B5F0 003481D0  38 60 00 00 */	li r3, 0
/* 8034B5F4 003481D4  4B FF FA 39 */	bl SelectThread
lbl_8034B5F8:
/* 8034B5F8 003481D8  7F E3 FB 78 */	mr r3, r31
/* 8034B5FC 003481DC  4B FF BD 91 */	bl OSRestoreInterrupts
lbl_8034B600:
/* 8034B600 003481E0  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8034B604 003481E4  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8034B608 003481E8  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8034B60C 003481EC  7C 08 03 A6 */	mtlr r0
/* 8034B610 003481F0  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8034B614 003481F4  38 21 00 20 */	addi r1, r1, 0x20
/* 8034B618 003481F8  4E 80 00 20 */	blr 
} // clang-format on
#pragma pop
